!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Kline=e()}(this,function(){"use strict";var t=Object.freeze([Date.now(),1,1,1,1,1,1]),o=Object.freeze([{name:"candles",value:"normal"},{name:"heikin-ashi",value:"average"}]),n=Object.freeze([{name:"time",value:6e4},{name:"1min",value:6e4},{name:"5min",value:3e5},{name:"15min",value:9e5},{name:"30min",value:18e5},{name:"1hour",value:36e5},{name:"4hour",value:144e5},{name:"1day",value:864e5},{name:"5day",value:432e6},{name:"1week",value:6048e5}]),e=Object.freeze({base:[{name:"MA",value:"MA"},{name:"EMA",value:"EMA"},{name:"BOLL",value:"BOLL"},{name:"SAR",value:"SAR"}],technical:[{name:"MACD",value:"MACD"},{name:"KDJ",value:"KDJ"},{name:"StochRSI",value:"StochRSI"},{name:"RSI",value:"RSI"},{name:"DMI",value:"DMI"},{name:"OBV",value:"OBV"},{name:"DMA",value:"DMA"},{name:"TRIX",value:"TRIX"},{name:"BRAR",value:"BRAR"},{name:"VR",value:"VR"},{name:"EMV",value:"EMV"},{name:"WR",value:"WR"},{name:"ROC",value:"ROC"},{name:"MTM",value:"MTM"},{name:"PSY",value:"PSY"}]}),r=Object.freeze([{name:"Jan",value:1},{name:"Feb",value:2},{name:"Mar",value:3},{name:"Apr",value:4},{name:"May",value:5},{name:"Jun",value:6},{name:"Jul",value:7},{name:"Aug",value:8},{name:"Sep",value:9},{name:"Oct",value:10},{name:"Nov",value:11},{name:"Dec",value:12}]),h=Object.freeze({down:0,halfUp:1,halfDown:2,up:3}),s=20,a=1,w=1e6,u=-7,c=21,l="[big.js] ",d=l+"Invalid ",$=d+"decimal places",m=d+"rounding mode",M=l+"Division by zero",f={},b=void 0,v=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function S(t,e,n,i){var r=t.c,s=t.e+e+1;if(s<r.length){if(1===n)i=5<=r[s];else if(2===n)i=5<r[s]||5==r[s]&&(i||s<0||r[s+1]!==b||1&r[s-1]);else if(3===n)i=i||!!r[0];else if(i=!1,0!==n)throw Error(m);if(s<1)r.length=1,r[0]=i?(t.e=-e,1):t.e=0;else{if(r.length=s--,i)for(;9<++r[s];)r[s]=0,s--||(++t.e,r.unshift(1));for(s=r.length;!r[--s];)r.pop()}}else if(n<0||3<n||n!==~~n)throw Error(m);return t}function i(t,e,n,i){var r,s,a=t.constructor,o=!t.c[0];if(n!==b){if(n!==~~n||n<(3==e)||w<n)throw Error(3==e?d+"precision":$);for(n=i-(t=new a(t)).e,t.c.length>++i&&S(t,n,a.RM),2==e&&(i=t.e+n+1);t.c.length<i;)t.c.push(0)}if(r=t.e,n=(s=t.c.join("")).length,2!=e&&(1==e||3==e&&i<=r||r<=a.NE||r>=a.PE))s=s.charAt(0)+(1<n?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(0<r)if(++r>n)for(r-=n;r--;)s+="0";else r<n&&(s=s.slice(0,r)+"."+s.slice(r));else 1<n&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&(!o||4==e)?"-"+s:s}f.abs=function(){var t=new this.constructor(this);return t.s=1,t},f.cmp=function(t){var e,n=this.c,i=(t=new this.constructor(t)).c,r=this.s,s=t.s,a=this.e,o=t.e;if(!n[0]||!i[0])return n[0]?r:i[0]?-s:0;if(r!=s)return r;if(e=r<0,a!=o)return o<a^e?1:-1;for(s=(a=n.length)<(o=i.length)?a:o,r=-1;++r<s;)if(n[r]!=i[r])return n[r]>i[r]^e?1:-1;return a==o?0:o<a^e?1:-1},f.div=function(t){var e=this.constructor,n=this.c,i=(t=new e(t)).c,r=this.s==t.s?1:-1,s=e.DP;if(s!==~~s||s<0||w<s)throw Error($);if(!i[0])throw Error(M);if(!n[0])return new e(0*r);var a,o,u,c,h,l=i.slice(),d=a=i.length,m=n.length,f=n.slice(0,a),v=f.length,g=t,p=g.c=[],x=0,y=s+(g.e=this.e-t.e)+1;for(g.s=r,r=y<0?0:y,l.unshift(0);v++<a;)f.push(0);do{for(u=0;u<10;u++){if(a!=(v=f.length))c=v<a?1:-1;else for(h=-1,c=0;++h<a;)if(i[h]!=f[h]){c=i[h]>f[h]?1:-1;break}if(!(c<0))break;for(o=v==a?i:l;v;){if(f[--v]<o[v]){for(h=v;h&&!f[--h];)f[h]=9;--f[h],f[v]+=10}f[v]-=o[v]}for(;!f[0];)f.shift()}p[x++]=c?u:++u,f[0]&&c?f[v]=n[d]||0:f=[n[d]]}while((d++<m||f[0]!==b)&&r--);return p[0]||1==x||(p.shift(),g.e--),y<x&&S(g,s,e.RM,f[0]!==b),g},f.eq=function(t){return!this.cmp(t)},f.gt=function(t){return 0<this.cmp(t)},f.gte=function(t){return-1<this.cmp(t)},f.lt=function(t){return this.cmp(t)<0},f.lte=function(t){return this.cmp(t)<1},f.minus=f.sub=function(t){var e,n,i,r,s=this,a=s.constructor,o=s.s,u=(t=new a(t)).s;if(o!=u)return t.s=-u,s.plus(t);var c=s.c.slice(),h=s.e,l=t.c,d=t.e;if(!c[0]||!l[0])return l[0]?(t.s=-u,t):new a(c[0]?s:0);if(o=h-d){for((i=(r=o<0)?(o=-o,c):(d=h,l)).reverse(),u=o;u--;)i.push(0);i.reverse()}else for(n=((r=c.length<l.length)?c:l).length,o=u=0;u<n;u++)if(c[u]!=l[u]){r=c[u]<l[u];break}if(r&&(i=c,c=l,l=i,t.s=-t.s),0<(u=(n=l.length)-(e=c.length)))for(;u--;)c[e++]=0;for(u=e;o<n;){if(c[--n]<l[n]){for(e=n;e&&!c[--e];)c[e]=9;--c[e],c[n]+=10}c[n]-=l[n]}for(;0===c[--u];)c.pop();for(;0===c[0];)c.shift(),--d;return c[0]||(t.s=1,c=[d=0]),t.c=c,t.e=d,t},f.mod=function(t){var e,n=this,i=n.constructor,r=n.s,s=(t=new i(t)).s;if(!t.c[0])throw Error(M);return n.s=t.s=1,e=1==t.cmp(n),n.s=r,t.s=s,e?new i(n):(r=i.DP,s=i.RM,i.DP=i.RM=0,n=n.div(t),i.DP=r,i.RM=s,this.minus(n.times(t)))},f.plus=f.add=function(t){var e,n=this,i=n.constructor,r=n.s,s=(t=new i(t)).s;if(r!=s)return t.s=-s,n.minus(t);var a=n.e,o=n.c,u=t.e,c=t.c;if(!o[0]||!c[0])return c[0]?t:new i(o[0]?n:0*r);if(o=o.slice(),r=a-u){for((e=0<r?(u=a,c):(r=-r,o)).reverse();r--;)e.push(0);e.reverse()}for(o.length-c.length<0&&(e=c,c=o,o=e),r=c.length,s=0;r;o[r]%=10)s=(o[--r]=o[r]+c[r]+s)/10|0;for(s&&(o.unshift(s),++u),r=o.length;0===o[--r];)o.pop();return t.c=o,t.e=u,t},f.pow=function(t){var e=this,n=new e.constructor(1),i=n,r=t<0;if(t!==~~t||t<-1e6||1e6<t)throw Error(d+"exponent");for(r&&(t=-t);1&t&&(i=i.times(e)),t>>=1;)e=e.times(e);return r?n.div(i):i},f.round=function(t,e){var n=this.constructor;if(t===b)t=0;else if(t!==~~t||t<-w||w<t)throw Error($);return S(new n(this),t,e===b?n.RM:e)},f.sqrt=function(){var t,e,n,i=this,r=i.constructor,s=i.s,a=i.e,o=new r(.5);if(!i.c[0])return new r(i);if(s<0)throw Error(l+"No square root");for(a=(t=0===(s=Math.sqrt(i+""))||s===1/0?((e=i.c.join("")).length+a&1||(e+="0"),a=((a+1)/2|0)-(a<0||1&a),new r(((s=Math.sqrt(e))==1/0?"1e":(s=s.toExponential()).slice(0,s.indexOf("e")+1))+a)):new r(s)).e+(r.DP+=4);n=t,t=o.times(n.plus(i.div(n))),n.c.slice(0,a).join("")!==t.c.slice(0,a).join(""););return S(t,r.DP-=4,r.RM)},f.times=f.mul=function(t){var e,n=this.constructor,i=this.c,r=(t=new n(t)).c,s=i.length,a=r.length,o=this.e,u=t.e;if(t.s=this.s==t.s?1:-1,!i[0]||!r[0])return new n(0*t.s);for(t.e=o+u,s<a&&(e=i,i=r,r=e,u=s,s=a,a=u),e=new Array(u=s+a);u--;)e[u]=0;for(o=a;o--;){for(a=0,u=s+o;o<u;)a=e[u]+r[o]*i[u-o-1]+a,e[u--]=a%10,a=a/10|0;e[u]=(e[u]+a)%10}for(a?++t.e:e.shift(),o=e.length;!e[--o];)e.pop();return t.c=e,t},f.toExponential=function(t){return i(this,1,t,t)},f.toFixed=function(t){return i(this,2,t,this.e+t)},f.toPrecision=function(t){return i(this,3,t,t-1)},f.toString=function(){return i(this)},f.valueOf=f.toJSON=function(){return i(this,4)};var g=function n(){function i(t){var e=this;if(!(e instanceof i))return t===b?n():new i(t);t instanceof i?(e.s=t.s,e.e=t.e,e.c=t.c.slice()):function(t,e){var n,i,r;if(0===e&&1/e<0)e="-0";else if(!v.test(e+=""))throw Error(d+"number");for(t.s="-"==e.charAt(0)?(e=e.slice(1),-1):1,-1<(n=e.indexOf("."))&&(e=e.replace(".","")),0<(i=e.search(/e/i))?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),r=e.length,i=0;i<r&&"0"==e.charAt(i);)++i;if(i==r)t.c=[t.e=0];else{for(;0<r&&"0"==e.charAt(--r););for(t.e=n-i-1,t.c=[],n=0;i<=r;)t.c[n++]=+e.charAt(i++)}}(e,t),e.constructor=i}return i.prototype=f,i.DP=s,i.RM=a,i.NE=u,i.PE=c,i.version="5.2.2",i}(),p={langName:"zh",time:"分时","1min":"1min","5min":"5min","15min":"15min","30min":"30min","1hour":"1hour","4hour":"4hour","1day":"1day","5day":"5day","1week":"1week","1mon":"1mon",Jan:"1月",Feb:"2月",Mar:"3月",Apr:"4月",May:"5月",Jun:"6月",Jul:"7月",Aug:"8月",Sep:"9月",Oct:"10月",Nov:"11月",Dec:"12月",yyyy:"{year}年",candles:"K线图","heikin-ashi":"平均K线图","candle-types":"K线类型",indicators:"指标","indicators.base":"基础指标","indicators.technical":"技术指标",MA:"MA",EMA:"EMA",BOLL:"BOLL",SAR:"SAR",MACD:"MACD",KDJ:"KDJ",StochRSI:"StochRSI",RSI:"RSI",DMI:"DMI",OBV:"OBV",DMA:"DMA",TRIX:"TRIX",BRAR:"BRAR",VR:"VR",EMV:"EMV",WR:"WR",ROC:"ROC",MTM:"MTM",PSY:"PSY","full-screen":"全屏","full-screen-exit":"退出全屏"},x=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(i=(a=o.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,s=t}finally{try{!i&&o.return&&o.return()}finally{if(r)throw s}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},D=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)};var C=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return x(t,null,[{key:"addLangSource",value:function(t){if(!t.langName)throw new Error("Key `langName` in lang object is missed");this.langs[t.langName]=t,console.log("Your custom language set successful")}},{key:"$t",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!this.langs[this.lang])throw new Error("(Lang.js) No language: "+this.lang);var n=this.langs[this.lang][t];return n?Object.keys(e).map(function(t){return{rule:new RegExp("{"+t+"}","g"),value:e[t]}}).reduce(function(t,e){return t.replace(e.reg,e.value)},n):(console.warn("(Lang.js) Key: "+t+" is not exist"),t)}},{key:"setLang",value:function(t){if(!this.langs[t])throw new Error("(Lang.js) No language: "+t);this.lang=t}}]),t}();C.langs=[{langName:"en",time:"time","1min":"1min","5min":"5min","15min":"15min","30min":"30min","1hour":"1hour","4hour":"4hour","1day":"1day","5day":"5day","1week":"1week","1mon":"1mon",Jan:"Jan",Feb:"Feb",Mar:"Mar",Apr:"Apr",May:"May",Jun:"Jun",Jul:"Jul",Aug:"Aug",Sep:"Sep",Oct:"Oct",Nov:"Nov",Dec:"Dec",yyyy:"{year}",candles:"Candles","heikin-ashi":"Heikin Ashi","candle-types":"Candle Types",indicators:"Indicators","indicators.base":"Base Indicators","indicators.technical":"Technical Indicators",MA:"MA",EMA:"EMA",BOLL:"BOLL",SAR:"SAR",MACD:"MACD",KDJ:"KDJ",StochRSI:"StochRSI",RSI:"RSI",DMI:"DMI",OBV:"OBV",DMA:"DMA",TRIX:"TRIX",BRAR:"BRAR",VR:"VR",EMV:"EMV",WR:"WR",ROC:"ROC",MTM:"MTM",PSY:"PSY","full-screen":"Full Screen","full-screen-exit":"Exit Full Screen"},p].reduce(function(t,e){return t[e.langName]=e,t},{}),C.lang=p.langName;var z={created:function(){this.$lang=C},data:function(){return{$lang:null}},methods:{$num:function(t){return new g(t)}}},R={name:"Candle",mixins:[z],props:{prices:{type:Array,default:function(){return t}},origin:{type:Object,default:function(){return{x:0,y:0}}},width:Number,heightRate:Number},data:function(){return{}},computed:{d:function(){var t=this.origin,e=t.x,n=t.y,i=_(this.prices,5),r=i[1],s=i[2],a=i[3],o=i[4],u=this.$num(this.width).div(2).round(0,h.down),c=[+this.$num(s).minus(this.$num(Math.max(r,o))).times(this.heightRate).round(0,h.up),Math.max(1,+this.$num(r).minus(o).abs().times(this.heightRate).round(0,h.up)),+this.$num(Math.min(r,o)).minus(a).times(this.heightRate).round(0,h.up)];return"M"+u.plus(e)+","+n+" h1 v"+c[0]+" h"+u+"\n       v"+c[1]+" h"+-u+" v"+c[2]+" h-1 v"+-c[2]+" h"+-u+" v"+-c[1]+" h"+u+" z"},className:function(){var t=_(this.prices,5),e=t[1];return 0<t[4]-e?"up":"down"}},methods:{log:function(){var t;(t=console).log.apply(t,arguments)}}};var O,I,A,Y,W,T=(A=void 0,Y=!(O={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("path",{staticClass:"candle",class:t.className,attrs:{d:t.d},on:{click:t.log}})},staticRenderFns:[]}),(W=("function"==typeof(I=R)?I.options:I)||{}).__file="Candle.vue",W.render||(W.render=O.render,W.staticRenderFns=O.staticRenderFns,W._compiled=!0,Y&&(W.functional=!0)),W._scopeId=A,W);var F=function(t){return t instanceof Date},H=36e5,N=6e4,k=/[T ]/,E=/:/,X=/^(\d{2})$/,L=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],V=/^(\d{4})/,j=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],B=/^-(\d{2})$/,P=/^-?(\d{3})$/,J=/^-?(\d{2})-?(\d{2})$/,U=/^-?W(\d{2})$/,G=/^-?W(\d{2})-?(\d{1})$/,K=/^(\d{2}([.,]\d*)?)$/,Z=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,q=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,Q=/([Z+-].*)$/,tt=/^(Z)$/,et=/^([+-])(\d{2})$/,nt=/^([+-])(\d{2}):?(\d{2})$/;function it(t,e,n){e=e||0,n=n||0;var i=new Date(0);i.setUTCFullYear(t,0,4);var r=7*e+n+1-(i.getUTCDay()||7);return i.setUTCDate(i.getUTCDate()+r),i}var rt=function(t,e){if(F(t))return new Date(t.getTime());if("string"!=typeof t)return new Date(t);var n=(e||{}).additionalDigits;n=null==n?2:Number(n);var i=function(t){var e,n={},i=t.split(k);if(e=E.test(i[0])?(n.date=null,i[0]):(n.date=i[0],i[1])){var r=Q.exec(e);r?(n.time=e.replace(r[1],""),n.timezone=r[1]):n.time=e}return n}(t),r=function(t,e){var n,i=L[e],r=j[e];if(n=V.exec(t)||r.exec(t)){var s=n[1];return{year:parseInt(s,10),restDateString:t.slice(s.length)}}if(n=X.exec(t)||i.exec(t)){var a=n[1];return{year:100*parseInt(a,10),restDateString:t.slice(a.length)}}return{year:null}}(i.date,n),s=r.year,a=function(t,e){if(null===e)return null;var n,i,r,s;if(0===t.length)return(i=new Date(0)).setUTCFullYear(e),i;if(n=B.exec(t))return i=new Date(0),r=parseInt(n[1],10)-1,i.setUTCFullYear(e,r),i;if(n=P.exec(t)){i=new Date(0);var a=parseInt(n[1],10);return i.setUTCFullYear(e,0,a),i}if(n=J.exec(t)){i=new Date(0),r=parseInt(n[1],10)-1;var o=parseInt(n[2],10);return i.setUTCFullYear(e,r,o),i}if(n=U.exec(t))return s=parseInt(n[1],10)-1,it(e,s);if(n=G.exec(t)){s=parseInt(n[1],10)-1;var u=parseInt(n[2],10)-1;return it(e,s,u)}return null}(r.restDateString,s);if(a){var o,u=a.getTime(),c=0;return i.time&&(c=function(t){var e,n,i;if(e=K.exec(t))return(n=parseFloat(e[1].replace(",",".")))%24*H;if(e=Z.exec(t))return n=parseInt(e[1],10),i=parseFloat(e[2].replace(",",".")),n%24*H+i*N;if(e=q.exec(t)){n=parseInt(e[1],10),i=parseInt(e[2],10);var r=parseFloat(e[3].replace(",","."));return n%24*H+i*N+1e3*r}return null}(i.time)),o=i.timezone?(h=i.timezone,(l=tt.exec(h))?0:(l=et.exec(h))?(d=60*parseInt(l[2],10),"+"===l[1]?-d:d):(l=nt.exec(h))?(d=60*parseInt(l[2],10)+parseInt(l[3],10),"+"===l[1]?-d:d):0):(o=new Date(u+c).getTimezoneOffset(),new Date(u+c+o*N).getTimezoneOffset()),new Date(u+c+o*N)}var h,l,d;return new Date(t)};var st=function(t){var e=rt(t),n=new Date(0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n};var at=function(t){var e=rt(t);return e.setHours(0,0,0,0),e};var ot=function(t,e){var n=at(t),i=at(e),r=n.getTime()-6e4*n.getTimezoneOffset(),s=i.getTime()-6e4*i.getTimezoneOffset();return Math.round((r-s)/864e5)};var ut=function(t){var e=rt(t);return ot(e,st(e))+1};var ct=function(t,e){var n=e&&Number(e.weekStartsOn)||0,i=rt(t),r=i.getDay(),s=(r<n?7:0)+r-n;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i};var ht=function(t){return ct(t,{weekStartsOn:1})};var lt=function(t){var e=rt(t),n=e.getFullYear(),i=new Date(0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);var r=ht(i),s=new Date(0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);var a=ht(s);return e.getTime()>=r.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1};var dt=function(t){var e=lt(t),n=new Date(0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),ht(n)};var mt=function(t){var e=rt(t),n=ht(e).getTime()-dt(e).getTime();return Math.round(n/6048e5)+1};var ft=function(t){if(F(t))return!isNaN(t);throw new TypeError(toString.call(t)+" is not an instance of Date")};var vt=["M","MM","Q","D","DD","DDD","DDDD","d","E","W","WW","YY","YYYY","GG","GGGG","H","HH","h","hh","m","mm","s","ss","S","SS","SSS","Z","ZZ","X","x"];var gt=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);var i=vt.concat(e).sort().reverse();return new RegExp("(\\[[^\\[]*\\])|(\\\\)?("+i.join("|")+"|.)","g")};var pt=function(){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=["January","February","March","April","May","June","July","August","September","October","November","December"],i=["Su","Mo","Tu","We","Th","Fr","Sa"],r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=["AM","PM"],o=["am","pm"],u=["a.m.","p.m."],t={MMM:function(t){return e[t.getMonth()]},MMMM:function(t){return n[t.getMonth()]},dd:function(t){return i[t.getDay()]},ddd:function(t){return r[t.getDay()]},dddd:function(t){return s[t.getDay()]},A:function(t){return 1<=t.getHours()/12?a[1]:a[0]},a:function(t){return 1<=t.getHours()/12?o[1]:o[0]},aa:function(t){return 1<=t.getHours()/12?u[1]:u[0]}};return["M","D","DDD","d","Q","W"].forEach(function(n){t[n+"o"]=function(t,e){return function(t){var e=t%100;if(20<e||e<10)switch(e%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"}(e[n](t))}}),{formatters:t,formattingTokensRegExp:gt(t)}},xt={distanceInWords:function(){var r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};return{localize:function(t,e,n){var i;return n=n||{},i="string"==typeof r[t]?r[t]:1===e?r[t].one:r[t].other.replace("{{count}}",e),n.addSuffix?0<n.comparison?"in "+i:i+" ago":i}}}(),format:pt()};var yt={M:function(t){return t.getMonth()+1},MM:function(t){return $t(t.getMonth()+1,2)},Q:function(t){return Math.ceil((t.getMonth()+1)/3)},D:function(t){return t.getDate()},DD:function(t){return $t(t.getDate(),2)},DDD:function(t){return ut(t)},DDDD:function(t){return $t(ut(t),3)},d:function(t){return t.getDay()},E:function(t){return t.getDay()||7},W:function(t){return mt(t)},WW:function(t){return $t(mt(t),2)},YY:function(t){return $t(t.getFullYear(),4).substr(2)},YYYY:function(t){return $t(t.getFullYear(),4)},GG:function(t){return String(lt(t)).substr(2)},GGGG:function(t){return lt(t)},H:function(t){return t.getHours()},HH:function(t){return $t(t.getHours(),2)},h:function(t){var e=t.getHours();return 0===e?12:12<e?e%12:e},hh:function(t){return $t(yt.h(t),2)},m:function(t){return t.getMinutes()},mm:function(t){return $t(t.getMinutes(),2)},s:function(t){return t.getSeconds()},ss:function(t){return $t(t.getSeconds(),2)},S:function(t){return Math.floor(t.getMilliseconds()/100)},SS:function(t){return $t(Math.floor(t.getMilliseconds()/10),2)},SSS:function(t){return $t(t.getMilliseconds(),3)},Z:function(t){return wt(t.getTimezoneOffset(),":")},ZZ:function(t){return wt(t.getTimezoneOffset())},X:function(t){return Math.floor(t.getTime()/1e3)},x:function(t){return t.getTime()}};function wt(t,e){e=e||"";var n=0<t?"-":"+",i=Math.abs(t),r=i%60;return n+$t(Math.floor(i/60),2)+e+$t(r,2)}function $t(t,e){for(var n=Math.abs(t).toString();n.length<e;)n="0"+n;return n}var Mt=function(t,e,n){var i=e?String(e):"YYYY-MM-DDTHH:mm:ss.SSSZ",r=(n||{}).locale,s=xt.format.formatters,a=xt.format.formattingTokensRegExp;r&&r.format&&r.format.formatters&&(s=r.format.formatters,r.format.formattingTokensRegExp&&(a=r.format.formattingTokensRegExp));var o=rt(t);return ft(o)?function(t,e,n){var i,r,s,a=t.match(n),o=a.length;for(i=0;i<o;i++)r=e[a[i]]||yt[a[i]],a[i]=r||((s=a[i]).match(/\[[\s\S]/)?s.replace(/^\[|]$/g,""):s.replace(/\\/g,""));return function(t){for(var e="",n=0;n<o;n++)a[n]instanceof Function?e+=a[n](t,yt):e+=a[n];return e}}(i,s,a)(o):"Invalid Date"},bt={name:"CrossCurve",mixins:[z],props:{y:Number,width:Number,textWidth:{type:Number,default:100},price:Number,isUp:Boolean,fontSize:Number},data:function(){return{}},computed:{cY:function(){return this.$num(this.y||0).round(0,h.down)}},watch:{},methods:{format:Mt,c:function(t,e){return this.$num(t).minus(this.$num(e).div(2)).round(0,h.down)}}};var St,_t,Dt,Ct,zt,Rt=(Dt=void 0,Ct=!(St={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{staticClass:"curr-price",class:t.isUp?"up":"down"},[n("line",{staticClass:"curr-price-line",class:t.red,attrs:{x1:"0",y1:t.$num(t.cY).plus(.5),x2:t.width,y2:t.$num(t.cY).plus(.5)}}),t._v(" "),n("g",{staticClass:"curr-price-value"},[n("rect",{staticClass:"curr-price-value-bg",attrs:{x:t.width,y:t.c(t.cY,20),width:t.textWidth,height:"20"}}),t._v(" "),n("text",{staticClass:"curr-price-value-text",attrs:{x:t.$num(t.width).plus(8),y:t.$num(t.cY).plus(t.$num(t.fontSize).div(2)),"font-size":t.fontSize}},[t._v(t._s(t.price)+"\n    ")])])])},staticRenderFns:[]}),(zt=("function"==typeof(_t=bt)?_t.options:_t)||{}).__file="CurrPrice.vue",zt.render||(zt.render=St.render,zt.staticRenderFns=St.staticRenderFns,zt._compiled=!0,Ct&&(zt.functional=!0)),zt._scopeId=Dt,zt);function Ot(t){return t.getBoundingClientRect()}var It={name:"YAxis",mixins:[z],props:{origin:Object,height:Number,range:Object,fontSize:Number},data:function(){return{transform:""}},computed:{cOrigin:function(){var t=this.origin||{},e=t.x,n=void 0===e?0:e,i=t.y,r=void 0===i?0:i;return{x:+this.$num(n).round(),y:+this.$num(r).round()}},cHeight:function(){return+this.$num(this.height).round()},unitHeight:function(){if(!this.range||!this.height)return 0;var t=this.range,e=t.max,n=void 0===e?1:e,i=t.min,r=void 0===i?0:i,s=t.power,a=void 0===s?0:s;return this.$num(n).minus(r).lte(0)?0:+this.$num(this.height).div(this.$num(n).minus(r)).times(this.$num(10).pow(a))},rangeOfTwo:function(){return this.range&&this.unitHeight?{max:+this.$num(30).times(2).div(this.unitHeight).round(0,h.down),min:+this.$num(30).div(this.unitHeight).round(0,h.up)}:null},rule:function(){var n=this;if(!this.rangeOfTwo)return null;var t=this.rangeOfTwo,e=t.max,i=t.min,r=this.$num(e).gt(i)?[].concat(D(Array(+this.$num(e).minus(i)))).map(function(t,e){return{value:+n.$num(i).plus(e)}}):[],s=r.filter(function(t){var e=t.value;return 0==+n.$num(e).mod(2)||0==+n.$num(e).mod(5)});return s[s.length-1]||r[r.length-1]||{value:1}},coords:function(){var i=this;if(!this.origin||Object.keys(this.range).length<1||!this.rule)return[];var t=this.range,e=t.max,n=void 0===e?1:e,r=t.min,s=void 0===r?0:r,a=t.power,o=void 0===a?0:a,u=this.$num(10).pow(o);return[].concat(D(Array(+this.$num(n).minus(s).div(u).round(0,h.up)))).map(function(t,e){return{value:+i.$num(n).minus(u.times(e)).round(-o,h.up),cValue:+i.$num(n).div(u).minus(e).round(0,h.up),delta:e}}).filter(function(t){var e=t.cValue;return 0==+i.$num(e).mod(i.rule.value)}).map(function(t){var e=t.value,n=t.delta;return{text:e.toString(),origin:{x:+i.cOrigin.x,y:+i.$num(n).times(i.unitHeight).plus(i.cOrigin.y).round(0,h.down)}}})}},watch:{coords:function(){this.emitWidth()},origin:function(){this.emitWidth()}},methods:{emitWidth:function(){var n=this;0<this.coords.length&&this.origin&&this.$nextTick(function(){var t=n.$refs.yAxis[0]||n.$refs.yAxis;if(t){var e=Ot(t);n.$emit("yWidth",+n.$num(e.width).plus(8).round(0,h.down))}})}}};var At,Yt,Wt,Tt,Ft,Ht=(Wt=void 0,Tt=!(At={render:function(){var n=this,t=n.$createElement,i=n._self._c||t;return n.origin?i("g",{ref:"yAxis",staticClass:"y-axis"},[i("rect",{staticClass:"axis-line y",attrs:{x:n.cOrigin.x,y:n.cOrigin.y,width:"1",height:n.cHeight}}),n._v(" "),n._l(n.coords,function(t,e){return i("g",{key:e,staticClass:"axis-coord y"},[i("rect",{staticClass:"axis-coord-marker y",attrs:{x:t.origin.x,y:t.origin.y,width:"4",height:"1"}}),n._v(" "),i("text",{staticClass:"axis-coord-text y",attrs:{x:n.$num(t.origin.x).plus(8),y:n.$num(t.origin.y).plus(n.$num(n.fontSize).div(2)),"font-size":n.fontSize}},[n._v("\n      "+n._s(t.text)+"\n    ")])])})],2):n._e()},staticRenderFns:[]}),(Ft=("function"==typeof(Yt=It)?Yt.options:Yt)||{}).__file="YAxis.vue",Ft.render||(Ft.render=At.render,Ft.staticRenderFns=At.staticRenderFns,Ft._compiled=!0,Tt&&(Ft.functional=!0)),Ft._scopeId=Wt,Ft),Nt={name:"Candles",mixins:[z],components:{YAxis:Ht,Candle:T,CurrPrice:Rt},props:{data:{type:Array,default:function(){return[]}},candleWidth:{type:Number,default:5},candleInterval:{type:Number,default:1},type:{type:String,default:o[0].value},size:Object,svgWidth:Number,showHLine:Boolean,fontSize:Number,markerWidth:Number,deltaX:{type:Number,default:0}},data:function(){return{CandleTypes:o}},computed:{contentWidth:function(){return this.size?+this.$num(this.size.width).minus(20):0},candleOffsetWidth:function(){return+this.$num(this.candleWidth).plus(this.candleInterval)},cutLength:function(){if(!this.size)return 0;var t=this.$num(this.contentWidth).plus(this.deltaX).div(this.candleOffsetWidth).round(0,h.up);return t.lt(this.data.length-1)?+t.plus(1):Math.max(1,+t.minus(1))},sliceLength:function(){if(!this.size)return 0;var t=this.$num(this.contentWidth).div(this.candleOffsetWidth).round(0,h.up);return t.lt(this.data.length-1)?+t.plus(1):Math.max(1,+t.minus(1))},showData:function(){if(!this.size)return[];var t=Math.max(0,this.data.length-this.cutLength);return this.data.slice(t,Math.min(this.data.length,t+this.sliceLength))},cData:function(){var n=this;return this.type===o[1].value?this.showData.map(function(t,e){return n.cPrices(t,n.showData[e-1]||t)}):this.showData},origins:function(){var n=this;return this.cData.map(function(t,e){return n.calcOrigin(t,e)})},priceRange:function(){var i=0,r=this.showData[0]?this.showData[0][3]:0,s=0;this.showData.forEach(function(t){var e=Math.max(t[1],t[2],t[4]),n=Math.min(t[1],t[3],t[4]);i<e&&(i=e),n<r&&(r=n),t.forEach(function(t){var e=t.toString().split("."),n=_(e,2)[1];n&&(s=Math.max(s,n.length))})});var t=+this.$num(i).minus(r).toExponential().toString().split("e")[1];return t=Math.max(-s,t-2),{max:i,min:r,precision:s,power:t}},rangeY:function(){var t=this.priceRange,e=t.max,n=t.min,i=t.power,r=t.precision;if(!this.size)return{max:e,min:n,power:i,precision:r};var s=this.$num(e).minus(n).div(this.size.height).times(40).toFixed(-i);return{max:+this.$num(e).plus(s),min:+this.$num(n).minus(s),power:i,precision:r}},heightRate:function(){if(!this.size)return 1;var t=this.rangeY,e=t.max,n=t.min;return+this.$num(this.size.height).div(this.$num(e).minus(n))},startX:function(){return+this.$num(this.contentWidth).minus(this.$num(this.candleOffsetWidth).times(this.sliceLength))},currPrice:function(){var t=(this.data||[]).length;if(!this.data||t<1)return null;var e=this.data[t-1],n=this.data[t-2],i=this.type===o[0].value?e:this.cPrices(e,n||e),r=_(i,5),s=r[1],a=r[4];return{value:a,y:+this.$num(this.rangeY.max).minus(a).times(this.heightRate).round(0,h.up),isUp:0<=a-s}}},watch:{cData:{handler:function(t){var e=this;0<t.length&&this.$nextTick(function(){e.$emit("showCandles",{data:e.cData,origins:e.origins,rangeY:e.rangeY,heightRate:e.heightRate,sliceLength:e.sliceLength})})},immediate:!0}},methods:{calcOrigin:function(t,e){return{x:+this.$num(this.candleOffsetWidth).times(e).plus(this.startX),y:+this.$num(this.rangeY.max).minus(Math.max(t[1],t[2],t[4])).times(this.heightRate).round(0,h.up)}},cPrices:function(t,e){var n,i=(n=t,Array.isArray(n)?n:Array.from(n)),r=i[0],s=i[1],a=i[2],o=i[3],u=i[4],c=i.slice(5),h=e[1],l=e[4],d=+this.$num(h).plus(l).div(2).toFixed(this.rangeY.precision),m=+this.$num(a).plus(o).plus(s).plus(u).div(4).toFixed(this.rangeY.precision);return[r,d,Math.max(a,d,m),Math.min(o,d,m),m].concat(D(c))}}};var kt,Et,Xt,Lt,Vt,jt=(Xt=void 0,Lt=!(kt={render:function(){var n=this,t=n.$createElement,i=n._self._c||t;return n.size?i("g",{staticClass:"candles"},[i("g",{attrs:{"clip-path":"url(#chart-content-clip)"}},n._l(n.cData,function(t,e){return i("candle",{key:t[0],attrs:{prices:t,width:n.candleWidth,heightRate:n.heightRate,origin:n.origins[e]}})})),n._v(" "),i("y-axis",{attrs:{origin:{x:n.size.width,y:0},height:n.size.height,range:n.rangeY,fontSize:n.fontSize},on:{yWidth:function(t){n.$emit("yWidth",t)}}}),n._v(" "),n.showHLine?i("rect",{staticClass:"h-line",attrs:{x:0,y:n.size.height-1,width:n.svgWidth,height:"1"}}):n._e(),n._v(" "),n.currPrice?i("curr-price",{attrs:{y:n.currPrice.y,width:n.size.width,price:n.currPrice.value,fontSize:n.fontSize,textWidth:n.markerWidth,isUp:n.currPrice.isUp}}):n._e()],1):n._e()},staticRenderFns:[]}),(Vt=("function"==typeof(Et=Nt)?Et.options:Et)||{}).__file="Candles.vue",Vt.render||(Vt.render=kt.render,Vt.staticRenderFns=kt.staticRenderFns,Vt._compiled=!0,Lt&&(Vt.functional=!0)),Vt._scopeId=Xt,Vt),Bt={name:"CrossCurve",mixins:[z],props:{origin:{type:Object,default:function(){return{x:1,y:1}}},size:{type:Object,default:function(){return{width:0,height:0}}},textSize:{type:Object,default:function(){return{width:100,height:24}}},fontSize:Number,time:Number,value:Number},data:function(){return{}},computed:{cOrigin:function(){var t=this.origin||{},e=t.x,n=void 0===e?0:e,i=t.y,r=void 0===i?0:i;return{x:this.$num(n).round(0,h.down),y:this.$num(r).round(0,h.down)}}},methods:{format:Mt,c:function(t,e){return this.$num(t).minus(this.$num(e).div(2)).round(0,h.down)}}};var Pt,Jt,Ut,Gt,Kt,Zt=(Ut=void 0,Gt=!(Pt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{staticClass:"cross-curve"},[n("line",{staticClass:"cross-h",attrs:{x1:"0",y1:t.$num(t.cOrigin.y).plus(.5),x2:t.size.width,y2:t.$num(t.cOrigin.y).plus(.5)}}),t._v(" "),n("line",{staticClass:"cross-v",attrs:{x1:t.$num(t.cOrigin.x).plus(.5),y1:0,x2:t.$num(t.cOrigin.x).plus(.5),y2:t.size.height}}),t._v(" "),n("g",{staticClass:"cross-time"},[n("rect",{staticClass:"cross-time-bg",attrs:{x:t.c(t.cOrigin.x,t.textSize.width),y:t.size.height,width:t.textSize.width,height:t.textSize.height}}),t._v(" "),n("text",{staticClass:"cross-time-text",attrs:{x:t.cOrigin.x,y:t.$num(t.size.height).plus(t.fontSize).plus(8),"font-size":t.fontSize,"text-anchor":"middle"}},[t._v(t._s(t.format(t.time,"YYYY-MM-DD HH:mm"))+"\n    ")])]),t._v(" "),n("g",{staticClass:"cross-value"},[n("rect",{staticClass:"cross-value-bg",attrs:{x:t.size.width,y:t.c(t.cOrigin.y,20),width:t.textSize.width,height:"20"}}),t._v(" "),n("text",{staticClass:"cross-value-text",attrs:{x:t.$num(t.size.width).plus(8),y:t.$num(t.cOrigin.y).plus(t.$num(t.fontSize).div(2)),"font-size":t.fontSize}},[t._v(t._s(t.value)+"\n    ")])])])},staticRenderFns:[]}),(Kt=("function"==typeof(Jt=Bt)?Jt.options:Jt)||{}).__file="CrossCurve.vue",Kt.render||(Kt.render=Pt.render,Kt.staticRenderFns=Pt.staticRenderFns,Kt._compiled=!0,Gt&&(Kt.functional=!0)),Kt._scopeId=Ut,Kt),qt={name:"Loading",props:{width:Number,height:Number}};var Qt,te,ee,ne,ie,re=(ee=void 0,ne=!(Qt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"loading",staticStyle:{"enable-background":"new 0 0 512 512"},attrs:{x:"0px",y:"0px",width:t.width,height:t.height,viewBox:"0 0 512 512","xml:space":"preserve"}},[n("circle",{staticClass:"loading-circle-1",attrs:{cx:"256",cy:"16",r:"16"}}),t._v(" "),n("circle",{staticClass:"loading-circle-2",attrs:{transform:"matrix(0.5 -0.866 0.866 0.5 146.2975 349.7025)",cx:"376",cy:"48.2",r:"16"}}),t._v(" "),n("circle",{staticClass:"loading-circle-3",attrs:{transform:"matrix(0.866 -0.5 0.5 0.866 -5.8564 250.1436)",cx:"463.8",cy:"136",r:"16"}}),t._v(" "),n("circle",{staticClass:"loading-circle-4",attrs:{cx:"496",cy:"256",r:"16"}}),t._v(" "),n("circle",{staticClass:"loading-circle-5",attrs:{transform:"matrix(0.5 -0.866 0.866 0.5 -93.7025 589.7025)",cx:"463.8",cy:"376",r:"16"}}),t._v(" "),n("circle",{staticClass:"loading-circle-6",attrs:{transform:"matrix(0.866 -0.5 0.5 0.866 -181.5486 250.1436)",cx:"376",cy:"463.8",r:"16"}}),t._v(" "),n("circle",{staticClass:"loading-circle-7",attrs:{cx:"256",cy:"496",r:"16"}}),t._v(" "),n("circle",{staticClass:"loading-circle-8",attrs:{transform:"matrix(0.5 -0.866 0.866 0.5 -333.7025 349.7025)",cx:"136",cy:"463.8",r:"16"}}),t._v(" "),n("circle",{staticClass:"loading-circle-9",attrs:{transform:"matrix(0.866 -0.5 0.5 0.866 -181.5486 74.4514)",cx:"48.2",cy:"376",r:"16"}}),t._v(" "),n("circle",{staticClass:"loading-circle-10",attrs:{cx:"16",cy:"256",r:"16"}}),t._v(" "),n("circle",{staticClass:"loading-circle-11",attrs:{transform:"matrix(0.5 -0.866 0.866 0.5 -93.7025 109.7025)",cx:"48.2",cy:"136",r:"16"}}),t._v(" "),n("circle",{staticClass:"loading-circle-12",attrs:{transform:"matrix(0.866 -0.5 0.5 0.866 -5.8564 74.4514)",cx:"136",cy:"48.2",r:"16"}})])},staticRenderFns:[]}),(ie=("function"==typeof(te=qt)?te.options:te)||{}).__file="Loading.vue",ie.render||(ie.render=Qt.render,ie.staticRenderFns=Qt.staticRenderFns,ie._compiled=!0,ne&&(ie.functional=!0)),ie._scopeId=ee,ie),se={name:"icon-full-screen",props:{type:String,width:Number,height:Number},data:function(){return{}},methods:{}};var ae,oe,ue,ce,he,le=(ue=void 0,ce=!(ae={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return"exit"!==e.type?n("svg",{staticClass:"icon-full-screen",staticStyle:{"enable-background":"new 0 0 128 128"},attrs:{viewBox:"0 0 128 128",width:e.width,height:e.height},on:{click:function(t){e.$emit("update:type","exit")}}},[n("path",{attrs:{d:"M112,128H80v-8h32c4.4,0,8-3.6,8-8V80h8v32C128,120.8,120.8,128,112,128C112,128,112,128,112,128z\n   M120,16c0-4.4-3.6-8-8-8c0,0,0,0,0,0H80V0h32c8.8,0,16,7.2,16,16v32h-8C120,48,120,16,120,16z\n   M0,112V80h8v32c0,4.4,3.6,8,8,8c0,0,0,0,0,0h32v8H16C7.2,128,0,120.8,0,112C0,112,0,112,0,112z\n   M8,16v32H0V16C0,7.2,7.2,0,16,0c0,0,0,0,0,0h32v8H16C11.6,8,8,11.6,8,16C8,16,8,16,8,16z"}})]):n("svg",{staticClass:"icon-full-screen",staticStyle:{"enable-background":"new 0 0 128 128"},attrs:{viewBox:"0 0 128 128",width:e.width,height:e.height},on:{click:function(t){e.$emit("update:type","")}}},[n("path",{attrs:{d:"M96,80h32v8H96c-4.4,0-8,3.6-8,8v32h-8V96C80,87.2,87.2,80,96,80C96,80,96,80,96,80z\n  M88,32c0,4.4,3.6,8,8,8c0,0,0,0,0,0l32,0v8H96c-8.8,0-16-7.2-16-16V0l8,0C88,0,88,32,88,32z\n  M48,96v32h-8V96c0-4.4-3.6-8-8-8c0,0,0,0,0,0H0l0-8h32C40.8,80,48,87.2,48,96C48,96,48,96,48,96z\n  M40,32V0l8,0v32c0,8.8-7.2,16-16,16c0,0,0,0,0,0H0l0-8l32,0C36.4,40,40,36.4,40,32C40,32,40,32,40,32z"}})])},staticRenderFns:[]}),(he=("function"==typeof(oe=se)?oe.options:oe)||{}).__file="IconFullScreen.vue",he.render||(he.render=ae.render,he.staticRenderFns=ae.staticRenderFns,he._compiled=!0,ce&&(he.functional=!0)),he._scopeId=ue,he);var de,me,fe,ve,ge,pe=(ve=!(de={render:function(){var i=this,t=i.$createElement,r=i._self._c||t;return r("div",{staticClass:"tool-bar"},[i._l(i.period.options,function(e){return r("button",{key:e.value,staticClass:"period",class:{selected:i.period.value===e},on:{click:function(t){i.period.value=e}}},[i._v(i._s(i.$lang.$t(e.name))+"\n  ")])}),i._v(" "),r("div",{staticClass:"candle-types"},[i._v("\n    "+i._s(i.$lang.$t("candle-types"))+"\n    "),r("div",{staticClass:"options"},i._l(i.candleType.options,function(e){return r("button",{key:e.value,staticClass:"option",class:{selected:i.candleType.value===e},on:{click:function(t){i.candleType.value=e}}},[i._v(i._s(i.$lang.$t(e.name))+"\n      ")])}))]),i._v(" "),r("div",{staticClass:"indicators"},[i._v("\n    "+i._s(i.$lang.$t("indicators"))+"\n    "),r("div",{staticClass:"options"},[i._l(i.indicators.options,function(t,n,e){return[r("h5",{key:n,staticClass:"caption"},[i._v(i._s(i.$lang.$t("indicators."+n)))]),i._v(" "),r("div",{key:n,staticClass:"option-group"},i._l(t,function(e){return r("button",{key:e.value,staticClass:"option",class:{selected:i.indicators.value.includes(e)},on:{click:function(t){i.choseIndicator(e,n)}}},[i._v(i._s(i.$lang.$t(e.name))+"\n          ")])})),i._v(" "),0===e?r("div",{key:n,staticClass:"decoration"}):i._e()]})],2)]),i._v(" "),r("div",{staticClass:"icon-full"},[r("span",{staticClass:"tool-tip"},[i._v(i._s(i.$lang.$t("exit"===i.fullScreen?"full-screen-exit":"full-screen")))]),i._v(" "),r("icon-full-screen",{attrs:{type:i.fullScreen},on:{"update:type":function(t){i.fullScreen=t}}})],1)],2)},staticRenderFns:[]}),(ge=("function"==typeof(me={name:"ToolBar",mixins:[z],components:{IconFullScreen:le},data:function(){return{period:{value:n[0],options:n},candleType:{value:o[0],options:o},indicators:{value:[],options:e},fullScreen:""}},computed:{},watch:{"period.value":{handler:function(t){this.$emit("period",t.value)},immediate:!(fe=void 0)},"candleType.value":{handler:function(t){this.$emit("candleType",t.value)},immediate:!0},"indicators.value":{handler:function(t){this.$emit("indicators",t)},immediate:!0},fullScreen:function(t){this.$emit("isFullScreen","exit"===t)}},methods:{choseIndicator:function(e,t){var n=this,i=Object.keys(this.indicators.value).find(function(t){return n.indicators.value[t].value===e.value});i?this.indicators.value.splice(i,1):this.indicators.value.push(y({},e,{type:t}))}}})?me.options:me)||{}).__file="ToolBar.vue",ge.render||(ge.render=de.render,ge.staticRenderFns=de.staticRenderFns,ge._compiled=!0,ve&&(ge.functional=!0)),ge._scopeId=fe,ge),xe={name:"Volume",mixins:[z],components:{YAxis:Ht},props:{data:{type:Array,default:function(){return[]}},origins:{type:Array,default:function(){return[]}},y:Number,size:Object,candleWidth:{type:Number,default:5},candleInterval:{type:Number,default:1},svgWidth:Number,showHLine:Boolean,fontSize:Number},data:function(){return{}},computed:{contentHeight:function(){return(this.size.height||100)-5},volumeWidth:function(){return+this.$num(this.candleWidth).plus(this.candleInterval)-1},deltaX:function(){return.5-this.$num(this.candleInterval).div(2).round(0,h.down)},rangeVolume:function(){return this.data.reduce(function(t,e){var n=t.max,i=t.min,r=t.precision,s=_(e,6)[5];n<s&&(n=s),s<i&&(i=s);var a=s.toString().split("."),o=_(a,2)[1];return o&&(r=Math.max(r,o.length)),{max:n,min:i,precision:r}},{max:0,min:1/0,precision:0})},rangeY:function(){var t=this.rangeVolume,e=t.max,n=t.min,i=t.precision;if(!this.size||n===1/0)return{max:1,min:0,power:0};var r=+this.$num(e).minus(n).toExponential().toString().split("e")[1];r=Math.max(-i,r-2);var s=this.size.height,a=+this.$num(e).minus(n).div(s);return{max:+this.$num(e).plus(this.$num(a).times(30)).round(r,h.up),min:Math.max(0,+this.$num(n).minus(this.$num(a).times(5)).round(r,h.down)),power:r,precision:i}},heightRate:function(){if(!this.size)return 0;var t=this.rangeY,e=t.max,n=t.min;return+this.$num(this.contentHeight).div(this.$num(e).minus(n))},volumes:function(){var r=this;return this.size&&this.data.length===this.origins.length?this.data.map(function(t,e){var n=+r.$num(t[5]).minus(Math.max(0,r.rangeY.min)).times(r.heightRate).round(0,h.down),i=+r.$num(r.contentHeight).minus(n);return{prices:t,origin:{x:+r.$num(r.origins[e].x).round(0,h.down).plus(r.deltaX),y:+r.$num(r.y).plus(i).round(0,h.down)-.5},height:n}}):[]}},watch:{volumes:{handler:function(t){t&&0<t.length&&this.$emit("showVolumes",{heightRate:this.heightRate,rangeY:this.rangeY})},immediate:!0}},methods:{className:function(t){var e=_(t,5),n=e[1];return 0<e[4]-n?"up":"down"}}};var ye,we,$e,Me,be,Se=($e=void 0,Me=!(ye={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{staticClass:"volumes",staticStyle:{overflow:"hidden"}},[n("g",{attrs:{"clip-path":"url(#chart-content-clip)"}},e._l(e.volumes,function(t){return n("rect",{key:t.prices[0],staticClass:"volume",class:e.className(t.prices),attrs:{x:t.origin.x,y:t.origin.y,width:e.volumeWidth,height:t.height}})})),e._v(" "),n("y-axis",{attrs:{origin:{x:e.size.width,y:e.$num(e.y).round()},height:e.size.height,range:e.rangeY,fontSize:e.fontSize},on:{yWidth:function(t){e.$emit("yWidth",t)}}}),e._v(" "),e.showHLine?n("rect",{staticClass:"h-line",attrs:{x:0,y:e.$num(e.y).plus(e.size.height-1).round(),width:e.svgWidth,height:"1"}}):e._e()],1)},staticRenderFns:[]}),(be=("function"==typeof(we=xe)?we.options:we)||{}).__file="Volumes.vue",be.render||(be.render=ye.render,be.staticRenderFns=ye.staticRenderFns,be._compiled=!0,Me&&(be.functional=!0)),be._scopeId=$e,be);var _e=function(t){return rt(t).getDate()};var De=function(t){return rt(t).getMonth()},Ce={name:"XAxis",mixins:[z],props:{y:Number,width:Number,time:Number,candleWidth:Number,candleInterval:Number,data:{type:Object,default:function(){return{}}},origins:{type:Object,default:function(){return{}}},sliceLength:Number,fontSize:Number},data:function(){return{acceptedIntervals:[{value:12e4,bold:18e5,name:"2min"},{value:18e4,bold:18e5,name:"3min"},{value:24e4,bold:18e5,name:"4min"},{value:3e5,bold:18e5,name:"5min"},{value:6e5,bold:18e5,name:"10min"},{value:9e5,bold:36e5,name:"15min"},{value:18e5,bold:36e5,name:"30min"},{value:36e5,bold:864e5,name:"60min"},{value:54e5,mod:36e5,bold:864e5,name:"1.5hour"},{value:108e5,mod:36e5,bold:864e5,name:"3hour"},{value:216e5,mod:144e5,bold:864e5,name:"6hour"},{value:432e5,mod:144e5,bold:864e5,name:"12hour"},{value:864e5,mod:576e5,bold:"month",name:"1d"},{value:1728e5,mod:144e6,bold:"month",name:"2d"},{value:2592e5,mod:2304e5,bold:"month",name:"3d"},{value:3456e5,mod:3168e5,bold:"month",name:"4d"},{value:432e6,mod:4032e5,bold:"month",name:"5d"},{value:5184e5,mod:4896e5,bold:"month",name:"6d"},{value:6048e5,mod:576e6,bold:"month",name:"7d"},{value:6912e5,mod:6624e5,bold:"month",name:"8d"},{value:7776e5,mod:7488e5,bold:"month",name:"9d"},{value:864e6,mod:8352e5,bold:"month",name:"10d"},{value:1296e6,bold:"month",alias:"15d"},{value:2592e6,bold:"year",alias:"1mon"},{value:5184e6,bold:"year",alias:"2mon"},{value:7776e6,bold:"year",alias:"3mon"},{value:10368e6,bold:"year",alias:"4mon"}]}},computed:{cY:function(){return+this.$num(this.y).round()},cWidth:function(){return+this.$num(this.width).round()},cTime:function(){var e=this;return n.find(function(t){return t.name===e.time})},delta:function(){return+this.$num(this.candleWidth).div(2).round(0,h.down)},candleOffsetWidth:function(){return+this.$num(this.candleInterval).plus(this.candleWidth)},range:function(){return{max:this.$num(75).times(2).div(this.candleOffsetWidth).round(0,h.down),min:this.$num(75).div(this.candleOffsetWidth).round(0,h.up)}},showRule:function(){var i=this,r=this.cTime.value,t=this.acceptedIntervals.filter(function(t){var e=t.value,n=i.$num(e).div(r);return n.lte(i.range.max)&&n.gte(i.range.min)});return t[t.length-1]||this.acceptedIntervals[this.acceptedIntervals.length-1]},coords:function(){var r=this;if(!this.sliceLength)return[];var t=this.showRule,i=t.value,e=t.mod,s=void 0===e?0:e,a=t.alias,o=this.data,u=this.origins,c={time:0,x:0};return[].concat(D(Array(+this.sliceLength))).reduce(function(t,e,n){if(o[n]){var i=_(o[n],1);return c.time=i[0],c.x=u[n].x,t.concat([{prices:o[n],origin:u[n]}])}return c.time=+r.$num(c.time).plus(r.cTime.value),c.x=+r.$num(c.x).plus(r.candleOffsetWidth),t.concat([{prices:[c.time],origin:{x:c.x}}])},[]).filter(function(t){var e=t.prices;if(a){if("15d"===a)return 15===_e(+e[0]);var n=+a.match(/^(\d)mon/)[1];return+r.$num(De(+e[0])).plus(1).mod(n)===s}return+r.$num(e[0]).mod(i)===s}).map(function(t){var e=t.prices,n=t.origin;return{prices:e,origin:{x:+r.$num(n.x).plus(r.delta),y:+r.cY},text:r.text(+e[0]),bold:r.bold(+e[0])}})}},watch:{coords:function(){this.emitHeight()}},methods:{bold:function(t){var e=void 0,n=this.showRule.bold;if("number"==typeof n)e=t%n==0;else{var i=Mt(t,"YYYY-MM-DD HH:mm");e="month"===n?/\s{4}-\s{2}-01 00:00/.test(i):/\s{4}-01-01 00:00/.test(i)}return e?"bold":""},text:function(t){var e=this.showRule,n=e.name,i=void 0;return e.alias||/d/.test(n)||"00:00"===(i=Mt(t,"HH:mm"))?"01"!==(i=Mt(t,"DD"))?i:"01"===(i=Mt(t,"MM"))?this.$lang.$t("yyyy",{year:Mt(t,"YYYY")}):this.$lang.$t(r[De(t)+1]):i},emitHeight:function(){var n=this;0<this.coords.length&&this.$nextTick(function(){n.$nextTick(function(){var t=n.$refs.xAxis[0]||n.$refs.xAxis;if(t){var e=Ot(t);n.$emit("xHeight",+n.$num(e.height).plus(8).round(0,h.down))}})})}},mounted:function(){}};var ze,Re,Oe,Ie,Ae,Ye,We,Te,Fe,He,Ne={name:"Index",mixins:[z],components:{ToolBar:pe,Candles:jt,XAxis:(Oe=void 0,Ie=!(ze={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{ref:"xAxis",staticClass:"x-axis"},[n("rect",{staticClass:"axis-line x",attrs:{x:"0",y:e.cY,width:e.cWidth,height:"1"}}),e._v(" "),e._l(e.coords,function(t){return n("g",{key:t.prices[0],staticClass:"axis-coord x",class:t.bold,attrs:{"clip-path":"url(#chart-content-clip)"}},[n("rect",{staticClass:"axis-coord-marker x",attrs:{x:t.origin.x,y:t.origin.y,width:"1",height:"4"}}),e._v(" "),n("text",{staticClass:"axis-coord-text x",attrs:{x:t.origin.x,y:e.$num(t.origin.y).plus(e.fontSize).plus(8),"font-size":e.fontSize,"text-anchor":"middle"}},[e._v("\n      "+e._s(t.text)+"\n    ")])])})],2)},staticRenderFns:[]}),(Ae=("function"==typeof(Re=Ce)?Re.options:Re)||{}).__file="XAxis.vue",Ae.render||(Ae.render=ze.render,Ae.staticRenderFns=ze.staticRenderFns,Ae._compiled=!0,Ie&&(Ae.functional=!0)),Ae._scopeId=Oe,Ae),CrossCurve:Zt,Volumes:Se,Loading:re},props:{data:{type:Array,default:function(){return[]}},fontSize:{type:Number,default:10},markerWidth:{type:Number,default:100},loading:Boolean},data:function(){return{candleWidth:6,axis:{x:{height:0},y:{width:0}},volumeHeight:100,indicatorHeight:100,size:null,type:o[0].value,showData:{data:[],origins:[]},sliceLength:0,time:"time",showVolumes:!0,isFullScreen:!1,period:0,dragOrigin:null,dragDelta:0,heightRate:{},indicators:[],crossCurveInfo:null,deltaX:0}},computed:{viewBox:function(){return this.size?"0 0 "+this.size.width+" "+this.size.height:"0 0 0 0"},chartWidth:function(){return this.size?+this.$num(this.size.width).minus(this.axis.y.width):0},chartHeight:function(){return this.size?+this.$num(this.size.height).minus(this.axis.x.height):0},showTechIndicator:function(){return!!this.indicators.filter(function(t){return"technical"===t.type}).length},candlesSize:function(){return this.size?{width:this.chartWidth,height:+this.$num(this.chartHeight).minus(this.showVolumes?this.volumeHeight:0).minus(this.showTechIndicator?this.indicatorHeight:0)}:null},cCandleWidth:function(){return+this.$num(this.$num(this.candleWidth).div(2).toFixed(0)).times(2).plus(1)},candleInterval:function(){return Math.round(+this.$num(this.candleWidth).div(7))},crossCurveRangeY:function(){return{candle:[0,this.candlesSize.height],volume:[this.candlesSize.height,this.candlesSize.height+this.volumeHeight],indicator:[this.candlesSize.height+this.volumeHeight,this.chartHeight]}},maxDeltaX:function(){return+this.$num(this.candleWidth).plus(this.candleInterval).times(this.data.length).minus(this.candlesSize.width)}},watch:{isFullScreen:function(){this.resize()},period:function(t){this.$emit("periodChange",t)}},methods:{getSize:function(){var a=this;this.$nextTick(function(){var t=Ot(a.$refs.wrap),e=t.width,n=void 0===e?0:e,i=t.height,r=void 0===i?0:i,s=Ot(a.$refs.toolbar.$el).height||0;a.size={width:+a.$num(n).round(0,h.down),height:+a.$num(r).minus(s).round(0,h.down)}})},setShowData:function(t){var e=t.data,n=t.origins,i=t.rangeY,r=t.heightRate,s=t.sliceLength;this.showData={data:e,origins:n},this.sliceLength=s,this.setHeightRate({heightRate:r,rangeY:i},"candle")},setXAxisHeight:function(t){this.axis.x.height=t},setYAxisWidth:function(t){this.axis.y.width=Math.max(this.axis.y.width,t)},resize:function(){this.getSize()},startDrag:function(t){this.dragOrigin={x:t.offsetX,y:t.offsetY,deltaX:this.deltaX}},drag:function(t){this.markerMove(t),this.dragOrigin&&(this.dragOrigin.deltaX===this.maxDeltaX&&0<+this.$num(t.offsetX-this.dragOrigin.x)?(this.$emit("getMorePreData"),this.dragOrigin=null):(this.deltaX=+this.$num(t.offsetX-this.dragOrigin.x).plus(this.dragOrigin.deltaX).toFixed(0),this.deltaX=Math.min(Math.max(0,this.deltaX),this.maxDeltaX)))},endDrag:function(){this.dragOrigin=null},markerMove:function(t){if(this.showData&&this.showData.data&&0<this.showData.data.length){var r={x:t.offsetX,y:t.offsetY};if(0<=r.x&&r.x<=this.chartWidth&&0<=r.y&&r.y<=this.chartHeight){var s=this.crossCurveRangeY,e=Object.keys(s).find(function(t){var e=_(s[t],2),n=e[0],i=e[1];return n<=r.y&&r.y<=i}),n=this.findNearest(this.showData.data,this.showData.origins,r.x),i=_(s[e],1)[0],a=this.heightRate[e]||{},o=a.value,u=a.rangeY;this.crossCurveInfo={origin:{x:n.x,y:Math.floor(r.y)},time:n.time,value:void 0!==o?this.$num(u.max).minus(this.$num(r.y).minus(i).div(o)).toFixed(u.precision):i}}else this.resetCrossCurveInfo()}},resetCrossCurveInfo:function(){this.crossCurveInfo=null},setHeightRate:function(t,e){var n=t.heightRate,i=t.rangeY;this.$set(this.heightRate,e,{value:n,rangeY:i})},findNearest:function(t,e,n){if(e.length<1)return{x:0,time:0};var i=Math.floor((e.length-1)/2),r=this.calcX(e[i]);if(e.length<2)return{x:r,time:t[0][0]};if(2!==e.length)return 0<r-n?this.findNearest(t.slice(0,i+1),e.slice(0,i+1),n):r-n<0?this.findNearest(t.slice(i),e.slice(i),n):{x:r,time:t[i][0]};var s=this.calcX(e[1]);return 0<Math.abs(s-n)-Math.abs(r-n)?{x:r,time:t[0][0]}:{x:s,time:t[1][0]}},calcX:function(t){return+this.$num(t.x).plus(this.$num(this.candleWidth).div(2).toFixed(0))},mouseScale:function(t){this.scale(0<t.deltaY?-1:1)},scale:function(t){var e=this.candleWidth+2*t;this.candleWidth=Math.max(2,e)}},beforeMount:function(){window.addEventListener("mousemove",this.resetCrossCurveInfo)},mounted:function(){this.getSize()},beforeDestroy:function(){window.removeEventListener("mousemove",this.resetCrossCurveInfo)}};return Te=void 0,Fe=!(Ye={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"wrap",staticClass:"kline-wrap",class:{"full-screen":e.isFullScreen}},[n("tool-bar",{ref:"toolbar",on:{period:function(t){e.period=t},candleType:function(t){e.type=t},indicators:function(t){e.indicators=t},isFullScreen:function(t){e.isFullScreen=t}}}),e._v(" "),n("svg",{ref:"kline",staticClass:"kline",attrs:{width:e.size&&e.size.width,height:e.size&&e.size.height,viewBox:e.viewBox}},[e.size?[n("defs",[n("clipPath",{attrs:{id:"chart-content-clip"}},[n("rect",{attrs:{x:"0",y:"0",width:e.$num(e.size.width).minus(e.axis.y.width),height:e.$num(e.size.height)}})])]),e._v(" "),n("candles",{attrs:{data:e.data,candleWidth:e.cCandleWidth,size:e.candlesSize,candleInterval:e.candleInterval,type:e.type,svgWidth:e.size.width,showHLine:!0,fontSize:e.fontSize,deltaX:e.deltaX},on:{showCandles:e.setShowData,yWidth:e.setYAxisWidth}}),e._v(" "),e.showVolumes?n("volumes",{attrs:{data:e.showData.data,origins:e.showData.origins,y:e.candlesSize.height,size:{width:e.candlesSize.width,height:e.volumeHeight},candleWidth:e.cCandleWidth,candleInterval:e.candleInterval,svgWidth:e.size.width,showHLine:!1,fontSize:e.fontSize},on:{showVolumes:function(t){e.setHeightRate(t,"volume")},yWidth:e.setYAxisWidth}}):e._e(),e._v(" "),n("x-axis",{attrs:{data:e.showData.data,origins:e.showData.origins,sliceLength:e.sliceLength,candleWidth:e.cCandleWidth,candleInterval:e.candleInterval,y:+e.$num(e.size.height).minus(e.axis.x.height),width:e.candlesSize.width,time:e.time,fontSize:e.fontSize},on:{xHeight:e.setXAxisHeight}}),e._v(" "),e.axis.x.height&&e.crossCurveInfo?n("cross-curve",{attrs:{origin:e.crossCurveInfo.origin,time:e.crossCurveInfo.time,value:e.crossCurveInfo.value,fontSize:e.fontSize,textSize:{width:e.markerWidth,height:+e.$num(e.axis.x.height).minus(4)},size:{width:e.chartWidth,height:e.chartHeight}}}):e._e(),e._v(" "),n("rect",{staticClass:"cursor",attrs:{x:"0",y:"0",width:e.$num(e.size.width).minus(e.axis.y.width),height:e.$num(e.size.height).minus(e.axis.x.height)},on:{mousedown:e.startDrag,mousemove:function(t){return t.stopPropagation(),e.drag(t)},mouseup:e.endDrag,wheel:e.mouseScale}})]:e._e()],2),e._v(" "),e.loading?n("div",{staticClass:"loading-wrap"},[n("loading",{attrs:{width:64,height:64}})],1):e._e()],1)},staticRenderFns:[]}),(He=("function"==typeof(We=Ne)?We.options:We)||{}).__file="Index.vue",He.render||(He.render=Ye.render,He.staticRenderFns=Ye.staticRenderFns,He._compiled=!0,Fe&&(He.functional=!0)),He._scopeId=Te,He});
