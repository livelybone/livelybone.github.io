!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Kline=e()}(this,function(){"use strict";function d(){var t=Array.prototype.filter.call(document.getElementsByTagName("meta"),function(t){return"viewport"===t.getAttribute("name")});if(t.length<1)return 1;var e=(t=t[t.length-1]).getAttribute("content").match(/initial-scale\s*=\s*([^,]+)(,|$)/);return(e?+e[1]:1)||1}function r(){return Math.random().toFixed(6)}function o(t,e){var n=this;n.observer=t,n.id=e,n.unsubscribe=function(t){var e=Object.keys(n.observer.subscribes).find(function(t){return n.observer.subscribes[t].id===n.id});n.observer.subscribes.splice(e,1),"function"==typeof t&&t(),console.log("simple-observer: Subscription: Unsubscribe success!")}}var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),f=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},x=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)};function v(t,e){return Math.sqrt(Math.pow(t.pageX-e.pageX,2)+Math.pow(t.pageY-e.pageY,2))}function m(t,e){return Math.atan((t.pageY-e.pageY)/(t.pageX-e.pageX))/Math.PI*180}function g(e,n){function t(t){return n?(+e[t]+ +n[t])/2:+e[t]}return{clientX:t("clientX"),clientY:t("clientY"),pageX:t("pageX"),pageY:t("pageY"),screenX:t("screenX"),screenY:t("screenY")}}var p=function(t){if("function"!=typeof t)throw new Error("simple-observer: Observer: Params generator of constructor is invalid, must be a function");var a=this;a.subscribes=[],a.subscribe=function(t){for(var e=r(),n=0,i=function(t){return a.subscribes[t].id===e};n=Object.keys(a.subscribes).find(i),e=r(),void 0!==n;);return a.subscribes.push({id:e,callback:t}),new o(a,e)},t(function(){var e=arguments;a.subscribes.map(function(t){t.callback.apply(a,e)})})};function s(e,o){var n=null;window.TouchObservers||(window.TouchObservers=[]);var s=window.TouchObservers.find(function(t){return t.el===e});if(s&&s.Observer){if(!o)return s;s.unbind()}else{var t=new p(function(t){n=t});s?(s.Observer=t,s.next=n):(s={Observer:t,next:n,el:e},window.TouchObservers.push(s))}var c=null,u=null,h=0,l=0;function i(t){c=Array.prototype.map.call(t.targetTouches,function(t){return t}),u=0<c.length?g(c[0],c[1]):null,l=1<c.length?m(c[0],c[1]):0,h=1<c.length?v(c[0],c[1]):0;var e={type:t.type,touches:c,center:u,angle:l,distance:h,timeStamp:t.timeStamp,centerDelta:null,deltaAngle:0,pinchScale:1,event:t};"function"==typeof o?o(e):o&&t.preventDefault(),s.next(e)}function a(t){var e=c.map(function(e){return Array.prototype.find.call(t.changedTouches,function(t){return t.identifier===e.identifier})}).filter(function(t){return!!t}),n=0<e.length?g(e[0],e[1]):null,i=1<e.length?m(e[0],e[1]):0,a=1<e.length?v(e[0],e[1]):0,r={type:t.type,touches:e,center:n,angle:i,distance:a,timeStamp:t.timeStamp,centerDelta:function(t,e){var n=d();if(!t||!e)return{deltaX:0,deltaY:0,deltaDistance:0,direction:"",windowScale:n};var i=t.pageX-e.pageX,a=t.pageY-e.pageY,r=Math.sqrt(Math.pow(i,2)+Math.pow(a,2)),o=Math.abs(i)<=30/n?"":0<i?"right":"left",s=Math.abs(a)<=30/n?"":0<a?"bottom":"top";return{deltaX:i,deltaY:a,deltaDistance:r,direction:o+(o&&s?"-":"")+s,windowScale:n}}(n,u),deltaAngle:i-l,pinchScale:a/h||1,event:t};"function"==typeof o?o(r):o&&t.preventDefault(),s.next(r)}function r(){e.removeEventListener("touchstart",i),e.removeEventListener("touchmove",a),e.removeEventListener("touchend",a)}return e.addEventListener("touchstart",i),e.addEventListener("touchmove",a),e.addEventListener("touchend",a),s.unbind=r,s.destroy=function(){r(),s.Observer=null},s}function t(i){return function(t,e,n){return"function"==typeof t&&(n=e||null,e=t,t=window),i(t,e,n)}}function c(t){return t[0].toUpperCase()+t.slice(1)}var u=Object.assign||function(){return Array.prototype.map.call(arguments,function(t){return"object"===(void 0===t?"undefined":y(t))?t:{}}).reduce(function(e,n){return Object.keys(n).forEach(function(t){e[t]=n[t]}),e},{})};var i=t(function(t,e,n){var i=s(t,n);return{unsubscribe:i.Observer.subscribe(function(t){1===t.touches.length&&e(u(t,{type:"pan"+c(t.type.replace("touch",""))}))}).unsubscribe,touchObserver:i}});var a=t(function(t,e,n){var i=s(t,n),a=0;return{unsubscribe:i.Observer.subscribe(function(t){if("touchend"===t.type&&0===a)return e(u(t,{type:"pinchEnd"})),void a++;2<=t.touches.length&&(e(u(t,{type:"pinch"+c(t.type.replace("touch",""))})),a=0)}).unsubscribe,touchObserver:i}});var l=t(function(t,e,n){var i=s(t,n),a=0;return{unsubscribe:i.Observer.subscribe(function(t){if(1===t.touches.length)if("touchstart"===t.type)a=t.timeStamp;else if("touchend"===t.type){if(250<t.timeStamp-a)return;if(t.centerDelta.deltaDistance>10/t.centerDelta.windowScale)return;e(u(t,{type:"tap"}))}}).unsubscribe,touchObserver:i}}),R=function(){function s(){e(this,s)}return n(s,null,[{key:"toExponential",value:function(t){var e=0,n=t<0?-1:1,i=Math.abs(t);if(0===i)return{value:0,exponential:0};if(i===1/0)return{value:1/0,exponential:1/0};if(i<1){for(;i<1;)e-=1,i*=10;i=Math.abs(t)/Math.pow(10,e)}else for(;10<i;)e+=1,i/=10;return{value:i*n,exponential:e}}},{key:"toIntWithExponential",value:function(t){var e=t.toString().split(".");return{value:+e.join(""),exponential:e[0].length-1-(e[1]?e[1].length:0)}}},{key:"cPrice",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return 0===e?+(+t-5*Math.pow(10,-s.pPrecision-1)).toFixed(s.pPrecision):2===e?+(+t+5*Math.pow(10,-s.pPrecision-1)).toFixed(s.pPrecision):+(+t).toFixed(s.pPrecision)}},{key:"cVolume",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return 0===e?+(+t-5*Math.pow(10,-s.volPrecision-1)).toFixed(s.volPrecision):2===e?+(+t+5*Math.pow(10,-s.volPrecision-1)).toFixed(s.volPrecision):+(+t).toFixed(s.volPrecision)}},{key:"cVal",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return 0===n?+(+t-5*Math.pow(10,-e)).toFixed(e):2===n?+(+t+5*Math.pow(10,-e)).toFixed(e):+(+t).toFixed(e)}},{key:"toFixed",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,i=void 0,a=void 0,r=0;if(0<=e)i=e,a=t;else{var o=s.toExponential(t);a=o.value,r=o.exponential,i=Math.max(0,r+e)}return(0===n?(+a-5*Math.pow(10,-i-1)).toFixed(i):2===n?(+a+5*Math.pow(10,-i-1)).toFixed(i):(+a).toFixed(i))*Math.pow(10,r)}},{key:"getPrecision",value:function(t){var e=t.toString(),n=e.match(/(-?[\d.]*)e(-?\d*)/)||[],i=(n[1]||e).split("."),a=_(i,2)[1],r=void 0===a?"":a;return(-n[2]||0)+r.length}}]),s}();function b(a,r){return(2<arguments.length&&void 0!==arguments[2]?arguments[2]:[5,10,30,60]).reduce(function(t,e){var i=Math.max(0,a-e+1),n=a-i+1;return t[e]=[].concat(x(Array(n))).reduce(function(t,e,n){return t+r[i+n][4]},0)/n,t},{})}function M(t){var a=t.index,e=t.dataArr,r=void 0===e?[]:e,n=t.currVal,o=void 0===n?void 0:n,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return(2<arguments.length&&void 0!==arguments[2]?arguments[2]:[12,26]).reduce(function(t,e){var n=void 0!==o?o:r[a][4];if(0==+a)t[e]=n;else{var i=2/(e+1);t[e]=i*n+(1-i)*(s[e]||n)}return t},{})}function D(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:7,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:2,a=b(t,e,[n])[n],r=function(t,i,a){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:5,r=Math.max(0,t-e+1),n=t-r+1;return Math.sqrt([].concat(x(Array(n))).reduce(function(t,e,n){return t+Math.pow(i[r+n][4]-a,2)},0)/n)}(t,e,a,n);return{MA:a,UP:a+i*r,DOWN:a-i*r}}R.pPrecision=0,R.volPrecision=0;Object.freeze([Date.now(),1,1,1,1,1,1]);var I=Object.freeze([{name:"candles",value:"normal"},{name:"heikin-ashi",value:"average"}]),w=Object.freeze([{name:"time",value:6e4},{name:"1min",value:6e4},{name:"5min",value:3e5},{name:"15min",value:9e5},{name:"30min",value:18e5},{name:"1hour",value:36e5},{name:"4hour",value:144e5},{name:"1day",value:864e5},{name:"5day",value:432e6},{name:"1week",value:6048e5}]),S=Object.freeze({base:[{name:"MA",value:"MA",method:function(t,e){return b(t,e,[5,10,30,60])},showFormatter:R.cPrice},{name:"EMA",value:"EMA",method:function(t,e,n){return M({index:t,dataArr:e},n,[12,26])},showFormatter:R.cPrice},{name:"BOLL",value:"BOLL",params:"n = 7, k = 2",method:function(t,e){return D(t,e,7,2)},showFormatter:R.cPrice}].map(function(t){return h({},t,{type:"base"})}),technical:[{name:"MACD",value:"MACD",params:"short = 12, long = 26, nDEA = 9",method:function(t,e,n){return function(t,e){var n,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:12,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:26,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:9,s=M({index:t,dataArr:e},(f(n={},a,i.EMAShort),f(n,r,i.EMALong),n),[a,r]),c=s[a],u=s[r],h=c-u,l=M({index:t,currVal:h},f({},o,i.DEA),[o])[o];return{EMAShort:c,EMALong:u,DIF:h,DEA:l,MACD:2*(h-l)}}(t,e,n,12,26,9)},bar:["MACD"],ignore:["EMAShort","EMALong"],order:["MACD","DIF","DEA"],showFormatter:R.cPrice},{name:"KDJ",value:"KDJ",params:"n = 9",method:function(t,e,n){return function(t,r,e){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:9,i=h({K:50,D:50,J:50},e),o=Math.max(0,t-n+1),s={high:0,low:1/0};if([].concat(x(Array(t-o+1))).forEach(function(t,e){var n=_(r[o+e],4),i=n[2],a=n[3];s.high=Math.max(s.high,i),s.low=Math.min(s.low,a)}),s.high-s.low==0)return i;var a=(r[t][4]-s.low)/(s.high-s.low)*100,c=2/3*i.K+1/3*a,u=2/3*i.D+1/3*c;return{K:c,D:u,J:3*c-2*u}}(t,e,n,9)},showFormatter:R.cVal},{name:"RSI",value:"RSI",method:function(t,e,n){return function(n,s){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return(3<arguments.length&&void 0!==arguments[3]?arguments[3]:[5,10,14]).reduce(function(t,e){var r=Math.max(0,n-e+1),o={positive:0,negative:0};return[].concat(x(Array(n-r+1))).forEach(function(t,e){var n=s[r+e-1]||s[r+e],i=_(n,5)[4],a=_(s[r+e],5)[4]-i||0;0<=a?o.positive+=a:o.negative+=-a}),o.positive+o.negative===0?t[e]=i[e]||50:t[e]=o.positive/(o.positive+o.negative)*100,t},{})}(t,e,n,[5,10,14])},showFormatter:R.cVal},{name:"WR",value:"WR",method:function(t,e,n){return function(n,s){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return(3<arguments.length&&void 0!==arguments[3]?arguments[3]:[6,10]).reduce(function(t,e){var r=Math.max(0,n-e+1),o={high:0,low:1/0};return[].concat(x(Array(n-r+1))).forEach(function(t,e){var n=_(s[r+e],4),i=n[2],a=n[3];o.high=Math.max(o.high,i),o.low=Math.min(o.low,a)}),o.high-o.low==0?t[e]=i[e]||50:t[e]=(o.high-s[n][4])/(o.high-o.low)*100,t},{})}(t,e,n,[6,10])},showFormatter:R.cVal}].map(function(t){return h({},t,{type:"technical"})})}),C=d(),O=75/C,z={price:50/C,volume:20/C,indicator:20/C},A=Object.freeze([{name:"Jan",value:1},{name:"Feb",value:2},{name:"Mar",value:3},{name:"Apr",value:4},{name:"May",value:5},{name:"Jun",value:6},{name:"Jul",value:7},{name:"Aug",value:8},{name:"Sep",value:9},{name:"Oct",value:10},{name:"Nov",value:11},{name:"Dec",value:12}]),P=(Object.freeze({down:0,halfUp:1,halfDown:2,up:3}),Object.freeze({unit:Math.round(1/C),candleWidth:Math.round(6/C),candleMinWidth:Math.round(1/C),candleMaxWidth:20*Math.round(1/C),textDelta:Math.round(8/C),markerLineLength:Math.round(4/C),markerWidth:Math.round(100/C),yMarkerHeight:Math.round(20/C),xMarkerHeight:Math.round(24/C),xHeightDelta:Math.round(8/C),defaultFontSize:Math.round(10/C),candleChartPaddingRight:Math.round(10/C),candleChartPaddingTop:Math.round(40/C),candleChartPaddingBottom:Math.round(40/C),indicatorChartHeight:Math.round(100/C),indicatorChartPaddingTop:Math.round(8/C),indicatorChartPaddingBottom:Math.round(8/C),volumeChartHeight:Math.round(100/C),volumeChartHeightTop:Math.round(8/C),volumeChartHeightBottom:Math.round(8/C),loadingSize:Math.round(64/C),legendTextMargin:Math.round(2/C)})),k=1e3/(window.ActiveXObject||"ActiveXObject"in window?50:60);Object.freeze([{value:12e4,bold:18e5,name:"2min"},{value:18e4,bold:18e5,name:"3min"},{value:24e4,bold:18e5,name:"4min"},{value:3e5,bold:18e5,name:"5min"},{value:6e5,bold:18e5,name:"10min"},{value:9e5,bold:36e5,name:"15min"},{value:18e5,bold:36e5,name:"30min"},{value:36e5,bold:864e5,name:"60min"},{value:54e5,mod:36e5,bold:864e5,name:"1.5hour"},{value:108e5,mod:36e5,bold:864e5,name:"3hour"},{value:216e5,mod:144e5,bold:864e5,name:"6hour"},{value:432e5,mod:144e5,bold:864e5,name:"12hour"},{value:864e5,mod:576e5,bold:"month",name:"1d"},{value:1728e5,mod:144e6,bold:"month",name:"2d"},{value:2592e5,mod:2304e5,bold:"month",name:"3d"},{value:3456e5,mod:3168e5,bold:"month",name:"4d"},{value:432e6,mod:4032e5,bold:"month",name:"5d"},{value:5184e5,mod:4896e5,bold:"month",name:"6d"},{value:6048e5,mod:576e6,bold:"month",name:"7d"},{value:6912e5,mod:6624e5,bold:"month",name:"8d"},{value:7776e5,mod:7488e5,bold:"month",name:"9d"},{value:864e6,mod:8352e5,bold:"month",name:"10d"},{value:1296e6,bold:"month",alias:"15d"},{value:2592e6,bold:"year",alias:"1mon"},{value:5184e6,bold:"year",alias:"2mon"},{value:7776e6,bold:"year",alias:"3mon"},{value:10368e6,bold:"year",alias:"4mon"}]);function T(t){return t.getBoundingClientRect()}var F=T,W=function(t){for(var e={clientLeft:0,clientTop:0};t;){var n=T(t);e.clientLeft+=n.left,e.clientTop+=n.top,t=t.offsetParent}return e};function Y(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(e)return 0<=e?"up":"down";var n=_(t,5),i=n[1];return 0<=n[4]-i?"up":"down"}function H(){var t=+window.orientation;return 90!==t&&-90!==t}function X(t,e){for(var n=arguments.length,i=Array(2<n?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];return"function"==typeof t.showFormatter?t.showFormatter.apply(t,[e].concat(i)):e}function E(n,i){return Object.keys(i).reduce(function(t,e){return t[e]=X(n,i[e]),t},{})}var L={name:"YAxis",props:{origin:Object,height:Number,heightRate:Number,range:Object,fontSize:Number,type:String},data:function(){return{textDelta:P.textDelta,markerLineLength:P.markerLineLength}},computed:{cOrigin:function(){var t=this.origin||{},e=t.x,n=void 0===e?0:e,i=t.y,a=void 0===i?0:i;return{x:Math.round(n),y:Math.round(a)}},cHeight:function(){return Math.round(this.height)},isVolume:function(){return"volume"===this.type},factor:function(){return Math.pow(10,this.range.power||0)},unitHeight:function(){return this.range&&this.heightRate?this.heightRate*this.factor:0},rangeOfTwo:function(){if(!this.unitHeight)return null;var t={max:Math.ceil(2*z[this.type]/this.unitHeight),min:Math.floor(z[this.type]/this.unitHeight)};return 1e3<t.max-t.min?null:t},halfFontSize:function(){return this.fontSize/this.unitHeight},maxV:function(){if(this.range.max*this.range.min<0){var t=[Math.abs(this.range.max),Math.abs(this.range.min)].sort(),e=_(t,2),n=e[0];if(e[1]/n<5)return n/this.factor-this.halfFontSize}return this.isVolume&&this.range.min<0?1/0:null},rule:function(){var e=this;if(!this.rangeOfTwo)return null;var t=this.rangeOfTwo,n=t.max,a=t.min;if(n<=a)return null;var i=[].concat(x(Array(n-a))).reduce(function(t,e,n){var i=a+n;return!i||i%2!=0&&i%5!=0?t:t.concat([{value:i}])},[]);if(this.maxV){var r=i.filter(function(t){return t.value<e.maxV});return r[r.length-1]||i[0]||{value:1}}return i[i.length-1]||{value:1}},zero:function(){var t=this.range,e=t.max,n=t.min,i=t.power;return this.calcCoord((0).toFixed(Math.abs(i)),Math.round(e/this.factor),this.isVolume?Math.round(this.cOrigin.y+this.height+n*this.heightRate):0)},coords:function(){var o=this;if(!this.origin||!this.rule||!this.range||Object.keys(this.range).length<1)return[];var t=this.range,e=t.max,s=void 0===e?1:e,n=t.min,i=void 0===n?0:n,a=t.power,c=void 0===a?0:a,u=t.precision;return[].concat(x(Array(Math.ceil((s-i)/this.factor)))).reduce(function(t,e,n){if(Math.ceil(s/o.factor-n)%o.rule.value==0){var i=s-o.factor*n;if(o.maxV&&Math.abs(i/o.factor)<o.rule.value/2)return t;var a=o.calcCoord(0<-c?i.toFixed(u):R.toFixed(i,-c),n),r=a.textOrigin.y-o.fontSize;if(o.cOrigin.y<=r&&a.textOrigin.y<=o.cOrigin.y+o.height)return t.concat(a)}return t},this.maxV?[this.zero]:[])}},watch:{coords:{handler:function(){this.emitWidth()},immediate:!0},origin:{handler:function(){this.emitWidth()},immediate:!0}},methods:{emitWidth:function(){var n=this;0<this.coords.length&&this.origin&&this.$nextTick(function(){var t=n.$refs.yAxis[0]||n.$refs.yAxis;if(t){var e=F(t);n.$emit("yWidth",Math.floor(e.width+P.textDelta))}})},calcCoord:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i={x:+this.cOrigin.x,y:n||Math.floor(e*this.unitHeight+this.cOrigin.y)};return{text:t,origin:i,textOrigin:{x:Math.round(i.x+this.textDelta),y:Math.round(i.y+this.fontSize/2-P.unit)}}}}};var $,N,j,V,B,J=(j=void 0,V=!($={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.origin&&e.range?n("g",{staticClass:"y-axis"},[n("rect",{staticClass:"axis-line y",attrs:{x:e.cOrigin.x,y:e.cOrigin.y,width:"1",height:e.cHeight}}),e._v(" "),n("g",{ref:"yAxis",staticClass:"axis-coords y"},e._l(e.coords,function(t){return n("g",{key:t.text,staticClass:"axis-coord y"},[n("rect",{staticClass:"axis-coord-marker y",attrs:{x:t.origin.x,y:t.origin.y,width:e.markerLineLength,height:"1"}}),e._v(" "),n("text",{staticClass:"axis-coord-text y",attrs:{x:t.textOrigin.x,y:t.textOrigin.y,"font-size":e.fontSize}},[e._v("\n        "+e._s(t.text)+"\n      ")])])})),e._v(" "),n("g",{staticClass:"axis-reflines y"},e._l(e.coords,function(t){return n("rect",{key:t.text,staticClass:"axis-refline y",attrs:{x:0,y:t.origin.y,width:e.cOrigin.x,height:"1"}})}))]):e._e()},staticRenderFns:[]}),(B=("function"==typeof(N=L)?N.options:N)||{}).__file="YAxis.vue",B.render||(B.render=$.render,B.staticRenderFns=$.staticRenderFns,B._compiled=!0,V&&(B.functional=!0)),B._scopeId=j,B),K={name:"Candles",components:{YAxis:J},props:{paths:{type:Object,default:function(){return{}}},indicator:Object,range:Object,heightRate:Number,showHLine:Boolean,svgWidth:Number,size:Object,fontSize:Number},data:function(){return{CandleTypes:I,indicatorLines:""}},computed:{yAxisOrigin:function(){return{x:this.size.width,y:0}},rectY:function(){return this.size.height-1}},methods:{}};var U,G,Z,q,Q,tt=(Z=void 0,q=!(U={render:function(){var n=this,t=n.$createElement,i=n._self._c||t;return i("g",{staticClass:"candles"},[i("y-axis",{attrs:{origin:n.yAxisOrigin,height:n.size.height,heightRate:n.heightRate,range:n.range,fontSize:n.fontSize,type:"price"},on:{yWidth:function(t){n.$emit("yWidth",t)}}}),n._v(" "),n.paths.paths?i("g",{attrs:{"clip-path":"url(#chart-content-clip)"}},n._l(n.paths.paths,function(t,e){return i("path",{key:e,staticClass:"candle",class:e,attrs:{d:t}})})):n._e(),n._v(" "),n.paths.ind?i("g",{attrs:{"clip-path":"url(#chart-content-clip)"}},n._l(n.paths.ind,function(t,e){return i("path",{key:e,staticClass:"indicator-line",class:n.indicator.value+"-"+e,attrs:{d:t}})})):n._e(),n._v(" "),n.showHLine?i("rect",{staticClass:"h-line",attrs:{x:0,y:n.rectY,width:n.svgWidth,height:"1"}}):n._e()],1)},staticRenderFns:[]}),(Q=("function"==typeof(G=K)?G.options:G)||{}).__file="Candles.vue",Q.render||(Q.render=U.render,Q.staticRenderFns=U.staticRenderFns,Q._compiled=!0,q&&(Q.functional=!0)),Q._scopeId=Z,Q);var et=function(t){return t instanceof Date},nt=36e5,it=6e4,at=/[T ]/,rt=/:/,ot=/^(\d{2})$/,st=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],ct=/^(\d{4})/,ut=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],ht=/^-(\d{2})$/,lt=/^-?(\d{3})$/,dt=/^-?(\d{2})-?(\d{2})$/,ft=/^-?W(\d{2})$/,vt=/^-?W(\d{2})-?(\d{1})$/,mt=/^(\d{2}([.,]\d*)?)$/,gt=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,pt=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,yt=/([Z+-].*)$/,xt=/^(Z)$/,bt=/^([+-])(\d{2})$/,Mt=/^([+-])(\d{2}):?(\d{2})$/;function Dt(t,e,n){e=e||0,n=n||0;var i=new Date(0);i.setUTCFullYear(t,0,4);var a=7*e+n+1-(i.getUTCDay()||7);return i.setUTCDate(i.getUTCDate()+a),i}var It=function(t,e){if(et(t))return new Date(t.getTime());if("string"!=typeof t)return new Date(t);var n=(e||{}).additionalDigits;n=null==n?2:Number(n);var i=function(t){var e,n={},i=t.split(at);if(e=rt.test(i[0])?(n.date=null,i[0]):(n.date=i[0],i[1])){var a=yt.exec(e);a?(n.time=e.replace(a[1],""),n.timezone=a[1]):n.time=e}return n}(t),a=function(t,e){var n,i=st[e],a=ut[e];if(n=ct.exec(t)||a.exec(t)){var r=n[1];return{year:parseInt(r,10),restDateString:t.slice(r.length)}}if(n=ot.exec(t)||i.exec(t)){var o=n[1];return{year:100*parseInt(o,10),restDateString:t.slice(o.length)}}return{year:null}}(i.date,n),r=a.year,o=function(t,e){if(null===e)return null;var n,i,a,r;if(0===t.length)return(i=new Date(0)).setUTCFullYear(e),i;if(n=ht.exec(t))return i=new Date(0),a=parseInt(n[1],10)-1,i.setUTCFullYear(e,a),i;if(n=lt.exec(t)){i=new Date(0);var o=parseInt(n[1],10);return i.setUTCFullYear(e,0,o),i}if(n=dt.exec(t)){i=new Date(0),a=parseInt(n[1],10)-1;var s=parseInt(n[2],10);return i.setUTCFullYear(e,a,s),i}if(n=ft.exec(t))return r=parseInt(n[1],10)-1,Dt(e,r);if(n=vt.exec(t)){r=parseInt(n[1],10)-1;var c=parseInt(n[2],10)-1;return Dt(e,r,c)}return null}(a.restDateString,r);if(o){var s,c=o.getTime(),u=0;return i.time&&(u=function(t){var e,n,i;if(e=mt.exec(t))return(n=parseFloat(e[1].replace(",",".")))%24*nt;if(e=gt.exec(t))return n=parseInt(e[1],10),i=parseFloat(e[2].replace(",",".")),n%24*nt+i*it;if(e=pt.exec(t)){n=parseInt(e[1],10),i=parseInt(e[2],10);var a=parseFloat(e[3].replace(",","."));return n%24*nt+i*it+1e3*a}return null}(i.time)),s=i.timezone?(h=i.timezone,(l=xt.exec(h))?0:(l=bt.exec(h))?(d=60*parseInt(l[2],10),"+"===l[1]?-d:d):(l=Mt.exec(h))?(d=60*parseInt(l[2],10)+parseInt(l[3],10),"+"===l[1]?-d:d):0):(s=new Date(c+u).getTimezoneOffset(),new Date(c+u+s*it).getTimezoneOffset()),new Date(c+u+s*it)}var h,l,d;return new Date(t)};var wt=function(t){var e=It(t),n=new Date(0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n};var St=function(t){var e=It(t);return e.setHours(0,0,0,0),e};var Ct=function(t,e){var n=St(t),i=St(e),a=n.getTime()-6e4*n.getTimezoneOffset(),r=i.getTime()-6e4*i.getTimezoneOffset();return Math.round((a-r)/864e5)};var _t=function(t){var e=It(t);return Ct(e,wt(e))+1};var Rt=function(t,e){var n=e&&Number(e.weekStartsOn)||0,i=It(t),a=i.getDay(),r=(a<n?7:0)+a-n;return i.setDate(i.getDate()-r),i.setHours(0,0,0,0),i};var Ot=function(t){return Rt(t,{weekStartsOn:1})};var zt=function(t){var e=It(t),n=e.getFullYear(),i=new Date(0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);var a=Ot(i),r=new Date(0);r.setFullYear(n,0,4),r.setHours(0,0,0,0);var o=Ot(r);return e.getTime()>=a.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1};var At=function(t){var e=zt(t),n=new Date(0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Ot(n)};var Pt=function(t){var e=It(t),n=Ot(e).getTime()-At(e).getTime();return Math.round(n/6048e5)+1};var kt=function(t){if(et(t))return!isNaN(t);throw new TypeError(toString.call(t)+" is not an instance of Date")};var Tt=["M","MM","Q","D","DD","DDD","DDDD","d","E","W","WW","YY","YYYY","GG","GGGG","H","HH","h","hh","m","mm","s","ss","S","SS","SSS","Z","ZZ","X","x"];var Ft=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);var i=Tt.concat(e).sort().reverse();return new RegExp("(\\[[^\\[]*\\])|(\\\\)?("+i.join("|")+"|.)","g")};var Wt=function(){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=["January","February","March","April","May","June","July","August","September","October","November","December"],i=["Su","Mo","Tu","We","Th","Fr","Sa"],a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=["AM","PM"],s=["am","pm"],c=["a.m.","p.m."],t={MMM:function(t){return e[t.getMonth()]},MMMM:function(t){return n[t.getMonth()]},dd:function(t){return i[t.getDay()]},ddd:function(t){return a[t.getDay()]},dddd:function(t){return r[t.getDay()]},A:function(t){return 1<=t.getHours()/12?o[1]:o[0]},a:function(t){return 1<=t.getHours()/12?s[1]:s[0]},aa:function(t){return 1<=t.getHours()/12?c[1]:c[0]}};return["M","D","DDD","d","Q","W"].forEach(function(n){t[n+"o"]=function(t,e){return function(t){var e=t%100;if(20<e||e<10)switch(e%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"}(e[n](t))}}),{formatters:t,formattingTokensRegExp:Ft(t)}},Yt={distanceInWords:function(){var a={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};return{localize:function(t,e,n){var i;return n=n||{},i="string"==typeof a[t]?a[t]:1===e?a[t].one:a[t].other.replace("{{count}}",e),n.addSuffix?0<n.comparison?"in "+i:i+" ago":i}}}(),format:Wt()};var Ht={M:function(t){return t.getMonth()+1},MM:function(t){return Et(t.getMonth()+1,2)},Q:function(t){return Math.ceil((t.getMonth()+1)/3)},D:function(t){return t.getDate()},DD:function(t){return Et(t.getDate(),2)},DDD:function(t){return _t(t)},DDDD:function(t){return Et(_t(t),3)},d:function(t){return t.getDay()},E:function(t){return t.getDay()||7},W:function(t){return Pt(t)},WW:function(t){return Et(Pt(t),2)},YY:function(t){return Et(t.getFullYear(),4).substr(2)},YYYY:function(t){return Et(t.getFullYear(),4)},GG:function(t){return String(zt(t)).substr(2)},GGGG:function(t){return zt(t)},H:function(t){return t.getHours()},HH:function(t){return Et(t.getHours(),2)},h:function(t){var e=t.getHours();return 0===e?12:12<e?e%12:e},hh:function(t){return Et(Ht.h(t),2)},m:function(t){return t.getMinutes()},mm:function(t){return Et(t.getMinutes(),2)},s:function(t){return t.getSeconds()},ss:function(t){return Et(t.getSeconds(),2)},S:function(t){return Math.floor(t.getMilliseconds()/100)},SS:function(t){return Et(Math.floor(t.getMilliseconds()/10),2)},SSS:function(t){return Et(t.getMilliseconds(),3)},Z:function(t){return Xt(t.getTimezoneOffset(),":")},ZZ:function(t){return Xt(t.getTimezoneOffset())},X:function(t){return Math.floor(t.getTime()/1e3)},x:function(t){return t.getTime()}};function Xt(t,e){e=e||"";var n=0<t?"-":"+",i=Math.abs(t),a=i%60;return n+Et(Math.floor(i/60),2)+e+Et(a,2)}function Et(t,e){for(var n=Math.abs(t).toString();n.length<e;)n="0"+n;return n}var Lt=function(t,e,n){var i=e?String(e):"YYYY-MM-DDTHH:mm:ss.SSSZ",a=(n||{}).locale,r=Yt.format.formatters,o=Yt.format.formattingTokensRegExp;a&&a.format&&a.format.formatters&&(r=a.format.formatters,a.format.formattingTokensRegExp&&(o=a.format.formattingTokensRegExp));var s=It(t);return kt(s)?function(t,e,n){var i,a,r,o=t.match(n),s=o.length;for(i=0;i<s;i++)a=e[o[i]]||Ht[o[i]],o[i]=a||((r=o[i]).match(/\[[\s\S]/)?r.replace(/^\[|]$/g,""):r.replace(/\\/g,""));return function(t){for(var e="",n=0;n<s;n++)o[n]instanceof Function?e+=o[n](t,Ht):e+=o[n];return e}}(i,r,o)(s):"Invalid Date"},$t={name:"CrossCurve",props:{origin:Object,textSize:{type:Object,default:function(){return{width:P.markerWidth,height:P.xMarkerHeight}}},chartSize:Object,fontSize:Number,time:Number,value:Number},data:function(){return{valueHeight:P.yMarkerHeight,textDelta:P.textDelta}},computed:{cOrigin:function(){var t=this.origin||{},e=t.x,n=void 0===e?0:e,i=t.y,a=void 0===i?0:i;return{x:Math.floor(n),y:Math.floor(a)}},lineOrigin:function(){return{x:this.cOrigin.x+.5,y:this.cOrigin.y+.5}},timeX:function(){return this.c(this.cOrigin.x,this.textSize.width)},timeTextY:function(){return Math.round(this.chartSize.height+this.fontSize+this.textDelta)},valueX:function(){return this.c(this.cOrigin.y,this.valueHeight)},valueText:function(){return{x:Math.round(this.chartSize.width+this.textDelta),y:Math.round(this.cOrigin.y+this.fontSize/2-P.unit)}}},methods:{format:Lt,c:function(t,e){return Math.floor(t-e/2)}}};var Nt,jt,Vt,Bt,Jt,Kt=(Vt=void 0,Bt=!(Nt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.chartSize&&t.origin?n("g",{staticClass:"cross-curve"},[n("line",{staticClass:"cross-h",attrs:{x1:"0",y1:t.lineOrigin.y,x2:t.chartSize.width,y2:t.lineOrigin.y}}),t._v(" "),n("line",{staticClass:"cross-v",attrs:{x1:t.lineOrigin.x,y1:0,x2:t.lineOrigin.x,y2:t.chartSize.height}}),t._v(" "),n("g",{staticClass:"cross-time"},[n("rect",{staticClass:"cross-time-bg",attrs:{x:t.timeX,y:t.chartSize.height,width:t.textSize.width,height:t.textSize.height}}),t._v(" "),n("text",{staticClass:"cross-time-text",attrs:{x:t.cOrigin.x,y:t.timeTextY,"font-size":t.fontSize,"text-anchor":"middle"}},[t._v(t._s(t.format(t.time,"YYYY-MM-DD HH:mm"))+"\n    ")])]),t._v(" "),n("g",{staticClass:"cross-value"},[n("rect",{staticClass:"cross-value-bg",attrs:{x:t.chartSize.width,y:t.valueX,width:t.textSize.width,height:t.valueHeight}}),t._v(" "),n("text",{staticClass:"cross-value-text",attrs:{x:t.valueText.x,y:t.valueText.y,"font-size":t.fontSize}},[t._v(t._s(t.value)+"\n    ")])])]):t._e()},staticRenderFns:[]}),(Jt=("function"==typeof(jt=$t)?jt.options:jt)||{}).__file="CrossCurve.vue",Jt.render||(Jt.render=Nt.render,Jt.staticRenderFns=Nt.staticRenderFns,Jt._compiled=!0,Bt&&(Jt.functional=!0)),Jt._scopeId=Vt,Jt),Ut={name:"CrossCurve",props:{y:Number,width:Number,textWidth:{type:Number,default:P.markerWidth},price:Number,isUp:Boolean,fontSize:Number},data:function(){return{valueHeight:P.yMarkerHeight,textDelta:P.textDelta}},computed:{cY:function(){return Math.floor(this.y)||0},lineY:function(){return this.cY+.5},rectY:function(){return this.c(this.cY,this.valueHeight)},priceText:function(){return{x:Math.round(this.width+this.textDelta),y:Math.round(this.cY+this.fontSize/2-P.unit)}}},watch:{},methods:{format:Lt,c:function(t,e){return Math.floor(t-e/2)}}};var Gt,Zt,qt,Qt,te,ee=(qt=void 0,Qt=!(Gt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{staticClass:"curr-price",class:t.isUp?"up":"down"},[n("line",{staticClass:"curr-price-line",class:t.red,attrs:{x1:"0",y1:t.lineY,x2:t.width,y2:t.lineY}}),t._v(" "),n("g",{staticClass:"curr-price-value"},[n("rect",{staticClass:"curr-price-value-bg",attrs:{x:t.width,y:t.rectY,width:t.textWidth,height:t.valueHeight}}),t._v(" "),n("text",{staticClass:"curr-price-value-text",attrs:{x:t.priceText.x,y:t.priceText.y,"font-size":t.fontSize}},[t._v(t._s(t.price)+"\n    ")])])])},staticRenderFns:[]}),(te=("function"==typeof(Zt=Ut)?Zt.options:Zt)||{}).__file="CurrPrice.vue",te.render||(te.render=Gt.render,te.staticRenderFns=Gt.staticRenderFns,te._compiled=!0,Qt&&(te.functional=!0)),te._scopeId=qt,te),ne={name:"Legends",inject:["lang","$tr"],props:{lastPrices:Array,nearestItem:Object,offset:Object,baseIndicator:Object,techIndicator:Object},computed:{priceItems:function(){return[{name:"open",alias:1},{name:"highest",alias:2},{name:"lowest",alias:3},{name:"close",alias:4}]},prices:function(){var t=[].concat(x(this.nearestItem&&this.nearestItem.prices||this.lastPrices||[]));return t.className=Y(t),t},baseInd:function(){return this.nearestItem&&this.nearestItem.baseInd&&E(this.baseIndicator,this.nearestItem&&this.nearestItem.baseInd)},techInd:function(){return this.nearestItem&&this.nearestItem.techInd&&E(this.baseIndicator,this.nearestItem&&this.nearestItem.techInd)},baseKeys:function(){return this.calcKeys(this.baseIndicator,this.baseInd)},techKeys:function(){return this.calcKeys(this.techIndicator,this.techInd)},wrapStyle:function(){return this.offset?{width:this.offset.width+"px"}:{}},volumeStyle:function(){return this.offset&&this.offset.children&&this.offset.children.volume?{top:this.offset.children.volume[0]+"px"}:{}},techStyle:function(){return this.offset&&this.offset.children&&this.offset.children.indicator?{top:this.offset.children.indicator[0]+"px"}:{}}},methods:{calcKeys:function(t,e){if(!t||!e)return[];var i=t.order,n=t.ignore,a=n?Object.keys(e).filter(function(e){return!n.some(function(t){return t===e})}):Object.keys(e);return i?a.sort(function(e,n){return Object.keys(i).find(function(t){return e===t})-Object.keys(i).find(function(t){return n===t})}):a},cTechKey:function(e){var t=this.techIndicator.bar;return t&&t.some(function(t){return e===t})?e+"-"+Y([],+this.nearestItem.techInd[e]):e}}};var ie,ae,re,oe,se,ce=(re=void 0,oe=!(ie={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"legends",style:e.wrapStyle},[n("div",{staticClass:"candle-legends"},[n("div",{staticClass:"prices"},e._l(e.priceItems,function(t){return n("div",{key:t.name,staticClass:"item"},[e._v(e._s(e.$tr(t.name))+":\n        "),n("span",{staticClass:"value",class:e.prices.className},[e._v("\n          "+e._s(e.prices[t.alias])+"\n        ")])])})),e._v(" "),e.baseInd?n("div",{staticClass:"base-indicator-legends"},[e.baseIndicator.params?[n("span",{staticClass:"name"},[e._v("\n          "+e._s(e.baseIndicator.value)+"("+e._s(e.baseIndicator.params)+")\n        ")]),e._v(" "),e._l(e.baseKeys,function(t){return n("div",{key:t,staticClass:"item"},[e._v(e._s(t)+":\n          "),n("span",{staticClass:"value",class:e.baseIndicator.value+"-"+t},[e._v("\n            "+e._s(e.baseInd[t])+"\n          ")])])})]:e._l(e.baseKeys,function(t){return n("div",{key:t,staticClass:"item"},[e._v(e._s(e.baseIndicator.value)+" "+e._s(t)+":\n          "),n("span",{staticClass:"value",class:e.baseIndicator.value+"-"+t},[e._v("\n            "+e._s(e.baseInd[t])+"\n          ")])])})],2):e._e()]),e._v(" "),n("div",{staticClass:"volume-legends",style:e.volumeStyle},[n("div",{staticClass:"item"},[e._v("Volume:\n      "),n("span",{staticClass:"value",class:e.prices.className},[e._v(e._s(e.prices[5]))])])]),e._v(" "),e.techIndicator?n("div",{staticClass:"tech-indicator-legends",style:e.techStyle},[e.techIndicator.params?[n("span",{staticClass:"name"},[e._v("\n        "+e._s(e.techIndicator.value)+"("+e._s(e.techIndicator.params)+")\n      ")]),e._v(" "),e.techInd?e._l(e.techKeys,function(t){return n("div",{key:t,staticClass:"item"},[e._v(e._s(t)+":\n          "),n("span",{staticClass:"value",class:e.techIndicator.value+"-"+e.cTechKey(t)},[e._v("\n          "+e._s(e.techInd[t])+"\n        ")])])}):e._e()]:e.techInd?e._l(e.techKeys,function(t){return n("div",{key:t,staticClass:"item"},[e._v(e._s(e.techIndicator.value)+" "+e._s(t)+":\n        "),n("span",{staticClass:"value",class:e.techIndicator.value+"-"+e.cTechKey(t)},[e._v("\n          "+e._s(e.techInd[t])+"\n        ")])])}):n("span",{staticClass:"name"},[e._v(e._s(e.techIndicator.value))])],2):e._e()])},staticRenderFns:[]}),(se=("function"==typeof(ae=ne)?ae.options:ae)||{}).__file="Legends.vue",se.render||(se.render=ie.render,se.staticRenderFns=ie.staticRenderFns,se._compiled=!0,oe&&(se.functional=!0)),se._scopeId=re,se),ue={name:"Loading",props:{width:Number,height:Number}};var he,le,de,fe,ve,me=(de=void 0,fe=!(he={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"loading",staticStyle:{"enable-background":"new 0 0 512 512"},attrs:{x:"0px",y:"0px",width:t.width,height:t.height,viewBox:"0 0 512 512","xml:space":"preserve"}},[n("circle",{staticClass:"loading-circle-1",attrs:{cx:"256",cy:"16",r:"16"}}),t._v(" "),n("circle",{staticClass:"loading-circle-2",attrs:{transform:"matrix(0.5 -0.866 0.866 0.5 146.2975 349.7025)",cx:"376",cy:"48.2",r:"16"}}),t._v(" "),n("circle",{staticClass:"loading-circle-3",attrs:{transform:"matrix(0.866 -0.5 0.5 0.866 -5.8564 250.1436)",cx:"463.8",cy:"136",r:"16"}}),t._v(" "),n("circle",{staticClass:"loading-circle-4",attrs:{cx:"496",cy:"256",r:"16"}}),t._v(" "),n("circle",{staticClass:"loading-circle-5",attrs:{transform:"matrix(0.5 -0.866 0.866 0.5 -93.7025 589.7025)",cx:"463.8",cy:"376",r:"16"}}),t._v(" "),n("circle",{staticClass:"loading-circle-6",attrs:{transform:"matrix(0.866 -0.5 0.5 0.866 -181.5486 250.1436)",cx:"376",cy:"463.8",r:"16"}}),t._v(" "),n("circle",{staticClass:"loading-circle-7",attrs:{cx:"256",cy:"496",r:"16"}}),t._v(" "),n("circle",{staticClass:"loading-circle-8",attrs:{transform:"matrix(0.5 -0.866 0.866 0.5 -333.7025 349.7025)",cx:"136",cy:"463.8",r:"16"}}),t._v(" "),n("circle",{staticClass:"loading-circle-9",attrs:{transform:"matrix(0.866 -0.5 0.5 0.866 -181.5486 74.4514)",cx:"48.2",cy:"376",r:"16"}}),t._v(" "),n("circle",{staticClass:"loading-circle-10",attrs:{cx:"16",cy:"256",r:"16"}}),t._v(" "),n("circle",{staticClass:"loading-circle-11",attrs:{transform:"matrix(0.5 -0.866 0.866 0.5 -93.7025 109.7025)",cx:"48.2",cy:"136",r:"16"}}),t._v(" "),n("circle",{staticClass:"loading-circle-12",attrs:{transform:"matrix(0.866 -0.5 0.5 0.866 -5.8564 74.4514)",cx:"136",cy:"48.2",r:"16"}})])},staticRenderFns:[]}),(ve=("function"==typeof(le=ue)?le.options:le)||{}).__file="Loading.vue",ve.render||(ve.render=he.render,ve.staticRenderFns=he.staticRenderFns,ve._compiled=!0,fe&&(ve.functional=!0)),ve._scopeId=de,ve),ge=function(){function v(){e(this,v)}return n(v,null,[{key:"updateOriginData",value:function(t,a){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"update";t.sort(function(t,e){return t[0]-e[0]});var r=!!v.currBaseIndicator,o=!!v.currTechIndicator;if("refresh"===e)v.originData=t,v.cData=[],v.initIndicators(),v.originData.forEach(function(t,e){if(v.cData[e]=v.cPrices(t,v.originData[e-1]||t),r){var n=v.currBaseIndicator.value;v.indicatorsData[n][e]=v.calcIndicator(v.currBaseIndicator,e,v.indicatorsData[n])}if(o){var i=v.currTechIndicator.value;v.indicatorsData[i][e]=v.calcIndicator(v.currTechIndicator,e,v.indicatorsData[i])}a&&a.apply(void 0,x(v.loopCbParam(e)))});else{for(var n=v.originData.length,i=t.length,s=[],c=n-i,u=0;u<i;u+=1){for(var h=!1,l=t[u],d=c;d<n;d+=1){var f=v.originData[d];if(l[0]===f[0]){s.push({originDataIndex:d,index:u}),v.originData[d]=l,h=!0;break}if(l[0]<f[0])break}h||(s.push({originDataIndex:v.originData.length,index:u}),v.originData.push(l))}s.forEach(function(t){var e=t.originDataIndex;if(v.cData[e]=v.cPrices(v.originData[e],v.originData[e-1]||v.originData[e]),r){var n=v.currBaseIndicator.value;v.indicatorsData[n][e]=v.calcIndicator(v.currBaseIndicator,e,v.indicatorsData[n])}if(o){var i=v.currTechIndicator.value;v.indicatorsData[i][e]=v.calcIndicator(v.currTechIndicator,e,v.indicatorsData[i])}a&&a.apply(void 0,x(v.loopCbParam(e)))})}v.originData=[].concat(x(v.originData))}},{key:"currIndicatorChange",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"base",i="curr"+("base"===n?"Base":"Tech")+"Indicator";t?v[i]&&v[i].value===t.value||(v[i]=t,v.indicatorsData[t.value]=v.calcIndicators(t,e,n)):v[i]=t}},{key:"cPrices",value:function(t,e){var n,i=(n=t,Array.isArray(n)?n:Array.from(n)),a=i[0],r=i[1],o=i[2],s=i[3],c=i[4],u=i[5],h=i.slice(6);[r,o,s,c].forEach(function(t){R.pPrecision=Math.max(R.pPrecision,R.getPrecision(t))}),R.volPrecision=Math.max(R.volPrecision,R.getPrecision(u));var l=e[1],d=e[4],f=R.cPrice((l+d)/2),v=R.cPrice((o+s+r+c)/4);return[a,f,Math.max(o,f,v),Math.min(s,f,v),v,u].concat(x(h))}},{key:"initIndicators",value:function(){if(v.currBaseIndicator){var t=v.currBaseIndicator.value;v.indicatorsData[t]=[]}if(v.currTechIndicator){var e=v.currTechIndicator.value;v.indicatorsData[e]=[]}}},{key:"calcIndicators",value:function(n){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"base",r=[];return v.originData.forEach(function(t,e){r.push(v.calcIndicator(n,e,r)),i&&i.apply(void 0,x(v.loopCbParam(e,f({},a+"IndicatorData",r))))}),r}},{key:"calcIndicator",value:function(t,e,n){return(0,t.method)(e,v.originData,n[e-1])}},{key:"loopCbParam",value:function(t,e){var n=e.baseIndicatorData,i=e.techIndicatorData;return[t,v.originData,v.cData,{baseIndicatorData:n||v.currBaseIndicator&&v.indicatorsData[v.currBaseIndicator.value],techIndicatorData:i||v.currTechIndicator&&v.indicatorsData[v.currTechIndicator.value]}]}}]),v}();ge.originData=[],ge.cData=[],ge.currBaseIndicator=null,ge.currTechIndicator=null,ge.indicatorsData={};var pe={langName:"zh-Hans",time:"分时","1min":"1分钟","5min":"5分钟","15min":"15分钟","30min":"30分钟","1hour":"1小时","4hour":"4小时","1day":"1天","5day":"5天","1week":"1周","1mon":"1月",Jan:"1月",Feb:"2月",Mar:"3月",Apr:"4月",May:"5月",Jun:"6月",Jul:"7月",Aug:"8月",Sep:"9月",Oct:"10月",Nov:"11月",Dec:"12月",yyyy:"{year}年",candles:"K线图","heikin-ashi":"平均K线图",open:"开",highest:"高",lowest:"低",close:"收",periods:"周期","candle-types":"K线类型",indicators:"指标","indicators.base":"基础指标","indicators.technical":"技术指标",MA:"MA",EMA:"EMA",BOLL:"BOLL",SAR:"SAR",MACD:"MACD",KDJ:"KDJ",StochRSI:"StochRSI",RSI:"RSI",DMI:"DMI",OBV:"OBV",DMA:"DMA",TRIX:"TRIX",BRAR:"BRAR",VR:"VR",EMV:"EMV",WR:"WR",ROC:"ROC",MTM:"MTM",PSY:"PSY","full-screen":"全屏","full-screen-exit":"退出全屏","data.no":"无数据","see.landscape":"请横屏观看","back-to-portrait":"返回竖屏"};var ye=function(){function t(){e(this,t)}return n(t,null,[{key:"addLangSource",value:function(t){if(!t.langName)throw new Error("Key `langName` in lang object is missed");this.langs[t.langName]=t,console.log("Your custom language set successful")}},{key:"$tr",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:"")||this.lang;if(!this.langs[n])throw new Error("(Lang.js) No language: "+n);var i=this.langs[n][t];return i?Object.keys(e).map(function(t){return{reg:new RegExp("{"+t+"}","g"),value:e[t]}}).reduce(function(t,e){return t.replace(e.reg,e.value)},i):(console.warn("(Lang.js) Key: "+t+" is not exist"),t)}},{key:"setLang",value:function(t){return this.langs[t]?this.lang=t:console.error("(Lang.js) No language: "+t),this.lang}}]),t}();ye.langs=[{langName:"en",time:"Realtime","1min":"1min","5min":"5min","15min":"15min","30min":"30min","1hour":"1hour","4hour":"4hour","1day":"1day","5day":"5day","1week":"1week","1mon":"1mon",Jan:"Jan",Feb:"Feb",Mar:"Mar",Apr:"Apr",May:"May",Jun:"Jun",Jul:"Jul",Aug:"Aug",Sep:"Sep",Oct:"Oct",Nov:"Nov",Dec:"Dec",yyyy:"{year}",candles:"Candles","heikin-ashi":"Heikin Ashi",open:"O",highest:"H",lowest:"L",close:"C",periods:"Periods","candle-types":"Candle Types",indicators:"Indicators","indicators.base":"Base Indicators","indicators.technical":"Technical Indicators",MA:"MA",EMA:"EMA",BOLL:"BOLL",SAR:"SAR",MACD:"MACD",KDJ:"KDJ",StochRSI:"StochRSI",RSI:"RSI",DMI:"DMI",OBV:"OBV",DMA:"DMA",TRIX:"TRIX",BRAR:"BRAR",VR:"VR",EMV:"EMV",WR:"WR",ROC:"ROC",MTM:"MTM",PSY:"PSY","full-screen":"Full Screen","full-screen-exit":"Exit Full Screen","data.no":"No Data","see.landscape":"Please see it on the horizontal screen","back-to-portrait":"Back to portrait"},pe,{langName:"zh-Hant",time:"分時","1min":"1分鐘","5min":"5分鐘","15min":"15分鐘","30min":"30分鐘","1hour":"1小時","4hour":"4小時","1day":"1天","5day":"5天","1week":"1周","1mon":"1月",Jan:"1月",Feb:"2月",Mar:"3月",Apr:"4月",May:"5月",Jun:"6月",Jul:"7月",Aug:"8月",Sep:"9月",Oct:"10月",Nov:"11月",Dec:"12月",yyyy:"{year}年",candles:"K線圖","heikin-ashi":"平均K線圖",open:"開",highest:"高",lowest:"低",close:"收",periods:"週期","candle-types":"K線類型",indicators:"指標","indicators.base":"基礎指標","indicators.technical":"技術指標",MA:"MA",EMA:"EMA",BOLL:"BOLL",SAR:"SAR",MACD:"MACD",KDJ:"KDJ",StochRSI:"StochRSI",RSI:"RSI",DMI:"DMI",OBV:"OBV",DMA:"DMA",TRIX:"TRIX",BRAR:"BRAR",VR:"VR",EMV:"EMV",WR:"WR",ROC:"ROC",MTM:"MTM",PSY:"PSY","full-screen":"全屏","full-screen-exit":"退出全屏","data.no":"無數據","see.landscape":"請橫屏觀看","back-to-portrait":"返回豎屏"}].reduce(function(t,e){return t[e.langName]=e,t},{}),ye.lang=pe.langName;var xe={provide:function(){return{lang:this.lang,$tr:this.$tr}},created:function(){this.lang=ye.lang},data:function(){return{lang:""}},watch:{lang:function(){this.resize()}},methods:{$tr:function(t,e){return ye.$tr(t,e,this.lang)},addLangSource:function(t){ye.addLangSource(t)},setLang:function(t){this.lang=ye.setLang(t)}}},be={props:{data:{type:Array,default:function(){return[]}},updateData:{type:Array,default:function(){return[]}}},data:function(){return{myData:[],size:null,candleWidth:P.candleWidth,dragDeltaX:0,cData:[],originRange:null,candlePaths:null,volumePaths:null,techIndPaths:null}},computed:{contentWidth:function(){return this.chartSize?this.chartSize.width-P.candleChartPaddingRight:0},halfCandleWidth:function(){return Math.floor(this.candleWidth/2)},cCandleWidth:function(){return 2*this.halfCandleWidth+1},candleInterval:function(){return Math.ceil(this.cCandleWidth/3)-1},volumeWidth:function(){return this.cCandleWidth+this.candleInterval-1},volumeDeltaX:function(){return.5-Math.floor(this.candleInterval/2)},candleOffsetWidth:function(){return Math.round(this.cCandleWidth+this.candleInterval)},cutLength:function(){if(!this.size)return 0;var t=Math.round((this.contentWidth+this.dragDeltaX)/this.candleOffsetWidth);return Math.max(1,t)},sliceLength:function(){if(!this.size)return 0;var t=Math.round(this.contentWidth/this.candleOffsetWidth);return Math.max(1,t)},cutIndex:function(){return Math.max(0,this.myData.length-this.cutLength)},showData:function(){return this.size?this.myData.slice(this.cutIndex,this.cutIndex+this.sliceLength):[]},startX:function(){return this.sliceLength>this.myData.length?0:this.contentWidth-this.candleOffsetWidth*this.sliceLength},computedRange:function(){if(!this.originRange)return null;var t=this.originRange,e=t.price,n=t.volume,i=t.indicator;return{price:this.calcRange(e,this.candlesSize.height,{top:P.candleChartPaddingTop,bottom:P.candleChartPaddingBottom}),volume:this.calcRange(n,this.volumeHeight,{top:P.volumeChartHeightTop,bottom:P.volumeChartHeightBottom}),indicator:this.calcRange(i,this.indicatorHeight,{top:P.indicatorChartPaddingTop,bottom:P.indicatorChartPaddingBottom})}},heightRate:function(){if(!this.computedRange)return{};var t=this.computedRange,e=t.price,n=t.volume,i=t.indicator;return{price:this.calcHeightRate(e,this.candlesSize.height),volume:this.calcHeightRate(n,this.volumeHeight),indicator:this.calcHeightRate(i,this.indicatorHeight)}},currPrices:function(){var t=(this.myData||[]).length;return!this.myData||t<1||!this.computedRange||!this.heightRate.price?null:this.type===I[0].value?this.myData[t-1]:ge.cData[t-1]},currPrice:function(){if(!this.currPrices)return null;var t=_(this.currPrices,5),e=t[1],n=t[4],i=this.computedRange.price,a=i.max;return n<i.min||a<=n?null:{value:n,y:Math.ceil((i.max-n)*this.heightRate.price),isUp:0<=n-e}}},watch:{data:{handler:function(t){t&&(ge.updateOriginData(JSON.parse(JSON.stringify(t)),null,"refresh"),this.myData=JSON.parse(JSON.stringify(ge.originData)))},immediate:!0},updateData:{handler:function(t){t&&(ge.updateOriginData(JSON.parse(JSON.stringify(t)),null,"update"),this.myData=JSON.parse(JSON.stringify(ge.originData)))},immediate:!0},showData:function(t){var g=this,p=[],y=this.initRange(R.pPrecision),x=this.initRange(R.volPrecision,0),b=this.initRange(0),M=void 0,D=void 0,I=void 0,w=this.priceKey(),S=this.baseIndicator,C=this.techIndicator;t.forEach(function(t,e){var n=Math.max(t[1],t[2],t[4]),i=Math.min(t[1],t[3],t[4]),a=_(t,6)[5];n>y.max&&(y.max=n),i<y.min&&(y.min=i),a>x.max&&(x.max=a);var r=g.calcOriginX(t,e),o={prices:t,cPrices:ge.cData[g.cutIndex+e],originX:r};if(S){var s=g.dealInd(e,S),c=s.indItem,u=s.max,h=s.min;o.baseInd=c,h<y.min&&(y.min=h),u>y.max&&(y.max=u)}if(C){var l=g.dealInd(e,C),d=l.indItem,f=l.max,v=l.min,m=l.keys;o.techInd=d,v<b.min&&(b.min=X(C,v)),f>b.max&&(b.max=X(C,f,2)),m.forEach(function(t,e){var n=X(C,d[t],e===m.length-1?2:1);b.precision=Math.max(b.precision,R.getPrecision(n))})}p.push(o),M=g.setCandlePaths(M,o[w],r,o.baseInd,e),D=g.setVolumePaths(D,t,r),I=g.setTechPaths(I,t,r,o.techInd,e)}),t.length?(y.power=this.calcFactorForAxis(y.max,y.min,y.precision),x.power=this.calcFactorForAxis(x.max,x.min,x.precision),C&&(b.power=this.calcFactorForAxis(b.max,b.min,b.precision)),this.originRange=h({},this.originRange,{price:y,volume:x},C?{indicator:b}:{})):this.originRange=null,this.cData=p,this.candlePaths=M,this.volumePaths=D,this.techIndPaths=I},type:function(o){var s=this,c=void 0;this.showData.forEach(function(t,e){var n=s.cData[e],i=n.originX,a=n.cPrices,r=o===I[0].value?t:a;c=s.setCandlePaths(c,r,i,null,e)}),this.candlePaths=c?h({},this.candlePaths,{paths:c.paths}):null},period:function(t,e){t.value===e.value&&this.updatePaths()},heightRate:function(t,e){var n={price:t.price!==e.price,volume:t.volume!==e.volume,indicator:t.indicator!==e.indicator};(n.price||n.volume||n.indicator)&&this.updatePaths()},baseIndicator:{handler:function(l){var d=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!l||l&&l.value!==t.value)if(0<this.showData.length){var f={};if(l){var v=this.priceKey();ge.currIndicatorChange(l,function(t,e,n,i){var a=i.baseIndicatorData;if(d.indexIsInRange(t)){var r=t-d.cutIndex,o=d.cData[r].originX,s=d.dealInd(r,l,a),c=s.indItem,u=s.max,h=s.min;d.cData[r].baseInd=c,d.originRange&&d.originRange.price&&(h<d.originRange.price.min&&(d.originRange.price.min=h),u>d.originRange.price.max&&(d.originRange.price.max=u),f=d.setCandlePaths(f,d.cData[r][v],o,c,r,!0))}},"base")}else ge.currIndicatorChange(l,null,"base"),this.showData.forEach(function(t,e){d.cData[e].baseInd=void 0});this.cData=[].concat(x(this.cData)),this.candlePaths=h({},this.candlePaths,{ind:f.ind})}else ge.currIndicatorChange(l,null,"base")},immediate:!0},techIndicator:{handler:function(f,t){var v=this,m=!f&&t||f&&!t;if(m||f&&t&&f.value!==t.value)if(0<this.showData.length){var g=void 0,p=void 0,y=this.initRange();f?ge.currIndicatorChange(f,function(t,e,n,i){var a=i.techIndicatorData;if(v.indexIsInRange(t)){var r=t-v.cutIndex,o=e[t],s=v.cData[r].originX;m&&(g=v.setVolumePaths(g,o,s));var c=v.dealInd(r,f,a),u=c.indItem,h=c.max,l=c.min,d=c.values;v.cData[r].techInd=u,l<y.min&&(y.min=l),h>y.max&&(y.max=h),d.forEach(function(t){y.precision=Math.max(y.precision,R.getPrecision(t))}),p=v.setTechPaths(p,o,s,v.cData[r].techInd,r)}},"tech"):(ge.currIndicatorChange(f,null,"tech"),this.showData.forEach(function(t,e){var n=v.cData[e].originX;m&&(g=v.setVolumePaths(g,t,n)),v.cData[e].techInd=void 0})),this.cData=[].concat(x(this.cData)),f&&(y.power=this.calcFactorForAxis(y.max,y.min,y.precision),this.originRange=h({},this.originRange,{indicator:y})),m&&(this.volumePaths=g),this.techIndPaths=p}else ge.currIndicatorChange(f,null,"tech")},immediately:!0}},methods:{updatePaths:function(){var o=this,s=void 0,c=void 0,u=void 0,h=this.priceKey();this.showData.forEach(function(t,e){var n=o.cData[e],i=n.originX,a=n.baseInd,r=n.techInd;s=o.setCandlePaths(s,o.cData[e][h],i,a,e),c=o.setVolumePaths(c,t,i),u=o.setTechPaths(u,t,i,r,e)}),this.cData=[].concat(x(this.cData)),this.candlePaths=s,this.volumePaths=c,this.techIndPaths=u},initRange:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return{max:0,min:1<arguments.length&&void 0!==arguments[1]?arguments[1]:1/0,precision:t,power:0}},calcOriginX:function(t,e){return Math.round(this.candleOffsetWidth*e+this.startX)},calcFactorForAxis:function(t,e,n){var i=R.toExponential(t-e).exponential;return Math.max(-n,i-1)},calcRange:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{top:1,bottom:1};if(!t||!this.size||!e)return null;var i=t.max,a=t.min,r=t.power,o=t.precision,s=(i-a)/e||1,c={max:R.cVal(i+s*n.top,o),min:R.cVal(a-s*n.bottom,o),power:r,precision:o};return c.max===i&&(c.max+=Math.pow(10,r)),c.min===a&&(c.min-=Math.pow(10,r)),c},calcHeightRate:function(t,e){if(!e||!t)return 1;var n=t.max-t.min;return n?e/n:1},dealInd:function(t,e,n){var i=e.value,a=e.ignore,r=(n||ge.indicatorsData[i])[this.cutIndex+t],o=Object.keys(r).filter(function(t){return!a||!a.includes(t)}).sort(function(t,e){return r[t]-r[e]});return{keys:o,indItem:r,max:r[o[o.length-1]],min:r[o[0]],values:o.map(function(t){return r[t]})}},setCandlePaths:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],n=arguments[2],i=arguments[3],a=arguments[4],r=5<arguments.length&&void 0!==arguments[5]&&arguments[5];if(!this.heightRate.price)return t;var o=t.paths,s=void 0===o?{}:o,c=t.ind,u=void 0===c?"":c,h=this.dCandlePath(e,n,i,a,r),l=h.candle,d=h.line;if(!r&&l){var f=l.type,v=l.path;s[f]?s[f]+=v:s[f]=v}return d&&("object"===(void 0===d?"undefined":y(d))?u=Object.keys(d).reduce(function(t,e){return t[e]=(t[e]||"")+d[e],t},u||{}):u+=d),{paths:!r&&s,ind:u}},dCandlePath:function(t,e,n,i){var a=this,r=4<arguments.length&&void 0!==arguments[4]&&arguments[4],o=this.heightRate.price,s=void 0;if(!r){var c=_(t,5),u=c[1],h=c[2],l=c[3],d=c[4];if("time"===(this.period||{}).name){var f=Math.ceil((this.computedRange.price.max-d)*o);return{candle:s={type:"line",path:(0===i?"M":"L")+(this.halfCandleWidth+e+.5)+","+(f+.5)+"\n\r"}}}var v=this.className(t),m=Math.ceil((this.computedRange.price.max-h)*o),g=[Math.ceil((h-Math.max(u,d))*o),Math.max(1,Math.ceil(Math.abs(u-d)*o)),Math.ceil((Math.min(u,d)-l)*o)];s={type:v,path:"M"+(this.halfCandleWidth+e)+","+m+" h1 v"+g[0]+" h"+this.halfCandleWidth+" v"+g[1]+" h"+-this.halfCandleWidth+" v"+g[2]+" h-1 v"+-g[2]+" h"+-this.halfCandleWidth+" v"+-g[1]+" h"+this.halfCandleWidth+" z\n\r"}}if(!n)return{candle:s};var p=this.halfCandleWidth+e+.5;return{candle:s,line:"object"===(void 0===n?"undefined":y(n))?Object.keys(n).reduce(function(t,e){return t[e]=a.baseIndDot(i,p,n[e]),t},{}):this.baseIndDot(i,p,n)}},baseIndDot:function(t,e,n){var i=this.computedRange.price.max,a=this.heightRate.price;return(0===t?"M":"L")+e+","+(Math.ceil((i-n)*a)-.5)+"\n\r"},setVolumePaths:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],n=arguments[2];if(!this.heightRate.volume)return t;var i=h({},t),a=this.className(e),r=this.dVolumePath(e,n);return i[a]?i[a]+=r:i[a]=r,i},dVolumePath:function(t,e){var n=_(t,6)[5],i=this.computedRange.volume.min,a=this.heightRate.volume,r=Math.floor((n-Math.max(0,i))*a),o=this.volumesSize.height-r-Math.max(0,-i)*a;return"M"+(e+this.volumeDeltaX)+","+(Math.ceil(this.crossCurveRangeY.volume[0]+o)-.5)+" h"+this.volumeWidth+" v"+r+" h"+-this.volumeWidth+" z\n\r"},setTechPaths:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],n=arguments[2],i=arguments[3],a=arguments[4];if(!this.heightRate.indicator)return t;var r=h({},t),s=this.dTechIndPath(n,e,i,a);return s&&"object"===(void 0===s?"undefined":y(s))&&(r=Object.keys(s).reduce(function(t,e){var n=s[e],i=n.value,a=n.chartType,r=n.classType,o=r?e+"-"+r:e;return t[o]={chartType:a,classType:r,value:(t[o]&&t[o].value||"")+i},t},r||{})),r},dTechIndPath:function(t,e,n,i){var a=this;if(!n||!this.techIndicator)return"";var r=this.halfCandleWidth+t+.5;return"object"===(void 0===n?"undefined":y(n))?Object.keys(n).filter(function(t){return!a.techIndicator.ignore||!a.techIndicator.ignore.includes(t)}).reduce(function(t,e){return t[e]=a.techIndDot(i,r,n[e]||0,a.isBar(a.techIndicator,e)?"bar":"line"),t},{}):this.techIndDot(i,r,n,this.isBar()?"bar":"line")},techIndDot:function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"line";if(!this.computedRange.indicator)return{};var a=this.computedRange.indicator.max,r=this.heightRate.indicator,o=Math.ceil((a-n)*r+this.crossCurveRangeY.indicator[0])-.5,s=Math.ceil(a*r+this.crossCurveRangeY.indicator[0])-.5;return"bar"===i?{chartType:i,value:"M"+e+","+o+" V"+s+"z\n\r",classType:Y([],+n)}:{chartType:i,value:(0===t?"M":"L")+e+","+o+"\n\r"}},isBar:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return t&&t.bar&&(!e||t.bar.includes(e))},className:Y,indexIsInRange:function(t){return this.cutIndex+this.sliceLength>t&&t>=this.cutIndex},priceKey:function(){return this.type===I[0].value?"prices":"cPrices"}}},Me={name:"TechIndicator",components:{YAxis:J},props:{paths:{type:Object,default:function(){return{}}},indicator:Object,range:Object,heightRate:Number,y:Number,size:Object,fontSize:Number},computed:{deltaX:function(){return Math.floor(this.candleWidth/2)},yAxisOrigin:function(){return{x:this.size.width,y:Math.round(this.y)}},keys:function(){var t=this;return this.indicator?this.indicator.order?Object.keys(this.paths).sort(function(e,n){return Object.keys(t.indicator.order).find(function(t){return e.includes(t)})-Object.keys(t.indicator.order).find(function(t){return n.includes(t)})}):Object.keys(this.paths):[]}}};var De,Ie,we,Se,Ce,_e=(we=void 0,Se=!(De={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{staticClass:"tech-indicator"},[n("y-axis",{attrs:{origin:e.yAxisOrigin,height:e.size.height,heightRate:e.heightRate,range:e.range,fontSize:e.fontSize,type:"indicator"},on:{yWidth:function(t){e.$emit("yWidth",t)}}}),e._v(" "),e.indicator?n("g",{attrs:{"clip-path":"url(#chart-content-clip)"}},e._l(e.keys,function(t){return n("path",{key:t,class:["indicator-"+e.paths[t].chartType,e.indicator.value+"-"+t,e.paths[t].classType],attrs:{d:e.paths[t].value}})})):e._e()],1)},staticRenderFns:[]}),(Ce=("function"==typeof(Ie=Me)?Ie.options:Ie)||{}).__file="TechIndicator.vue",Ce.render||(Ce.render=De.render,Ce.staticRenderFns=De.staticRenderFns,Ce._compiled=!0,Se&&(Ce.functional=!0)),Ce._scopeId=we,Ce),Re={name:"icon-full-screen",props:{type:String,width:Number,height:Number}};var Oe,ze,Ae,Pe,ke,Te={name:"ToolBar",inject:["lang","$tr"],components:{IconFullScreen:(Ae=void 0,Pe=!(Oe={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return"exit"!==e.type?n("svg",{staticClass:"icon-full-screen",staticStyle:{"enable-background":"new 0 0 128 128"},attrs:{viewBox:"0 0 128 128",width:e.width,height:e.height},on:{click:function(t){e.$emit("update:type","exit")}}},[n("path",{attrs:{d:"M112,128H80v-8h32c4.4,0,8-3.6,8-8V80h8v32C128,120.8,120.8,128,112,128C112,128,112,128,112,128z\n   M120,16c0-4.4-3.6-8-8-8c0,0,0,0,0,0H80V0h32c8.8,0,16,7.2,16,16v32h-8C120,48,120,16,120,16z\n   M0,112V80h8v32c0,4.4,3.6,8,8,8c0,0,0,0,0,0h32v8H16C7.2,128,0,120.8,0,112C0,112,0,112,0,112z\n   M8,16v32H0V16C0,7.2,7.2,0,16,0c0,0,0,0,0,0h32v8H16C11.6,8,8,11.6,8,16C8,16,8,16,8,16z"}})]):n("svg",{staticClass:"icon-full-screen",staticStyle:{"enable-background":"new 0 0 128 128"},attrs:{viewBox:"0 0 128 128",width:e.width,height:e.height},on:{click:function(t){e.$emit("update:type","")}}},[n("path",{attrs:{d:"M96,80h32v8H96c-4.4,0-8,3.6-8,8v32h-8V96C80,87.2,87.2,80,96,80C96,80,96,80,96,80z\n  M88,32c0,4.4,3.6,8,8,8c0,0,0,0,0,0l32,0v8H96c-8.8,0-16-7.2-16-16V0l8,0C88,0,88,32,88,32z\n  M48,96v32h-8V96c0-4.4-3.6-8-8-8c0,0,0,0,0,0H0l0-8h32C40.8,80,48,87.2,48,96C48,96,48,96,48,96z\n  M40,32V0l8,0v32c0,8.8-7.2,16-16,16c0,0,0,0,0,0H0l0-8l32,0C36.4,40,40,36.4,40,32C40,32,40,32,40,32z"}})])},staticRenderFns:[]}),(ke=("function"==typeof(ze=Re)?ze.options:ze)||{}).__file="IconFullScreen.vue",ke.render||(ke.render=Oe.render,ke.staticRenderFns=Oe.staticRenderFns,ke._compiled=!0,Pe&&(ke.functional=!0)),ke._scopeId=Ae,ke)},props:{isMobile:Boolean,periodVal:Object,isFull:Boolean,showIndicators:Array},data:function(){return{period:{value:w[3],options:w},candleType:{value:I[0],options:I},indicators:{value:[],options:S},fullScreen:""}},watch:{showIndicators:{handler:function(t){t&&(this.indicators.value=t)},immediate:!0},periodVal:{handler:function(e){this.period.value=w.find(function(t){return e&&t.value===e.value&&t.name===e.name})||w[0],e!==this.period.value.value&&this.emitPeriod(this.period.value)},immediate:!0},"candleType.value":{handler:function(t){this.$emit("candleType",t.value)},immediate:!0},"indicators.value":{handler:function(t){t!==this.showIndicators&&this.$emit("update:showIndicators",t)},immediate:!0},fullScreen:function(t){this.$emit("isFullScreen","exit"===t)},isFull:{handler:function(t){this.fullScreen=t?"exit":""},immediate:!0}},methods:{choseIndicator:function(t,e){var n=this,i=Object.keys(this.indicators.value).find(function(t){return n.indicators.value[t].type===e});i?this.indicators.value[i].value===t.value?this.indicators.value.splice(i,1):this.indicators.value.splice(i,1,t):this.indicators.value.push(t)},emitPeriod:function(t){this.$emit("period",t)}}};var Fe,We,Ye,He,Xe,Ee=(Ye=void 0,He=!(Fe={render:function(){var i=this,t=i.$createElement,a=i._self._c||t;return a("div",{staticClass:"tool-bar"},[a("div",{staticClass:"periods",class:{mobile:i.isMobile}},[i.isMobile?[i._v("\n      "+i._s(i.$tr("periods"))+"\n      "),a("div",{staticClass:"options"},i._l(i.period.options,function(e){return a("button",{key:e.name,staticClass:"option",class:{selected:i.period.value===e||i.period.value.name===e.name&&i.period.value.value===e.value},on:{click:function(t){i.emitPeriod(e)}}},[i._v(i._s(i.$tr(e.name))+"\n        ")])}))]:i._l(i.period.options,function(e){return a("button",{key:e.name,staticClass:"period",class:{selected:i.period.value===e},on:{click:function(t){i.emitPeriod(e)}}},[i._v(i._s(i.$tr(e.name))+"\n      ")])})],2),i._v(" "),a("div",{staticClass:"candle-types"},[i._v("\n    "+i._s(i.$tr("candle-types"))+"\n    "),a("div",{staticClass:"options"},i._l(i.candleType.options,function(e){return a("button",{key:e.value,staticClass:"option",class:{selected:i.candleType.value===e},on:{click:function(t){i.candleType.value=e}}},[i._v(i._s(i.$tr(e.name))+"\n      ")])}))]),i._v(" "),a("div",{staticClass:"indicators"},[i._v("\n    "+i._s(i.$tr("indicators"))+"\n    "),a("div",{staticClass:"options"},[i._l(i.indicators.options,function(t,n,e){return[a("h5",{key:n+"-caption",staticClass:"caption"},[i._v(i._s(i.$tr("indicators."+n)))]),i._v(" "),a("div",{key:n+"-options",staticClass:"option-group"},i._l(t,function(e){return a("button",{key:e.value,staticClass:"option",class:{selected:i.indicators.value.some(function(t){return t.value===e.value})},on:{click:function(t){i.choseIndicator(e,n)}}},[i._v(i._s(i.$tr(e.name))+"\n          ")])})),i._v(" "),0===e?a("div",{key:n+"-decoration",staticClass:"decoration"}):i._e()]})],2)]),i._v(" "),a("div",{staticClass:"icon-full"},[a("span",{staticClass:"tool-tip"},[i._v(i._s(i.$tr("exit"===i.fullScreen?"full-screen-exit":"full-screen")))]),i._v(" "),a("icon-full-screen",{attrs:{type:i.fullScreen},on:{"update:type":function(t){i.fullScreen=t}}})],1)])},staticRenderFns:[]}),(Xe=("function"==typeof(We=Te)?We.options:We)||{}).__file="ToolBar.vue",Xe.render||(Xe.render=Fe.render,Xe.staticRenderFns=Fe.staticRenderFns,Xe._compiled=!0,He&&(Xe.functional=!0)),Xe._scopeId=Ye,Xe),Le={name:"Volume",components:{YAxis:J},props:{paths:{type:Object,default:function(){return{}}},range:Object,heightRate:Number,y:Number,size:Object,svgWidth:Number,showHLine:Boolean,fontSize:Number},computed:{yAxisOrigin:function(){return{x:this.size.width,y:Math.round(this.y)}},rectY:function(){return Math.round(this.y+this.size.height-1)}}};var $e,Ne,je,Ve,Be,Je=(je=void 0,Ve=!($e={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{staticClass:"volumes",staticStyle:{overflow:"hidden"}},[n("y-axis",{attrs:{origin:e.yAxisOrigin,height:e.size.height,heightRate:e.heightRate,range:e.range,fontSize:e.fontSize,type:"volume"},on:{yWidth:function(t){e.$emit("yWidth",t)}}}),e._v(" "),n("g",{attrs:{"clip-path":"url(#chart-content-clip)"}},e._l(e.paths,function(t,e){return n("path",{key:e,staticClass:"volume",class:e,attrs:{d:t}})})),e._v(" "),e.showHLine?n("rect",{staticClass:"h-line",attrs:{x:0,y:e.rectY,width:e.svgWidth,height:"1"}}):e._e()],1)},staticRenderFns:[]}),(Be=("function"==typeof(Ne=Le)?Ne.options:Ne)||{}).__file="Volumes.vue",Be.render||(Be.render=$e.render,Be.staticRenderFns=$e.staticRenderFns,Be._compiled=!0,Ve&&(Be.functional=!0)),Be._scopeId=je,Be);var Ke=function(t){return It(t).getDate()};var Ue=function(t){return It(t).getMonth()},Ge={name:"XAxis",inject:["lang","$tr"],props:{y:Number,width:Number,period:Number,candleWidth:Number,candleInterval:Number,data:{type:Array,default:function(){return[]}},showLength:Number,fontSize:Number},data:function(){return{acceptedIntervals:[{value:12e4,bold:18e5,name:"2min"},{value:18e4,bold:18e5,name:"3min"},{value:24e4,bold:18e5,name:"4min"},{value:3e5,bold:18e5,name:"5min"},{value:6e5,bold:18e5,name:"10min"},{value:9e5,bold:36e5,name:"15min"},{value:18e5,bold:36e5,name:"30min"},{value:36e5,bold:864e5,name:"60min"},{value:54e5,mod:36e5,bold:864e5,name:"1.5hour"},{value:108e5,mod:36e5,bold:864e5,name:"3hour"},{value:216e5,mod:144e5,bold:864e5,name:"6hour"},{value:432e5,mod:144e5,bold:864e5,name:"12hour"},{value:864e5,mod:576e5,bold:"month",name:"1d"},{value:1728e5,mod:144e6,bold:"month",name:"2d"},{value:2592e5,mod:2304e5,bold:"month",name:"3d"},{value:3456e5,mod:3168e5,bold:"month",name:"4d"},{value:432e6,mod:4032e5,bold:"month",name:"5d"},{value:5184e5,mod:4896e5,bold:"month",name:"6d"},{value:6048e5,mod:576e6,bold:"month",name:"7d"},{value:6912e5,mod:6624e5,bold:"month",name:"8d"},{value:7776e5,mod:7488e5,bold:"month",name:"9d"},{value:864e6,mod:8352e5,bold:"month",name:"10d"},{value:1296e6,bold:"month",alias:"15d"},{value:2592e6,bold:"year",alias:"1mon"},{value:5184e6,bold:"year",alias:"2mon"},{value:7776e6,bold:"year",alias:"3mon"},{value:10368e6,bold:"year",alias:"4mon"}],textDelta:P.textDelta,markerLineLength:P.markerLineLength}},computed:{cY:function(){return Math.round(this.y)},cWidth:function(){return Math.round(this.width)},delta:function(){return Math.floor(this.candleWidth/2)},candleOffsetWidth:function(){return this.candleInterval+this.candleWidth},distanceOfTwo:function(){return{max:Math.floor(2*O/this.candleOffsetWidth),min:Math.ceil(O/this.candleOffsetWidth)}},showRule:function(){var n=this;if(!this.period)return this.acceptedIntervals[this.acceptedIntervals.length-1];var i=this.period,t=this.acceptedIntervals.filter(function(t){var e=t.value/i;return n.distanceOfTwo.max>=e&&e>=n.distanceOfTwo.min});return t[t.length-1]||this.acceptedIntervals[this.acceptedIntervals.length-1]},coords:function(){var s=this,t=this.data.length;if(!(this.showLength&&this.period&&t&&this.periodMatchedData()))return[];var e=this.showRule,c=e.value,n=e.mod,u=void 0===n?0:n,h=e.alias,i=this.data[t-1],a={time:i.prices[0],x:i.originX};return this.data.concat([].concat(x(Array(Math.max(0,+this.showLength-this.data.length)))).reduce(function(t){return a.time=+a.time+s.period,a.x+=s.candleOffsetWidth,t.concat([{prices:[a.time],originX:a.x}])},[])).reduce(function(t,e){var n=e.prices,i=e.originX,a=_(n,1)[0];if(h){var r=Ke(+a);if("15d"===h)return 15===r||1===r?t.concat([s.calcCoord(n,i)]):t;var o=+h.match(/^(\d)mon/)[1];return(Ue(+a)+1)%o===u&&24*r*60*60*1e3<=s.period?t.concat([s.calcCoord(n,i)]):t}return a%c===u?t.concat([s.calcCoord(n,i)]):t},[])}},watch:{coords:{handler:function(){this.emitHeight()},immediate:!0}},methods:{periodMatchedData:function(){var e=this;if(1<this.data.length){var t=function(t){return e.data[t].prices[0]};return t(1)-t(0)===this.period}return!0},calcCoord:function(t,e){return{prices:t,origin:{x:e+this.delta,y:this.cY},text:this.text(+t[0]),bold:this.bold(+t[0]),textY:Math.round(this.cY+this.fontSize+this.textDelta)}},bold:function(t){var e=void 0,n=this.showRule.bold;if("number"==typeof n)e=t%n==0;else{var i=Lt(t,"YYYY-MM-DD HH:mm");e="month"===n?/\s{4}-\s{2}-01 00:00/.test(i):/\s{4}-01-01 00:00/.test(i)}return e?"bold":""},text:function(t){var e=this.showRule,n=e.name,i=e.alias,a=void 0;return i||/d/.test(n)||"00:00"===(a=Lt(t,"HH:mm"))?(!i||i&&/d/.test(i))&&"01"!==(a=Lt(t,"DD"))?a:"01"===(a=Lt(t,"MM"))?this.$tr("yyyy",{year:Lt(t,"YYYY")}):this.$tr(A[Ue(t)].name):a},emitHeight:function(){var n=this;0<this.coords.length&&this.$nextTick(function(){var t=n.$refs.xAxis[0]||n.$refs.xAxis;if(t){var e=F(t);n.$emit("xHeight",Math.floor(e.height+P.textDelta))}})}}};var Ze,qe,Qe,tn,en,nn,an,rn,on,sn,cn={name:"Index",mixins:[xe,be],components:{ToolBar:Ee,Candles:tt,XAxis:(Qe=void 0,tn=!(Ze={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.period?n("g",{staticClass:"x-axis"},[n("rect",{staticClass:"axis-line x",attrs:{x:"0",y:e.cY,width:e.cWidth,height:"1"}}),e._v(" "),n("g",{staticClass:"axis-coords x"},e._l(e.coords,function(t){return n("g",{key:t.prices[0],ref:"xAxis",refInFor:!0,staticClass:"axis-coord x",class:t.bold,attrs:{"clip-path":"url(#chart-content-clip)"}},[n("rect",{staticClass:"axis-coord-marker x",attrs:{x:t.origin.x,y:t.origin.y,width:"1",height:e.markerLineLength}}),e._v(" "),n("text",{staticClass:"axis-coord-text x",attrs:{x:t.origin.x,y:t.textY,"font-size":e.fontSize,"text-anchor":"middle"}},[e._v("\n        "+e._s(t.text)+"\n      ")])])})),e._v(" "),n("g",{staticClass:"axis-refline x"},e._l(e.coords,function(t){return n("rect",{key:t.prices[0],staticClass:"axis-coord-marker x",attrs:{x:t.origin.x,y:0,width:"1",height:e.cY}})}))]):e._e()},staticRenderFns:[]}),(en=("function"==typeof(qe=Ge)?qe.options:qe)||{}).__file="XAxis.vue",en.render||(en.render=Ze.render,en.staticRenderFns=Ze.staticRenderFns,en._compiled=!0,tn&&(en.functional=!0)),en._scopeId=Qe,en),CrossCurve:Kt,Volumes:Je,Loading:me,CurrPrice:ee,TechIndicator:_e,Legends:ce},props:{fontSize:{type:Number,default:P.defaultFontSize},markerWidth:{type:Number,default:P.markerWidth},loading:Boolean,period:{type:Object,default:function(){return w[3]}},isMobile:Boolean,showIndicators:Array},data:function(){return{toolbarSize:{},loadingSize:P.loadingSize,textDelta:P.textDelta,axis:{x:{height:0},y:{width:0}},type:I[0].value,showVolumes:!0,isFullScreen:!1,dragOrigin:null,indicators:[],crossCurveInfo:null,touchRes:null,scaleOrigin:{time:0,scale:1},isPortrait:H(),nearestItem:null}},computed:{volumeHeight:function(){var t=(this.size||{}).height,e=void 0===t?1/0:t;return Math.min(P.volumeChartHeight,Math.floor(1.5*e/10))},indicatorHeight:function(){var t=(this.size||{}).height,e=void 0===t?1/0:t;return Math.min(P.indicatorChartHeight,Math.floor(1.5*e/10))},viewBox:function(){return this.size?"0 0 "+this.size.width+" "+this.size.height:"0 0 0 0"},chartSize:function(){return this.size?{width:Math.round(this.size.width-this.axis.y.width),height:Math.round(this.size.height-this.axis.x.height)}:null},baseIndicator:function(){return this.indicators.filter(function(t){return"base"===t.type})[0]},techIndicator:function(){return this.indicators.filter(function(t){return"technical"===t.type})[0]},candlesSize:function(){return this.size?{width:this.chartSize.width,height:Math.round(this.chartSize.height-(this.showVolumes?this.volumeHeight:0)-(this.techIndicator?this.indicatorHeight:0))}:null},volumesSize:function(){return this.size?{width:this.chartSize.width,height:this.volumeHeight}:null},indicatorSize:function(){return this.size?{width:this.chartSize.width,height:this.indicatorHeight}:null},textSize:function(){return{width:this.markerWidth,height:Math.round(this.axis.x.height-this.textDelta/2)}},crossCurveRangeY:function(){return{candle:[0,this.candlesSize.height],volume:[this.candlesSize.height,Math.round(this.candlesSize.height+this.volumeHeight)],indicator:[Math.round(this.candlesSize.height+this.volumeHeight),this.chartSize.height]}},maxDeltaX:function(){return Math.max(Math.ceil((this.cCandleWidth+this.candleInterval)*this.myData.length-this.candlesSize.width),0)},legendsOffset:function(){return{width:this.chartSize.width,children:this.crossCurveRangeY}}},watch:{showIndicators:{handler:function(e){e&&(this.indicators=[].concat(x(S.base),x(S.technical)).filter(function(t){return e.includes(t.value)}))},immediate:!0},isFullScreen:function(){this.resize()},size:function(t){t&&this.bindTouch()}},methods:{reset:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.axis.y.width=0,this.dragDeltaX=0,t&&(this.originRange=null,R.pPrecision=0,R.volPrecision=0)},getSvgOffset:function(){return W(this.$refs.kline)},getSize:function(){var o=this;this.$nextTick(function(){var t=F(o.$refs.wrap),e=t.width,n=void 0===e?0:e,i=t.height,a=void 0===i?0:i;o.toolbarSize=F(o.$refs.toolbar.$el);var r=o.toolbarSize.height||0;o.size={width:+Math.floor(n),height:+Math.floor(a-r)}})},setXAxisHeight:function(t){this.axis.x.height=t},setYAxisWidth:function(t){this.axis.y.width=Math.max(this.axis.y.width,t)},resize:function(){this.isPortrait=H(),this.isMobile&&this.isFullScreen&&this.isPortrait||this.getSize()},startDrag:function(t){this.dragOrigin={x:t.offsetX,y:t.offsetY,dragDeltaX:this.dragDeltaX,time:t.timeStamp}},mouseMove:function(t){this.markerMove(t),this.isMobile||this.klineMove(t)},endDrag:function(){this.dragOrigin=null},klineMove:function(t){if(this.dragOrigin){if(t.timeStamp-this.dragOrigin.time<k)return;this.dragOrigin.time=t.timeStamp;var e=void 0!==t.deltaX?t.deltaX:t.offsetX-this.dragOrigin.x;this.dragOrigin.dragDeltaX===this.maxDeltaX&&0<e?(this.$emit("getMorePreData"),this.dragOrigin=null):(this.dragDeltaX=Math.round(e+this.dragOrigin.dragDeltaX),this.dragDeltaX=Math.min(Math.max(0,this.dragDeltaX),this.maxDeltaX))}},markerMove:function(t){if(this.cData&&0<this.cData.length){var a={x:t.offsetX,y:t.offsetY};if(0<=a.x&&a.x<=this.chartSize.width&&0<=a.y&&a.y<=this.chartSize.height){var r=this.crossCurveRangeY,e=Object.keys(r).find(function(t){var e=_(r[t],2),n=e[0],i=e[1];return n<=a.y&&a.y<=i}),n=this.findNearest(this.cData,a.x),i=_(r[e],1)[0],o="candle"===e?"price":e,s=this.heightRate[o],c=this.computedRange[o];this.nearestItem=h({},this.cData[n.index],{prices:this.type===I[0].value?this.cData[n.index].prices:this.cData[n.index].cPrices}),this.crossCurveInfo={origin:{x:n.x,y:Math.floor(a.y)},time:n.time,value:void 0!==s?R.cVal(c.max-(a.y-i)/s,c.precision):i}}else this.resetCrossCurveInfo()}},resetCrossCurveInfo:function(){this.crossCurveInfo=null,this.nearestItem=null},findNearest:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(t.length<1)return{index:n,x:0,time:0};var i=Math.floor((t.length-1)/2),a=this.calcX(t[i].originX);if(t.length<2)return{index:n,x:a,time:t[0].prices[0]};if(2!==t.length)return 0<a-e?this.findNearest(t.slice(0,i+1),e,n):a-e<0?this.findNearest(t.slice(i),e,n+i):{index:n+i,x:a,time:t[i].prices[0]};var r=this.calcX(t[1].originX);return 0<Math.abs(r-e)-Math.abs(a-e)?{index:n,x:a,time:t[0].prices[0]}:{index:n+1,x:r,time:t[1].prices[0]}},calcX:function(t){return Math.floor(t+this.cCandleWidth/2)},mouseScale:function(t){this.scale(0<t.deltaY?-1:1,t.timeStamp)},scale:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(!(e-this.scaleOrigin.time<k)){this.scaleOrigin={time:e,scale:n};var i=this.candleWidth+2*t,a=this.candleOffsetWidth;i<P.candleMinWidth?this.candleWidth=P.candleMinWidth:i>P.candleMaxWidth?this.candleWidth=P.candleMaxWidth:this.candleWidth=i;var r=this.candleOffsetWidth/a;1!==r&&(this.dragOrigin={timeStamp:0,dragDeltaX:this.dragDeltaX},this.klineMove({deltaX:this.dragDeltaX*(r-1),timeStamp:100}),this.dragOrigin=null)}},bindTouch:function(){var s=this;this.isMobile&&this.$nextTick(function(){s.touchRes||(s.touchRes=[l(s.$refs.cursor,function(t){var e=t.center,n=e.clientX,i=e.clientY,a=s.getSvgOffset(),r=a.clientLeft,o=a.clientTop;s.markerMove({offsetX:n-r,offsetY:i-o})}),i(s.$refs.cursor,function(t){var e=t.type,n=t.timeStamp;if("panMove"===e){s.resetCrossCurveInfo();var i=t.centerDelta.deltaX;s.klineMove({deltaX:i,timeStamp:n})}else"panStart"===e?s.dragOrigin={dragDeltaX:s.dragDeltaX,timeStamp:n}:"panEnd"===e&&(s.dragOrigin=null)}),a(s.$refs.cursor,function(t){var e=t.pinchScale,n=t.timeStamp;1!==e&&(s.resetCrossCurveInfo(),s.scale(e>s.scaleOrigin.scale?1:-1,n,e))},!0)])})}},beforeMount:function(){window.addEventListener("mousemove",this.resetCrossCurveInfo),window.addEventListener("resize",this.resize)},mounted:function(){this.getSize()},beforeDestroy:function(){window.removeEventListener("mousemove",this.resetCrossCurveInfo),window.removeEventListener("resize",this.resize),this.touchRes&&this.touchRes.forEach(function(t){return t.unsubscribe()})}};return rn=void 0,on=!(nn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"wrap",staticClass:"kline-wrap",class:{"full-screen":e.isFullScreen&&!(e.isMobile&&e.isPortrait),mobile:e.isMobile}},[n("tool-bar",{ref:"toolbar",attrs:{isMobile:e.isMobile,isFull:e.isFullScreen,periodVal:e.period,showIndicators:e.indicators},on:{"update:showIndicators":function(t){e.indicators=t},period:function(t){e.$emit("update:period",t)},candleType:function(t){e.type=t},isFullScreen:function(t){e.isFullScreen=t}}}),e._v(" "),n("div",{staticClass:"content-wrap"},[n("svg",{ref:"kline",staticClass:"kline",attrs:{width:e.size&&e.size.width,height:e.size&&e.size.height,viewBox:e.viewBox}},[e.chartSize?[n("defs",[n("clipPath",{attrs:{id:"chart-content-clip"}},[n("rect",{attrs:{x:"0",y:"0",width:e.chartSize.width,height:e.size.height}})])]),e._v(" "),e.period?n("x-axis",{attrs:{data:e.cData,showLength:e.sliceLength,candleWidth:e.cCandleWidth,candleInterval:e.candleInterval,y:e.chartSize.height,width:e.candlesSize.width,period:e.period.value,fontSize:e.fontSize},on:{xHeight:e.setXAxisHeight}}):e._e(),e._v(" "),e.candlesSize&&e.computedRange?n("candles",{attrs:{size:e.candlesSize,indicator:e.baseIndicator,paths:e.candlePaths,range:e.computedRange.price,heightRate:e.heightRate.price,showHLine:!0,svgWidth:e.size.width,fontSize:e.fontSize},on:{yWidth:e.setYAxisWidth}}):e._e(),e._v(" "),e.showVolumes&&e.volumesSize&&e.computedRange?n("volumes",{attrs:{paths:e.volumePaths,range:e.computedRange.volume,heightRate:e.heightRate.volume,y:e.crossCurveRangeY.volume[0],size:e.volumesSize,svgWidth:e.size.width,showHLine:!!e.techIndicator,fontSize:e.fontSize},on:{yWidth:e.setYAxisWidth}}):e._e(),e._v(" "),e.techIndicator&&e.computedRange?n("tech-indicator",{attrs:{indicator:e.techIndicator,paths:e.techIndPaths,range:e.computedRange.indicator,heightRate:e.heightRate.indicator,y:e.crossCurveRangeY.indicator[0],size:e.indicatorSize,fontSize:e.fontSize},on:{yWidth:e.setYAxisWidth}}):e._e(),e._v(" "),e.currPrice?n("curr-price",{attrs:{y:e.currPrice.y,width:e.candlesSize.width,price:e.currPrice.value,fontSize:e.fontSize,textWidth:e.markerWidth,isUp:e.currPrice.isUp}}):e._e(),e._v(" "),e.axis.x.height&&e.crossCurveInfo?n("cross-curve",{attrs:{origin:e.crossCurveInfo.origin,time:e.crossCurveInfo.time,value:e.crossCurveInfo.value,fontSize:e.fontSize,textSize:e.textSize,chartSize:e.chartSize}}):e._e(),e._v(" "),n("rect",{ref:"cursor",staticClass:"cursor",attrs:{x:"0",y:"0",width:e.chartSize.width,height:e.chartSize.height},on:{mousedown:e.startDrag,mousemove:function(t){return t.stopPropagation(),e.mouseMove(t)},mouseup:e.endDrag,wheel:function(t){return t.stopPropagation(),t.preventDefault(),e.mouseScale(t)}}})]:e._e()],2),e._v(" "),e.size?n("legends",{attrs:{lastPrices:e.currPrices,nearestItem:e.nearestItem,offset:e.legendsOffset,baseIndicator:e.baseIndicator,techIndicator:e.techIndicator}}):e._e(),e._v(" "),e.loading?n("div",{staticClass:"loading-wrap"},[n("loading",{attrs:{width:e.loadingSize,height:e.loadingSize}})],1):e.myData.length<1?n("div",{staticClass:"no-data"},[n("div",{staticClass:"text"},[e._v(e._s(e.$tr("data.no")))])]):e.isMobile&&e.isFullScreen&&e.isPortrait?n("div",{staticClass:"see-landscape"},[n("div",{staticClass:"text"},[e._v("\n        "+e._s(e.$tr("see.landscape"))),n("br"),e._v(" "),n("button",{staticClass:"back-to-portrait",on:{click:function(t){e.isFullScreen=!1}}},[e._v(e._s(e.$tr("back-to-portrait"))+"\n        ")])])]):e._e()],1)],1)},staticRenderFns:[]}),(sn=("function"==typeof(an=cn)?an.options:an)||{}).__file="Index.vue",sn.render||(sn.render=nn.render,sn.staticRenderFns=nn.staticRenderFns,sn._compiled=!0,on&&(sn.functional=!0)),sn._scopeId=rn,sn});
//# sourceMappingURL=index.js.map
