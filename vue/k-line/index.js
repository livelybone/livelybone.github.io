!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Kline=e()}(this,function(){"use strict";function d(){var t=Array.prototype.filter.call(document.getElementsByTagName("meta"),function(t){return"viewport"===t.getAttribute("name")});if(t.length<1)return 1;var e=(t=t[t.length-1]).getAttribute("content").match(/initial-scale\s*=\s*([^,]+)(,|$)/);return(e?+e[1]:1)||1}function r(){return Math.random().toFixed(6)}function o(t,e){var i=this;i.observer=t,i.id=e,i.unsubscribe=function(t){var e=Object.keys(i.observer.subscribes).find(function(t){return i.observer.subscribes[t].id===i.id});i.observer.subscribes.splice(e,1),"function"==typeof t&&t(),console.log("simple-observer: Subscription: Unsubscribe success!")}}var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),f=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t},h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},_=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){a=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(a)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},x=function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)};function v(t,e){return Math.sqrt(Math.pow(t.pageX-e.pageX,2)+Math.pow(t.pageY-e.pageY,2))}function m(t,e){return Math.atan((t.pageY-e.pageY)/(t.pageX-e.pageX))/Math.PI*180}function g(e,i){function t(t){return i?(+e[t]+ +i[t])/2:+e[t]}return{clientX:t("clientX"),clientY:t("clientY"),pageX:t("pageX"),pageY:t("pageY"),screenX:t("screenX"),screenY:t("screenY")}}var p=function(t){if("function"!=typeof t)throw new Error("simple-observer: Observer: Params generator of constructor is invalid, must be a function");var a=this;a.subscribes=[],a.subscribe=function(t){for(var e=r(),i=0,n=function(t){return a.subscribes[t].id===e};i=Object.keys(a.subscribes).find(n),e=r(),void 0!==i;);return a.subscribes.push({id:e,callback:t}),new o(a,e)},t(function(){var e=arguments;a.subscribes.map(function(t){t.callback.apply(a,e)})})};function s(e,o){var i=null;window.TouchObservers||(window.TouchObservers=[]);var s=window.TouchObservers.find(function(t){return t.el===e});if(s&&s.Observer){if(!o)return s;s.unbind()}else{var t=new p(function(t){i=t});s?(s.Observer=t,s.next=i):(s={Observer:t,next:i,el:e},window.TouchObservers.push(s))}var c=null,u=null,h=0,l=0;function n(t){c=Array.prototype.map.call(t.targetTouches,function(t){return t}),u=0<c.length?g(c[0],c[1]):null,l=1<c.length?m(c[0],c[1]):0,h=1<c.length?v(c[0],c[1]):0;var e={type:t.type,touches:c,center:u,angle:l,distance:h,timeStamp:t.timeStamp,centerDelta:null,deltaAngle:0,pinchScale:1,event:t};"function"==typeof o?o(e):o&&t.preventDefault(),s.next(e)}function a(t){var e=c.map(function(e){return Array.prototype.find.call(t.changedTouches,function(t){return t.identifier===e.identifier})}).filter(function(t){return!!t}),i=0<e.length?g(e[0],e[1]):null,n=1<e.length?m(e[0],e[1]):0,a=1<e.length?v(e[0],e[1]):0,r={type:t.type,touches:e,center:i,angle:n,distance:a,timeStamp:t.timeStamp,centerDelta:function(t,e){var i=d();if(!t||!e)return{deltaX:0,deltaY:0,deltaDistance:0,direction:"",windowScale:i};var n=t.pageX-e.pageX,a=t.pageY-e.pageY,r=Math.sqrt(Math.pow(n,2)+Math.pow(a,2)),o=Math.abs(n)<=30/i?"":0<n?"right":"left",s=Math.abs(a)<=30/i?"":0<a?"bottom":"top";return{deltaX:n,deltaY:a,deltaDistance:r,direction:o+(o&&s?"-":"")+s,windowScale:i}}(i,u),deltaAngle:n-l,pinchScale:a/h||1,event:t};"function"==typeof o?o(r):o&&t.preventDefault(),s.next(r)}function r(){e.removeEventListener("touchstart",n),e.removeEventListener("touchmove",a),e.removeEventListener("touchend",a)}return e.addEventListener("touchstart",n),e.addEventListener("touchmove",a),e.addEventListener("touchend",a),s.unbind=r,s.destroy=function(){r(),s.Observer=null},s}function t(n){return function(t,e,i){return"function"==typeof t&&(i=e||null,e=t,t=window),n(t,e,i)}}function c(t){return t[0].toUpperCase()+t.slice(1)}var u=Object.assign||function(){return Array.prototype.map.call(arguments,function(t){return"object"===(void 0===t?"undefined":y(t))?t:{}}).reduce(function(e,i){return Object.keys(i).forEach(function(t){e[t]=i[t]}),e},{})};var n=t(function(t,e,i){var n=s(t,i);return{unsubscribe:n.Observer.subscribe(function(t){1===t.touches.length&&e(u(t,{type:"pan"+c(t.type.replace("touch",""))}))}).unsubscribe,touchObserver:n}});var a=t(function(t,e,i){var n=s(t,i),a=0;return{unsubscribe:n.Observer.subscribe(function(t){if("touchend"===t.type&&0===a)return e(u(t,{type:"pinchEnd"})),void a++;2<=t.touches.length&&(e(u(t,{type:"pinch"+c(t.type.replace("touch",""))})),a=0)}).unsubscribe,touchObserver:n}});var l=t(function(t,e,i){var n=s(t,i),a=0;return{unsubscribe:n.Observer.subscribe(function(t){if(1===t.touches.length)if("touchstart"===t.type)a=t.timeStamp;else if("touchend"===t.type){if(250<t.timeStamp-a)return;if(t.centerDelta.deltaDistance>10/t.centerDelta.windowScale)return;e(u(t,{type:"tap"}))}}).unsubscribe,touchObserver:n}}),R=function(){function t(){e(this,t)}return i(t,null,[{key:"toExponential",value:function(t){var e=0,i=t<0?-1:1,n=Math.abs(t);if(0===n)return{value:0,exponential:0};if(n===1/0)return{value:1/0,exponential:1/0};if(n<1){for(;n<1;)e-=1,n*=10;n=Math.abs(t)/Math.pow(10,e)}else for(;10<n;)e+=1,n/=10;return{value:n*i,exponential:e}}},{key:"toIntWithExponential",value:function(t){var e=t.toString().split(".");return{value:+e.join(""),exponential:e[0].length-1-(e[1]?e[1].length:0)}}},{key:"cPrice",value:function(t){return+(+t).toFixed(this.pPrecision)}},{key:"cVolume",value:function(t){return+(+t).toFixed(this.volPrecision)}},{key:"cStaticVal",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2,i=this.toExponential(t),n=i.value.toFixed(Math.max(0,e-1));return 0<=i.exponential?n*Math.pow(10,i.exponential):n/Math.pow(10,-i.exponential)}},{key:"cVal",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2;return+(+t).toFixed(e)}},{key:"toFixed",value:function(t,e){if(0<=e)return(+t).toFixed(e);var i=this.toExponential(t),n=i.value,a=i.exponential;return(n.toFixed(Math.max(0,a+e))*Math.pow(10,a)).toFixed(0)}},{key:"getPrecision",value:function(t){var e=t.toString().split("."),i=_(e,2)[1];return i?i.length:0}}]),t}();function b(a,r){return(2<arguments.length&&void 0!==arguments[2]?arguments[2]:[5,10,30,60]).reduce(function(t,e){var n=Math.max(0,a-e+1),i=a-n+1;return t[e]=R.cPrice([].concat(x(Array(i))).reduce(function(t,e,i){return t+r[n+i][4]},0)/i),t},{})}function M(t){var r=t.index,e=t.dataArr,o=void 0===e?[]:e,i=t.currVal,s=void 0===i?void 0:i,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return(2<arguments.length&&void 0!==arguments[2]?arguments[2]:[12,26]).reduce(function(t,e){var i=void 0!==s?s:o[r][4];if(0==+r)t[e]=s?i:R.cPrice(i);else{var n=2/(e+1),a=n*i+(1-n)*(c[e]||i);t[e]=s?a:R.cPrice(a)}return t},{})}function D(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:7,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:2,a=b(t,e,[i])[i],r=function(t,n,a){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:5,r=Math.max(0,t-e+1),i=t-r+1;return Math.sqrt([].concat(x(Array(i))).reduce(function(t,e,i){return t+Math.pow(n[r+i][4]-a,2)},0)/i)}(t,e,a,i);return{MA:a,UP:R.cPrice(a+n*r),DOWN:R.cPrice(a-n*r)}}R.pPrecision=0,R.volPrecision=0;Object.freeze([Date.now(),1,1,1,1,1,1]);var I=Object.freeze([{name:"candles",value:"normal"},{name:"heikin-ashi",value:"average"}]),S=Object.freeze([{name:"time",value:6e4},{name:"1min",value:6e4},{name:"5min",value:3e5},{name:"15min",value:9e5},{name:"30min",value:18e5},{name:"1hour",value:36e5},{name:"4hour",value:144e5},{name:"1day",value:864e5},{name:"5day",value:432e6},{name:"1week",value:6048e5}]),w=Object.freeze({base:[{name:"MA",value:"MA",method:function(t,e){return b(t,e,[5,10,30,60])}},{name:"EMA",value:"EMA",method:function(t,e,i){return M({index:t,dataArr:e},i,[12,26])}},{name:"BOLL",value:"BOLL",params:"n = 7, k = 2",method:function(t,e){return D(t,e,7,2)}}].map(function(t){return h({},t,{type:"base"})}),technical:[{name:"MACD",value:"MACD",params:"short = 12, long = 26, nDEA = 9",method:function(t,e,i){return function(t,e){var i,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:12,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:26,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:9,s=M({index:t,dataArr:e},(f(i={},a,n.EMAShort),f(i,r,n.EMALong),i),[a,r]),c=s[a],u=s[r],h=R.cPrice(c-u),l=R.cPrice(M({index:t,currVal:h},f({},o,n.DEA),[o])[o]);return{EMAShort:c,EMALong:u,DIF:h,DEA:l,MACD:R.cPrice(2*(h-l))}}(t,e,i,12,26,9)},bar:["MACD"],ignore:["EMAShort","EMALong"],order:["MACD","DIF","DEA"]},{name:"KDJ",value:"KDJ",params:"n = 9",method:function(t,e,i){return function(t,r,e){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:9,n=h({K:50,D:50,J:50},e),o=Math.max(0,t-i+1),s={high:0,low:1/0};if([].concat(x(Array(t-o+1))).forEach(function(t,e){var i=_(r[o+e],4),n=i[2],a=i[3];s.high=Math.max(s.high,n),s.low=Math.min(s.low,a)}),s.high-s.low==0)return n;var a=(r[t][4]-s.low)/(s.high-s.low)*100,c=R.cVal(2/3*n.K+1/3*a),u=R.cVal(2/3*n.D+1/3*c);return{K:c,D:u,J:R.cVal(3*c-2*u)}}(t,e,i,9)}},{name:"RSI",value:"RSI",method:function(t,e,i){return function(i,s){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return(3<arguments.length&&void 0!==arguments[3]?arguments[3]:[5,10,14]).reduce(function(t,e){var r=Math.max(0,i-e+1),o={positive:0,negative:0};return[].concat(x(Array(i-r+1))).forEach(function(t,e){var i=s[r+e-1]||s[r+e],n=_(i,5)[4],a=_(s[r+e],5)[4]-n||0;0<=a?o.positive+=a:o.negative+=-a}),o.positive+o.negative===0?t[e]=n[e]||50:t[e]=R.cVal(o.positive/(o.positive+o.negative)*100),t},{})}(t,e,i,[5,10,14])}},{name:"WR",value:"WR",method:function(t,e,i){return function(i,s){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return(3<arguments.length&&void 0!==arguments[3]?arguments[3]:[6,10]).reduce(function(t,e){var r=Math.max(0,i-e+1),o={high:0,low:1/0};return[].concat(x(Array(i-r+1))).forEach(function(t,e){var i=_(s[r+e],4),n=i[2],a=i[3];o.high=Math.max(o.high,n),o.low=Math.min(o.low,a)}),o.high-o.low==0?t[e]=n[e]||50:t[e]=R.cVal((o.high-s[i][4])/(o.high-o.low)*100),t},{})}(t,e,i,[6,10])}}].map(function(t){return h({},t,{type:"technical"})})}),C=d(),O=75/C,z={price:50/C,volume:20/C,indicator:20/C},A=Object.freeze([{name:"Jan",value:1},{name:"Feb",value:2},{name:"Mar",value:3},{name:"Apr",value:4},{name:"May",value:5},{name:"Jun",value:6},{name:"Jul",value:7},{name:"Aug",value:8},{name:"Sep",value:9},{name:"Oct",value:10},{name:"Nov",value:11},{name:"Dec",value:12}]),T=(Object.freeze({down:0,halfUp:1,halfDown:2,up:3}),Object.freeze({unit:Math.round(1/C),candleWidth:Math.round(6/C),candleMinWidth:Math.round(1/C),candleMaxWidth:20*Math.round(1/C),textDelta:Math.round(8/C),markerLineLength:Math.round(4/C),markerWidth:Math.round(100/C),yMarkerHeight:Math.round(20/C),xMarkerHeight:Math.round(24/C),xHeightDelta:Math.round(8/C),defaultFontSize:Math.round(10/C),candleChartPaddingRight:Math.round(10/C),candleChartPaddingTop:Math.round(40/C),candleChartPaddingBottom:Math.round(40/C),indicatorChartHeight:Math.round(100/C),indicatorChartPaddingTop:Math.round(8/C),indicatorChartPaddingBottom:Math.round(8/C),volumeChartHeight:Math.round(100/C),volumeChartHeightTop:Math.round(8/C),volumeChartHeightBottom:Math.round(8/C),loadingSize:Math.round(64/C),legendTextMargin:Math.round(2/C)})),k=1e3/(window.ActiveXObject||"ActiveXObject"in window?50:60);Object.freeze([{value:12e4,bold:18e5,name:"2min"},{value:18e4,bold:18e5,name:"3min"},{value:24e4,bold:18e5,name:"4min"},{value:3e5,bold:18e5,name:"5min"},{value:6e5,bold:18e5,name:"10min"},{value:9e5,bold:36e5,name:"15min"},{value:18e5,bold:36e5,name:"30min"},{value:36e5,bold:864e5,name:"60min"},{value:54e5,mod:36e5,bold:864e5,name:"1.5hour"},{value:108e5,mod:36e5,bold:864e5,name:"3hour"},{value:216e5,mod:144e5,bold:864e5,name:"6hour"},{value:432e5,mod:144e5,bold:864e5,name:"12hour"},{value:864e5,mod:576e5,bold:"month",name:"1d"},{value:1728e5,mod:144e6,bold:"month",name:"2d"},{value:2592e5,mod:2304e5,bold:"month",name:"3d"},{value:3456e5,mod:3168e5,bold:"month",name:"4d"},{value:432e6,mod:4032e5,bold:"month",name:"5d"},{value:5184e5,mod:4896e5,bold:"month",name:"6d"},{value:6048e5,mod:576e6,bold:"month",name:"7d"},{value:6912e5,mod:6624e5,bold:"month",name:"8d"},{value:7776e5,mod:7488e5,bold:"month",name:"9d"},{value:864e6,mod:8352e5,bold:"month",name:"10d"},{value:1296e6,bold:"month",alias:"15d"},{value:2592e6,bold:"year",alias:"1mon"},{value:5184e6,bold:"year",alias:"2mon"},{value:7776e6,bold:"year",alias:"3mon"},{value:10368e6,bold:"year",alias:"4mon"}]);function P(t){return t.getBoundingClientRect()}var W=P,Y=function(t){var e=function(t){for(var e=P(t),i={pageLeft:e.left,pageTop:e.top},n=t;n.offsetParent;)e=P(n.offsetParent),i.pageLeft+=e.left,i.pageTop+=e.top;return i}(t);return{clientLeft:e.pageLeft-document.documentElement.scrollLeft,clientTop:e.pageTop-document.documentElement.scrollTop}};function F(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(e)return 0<=e?"up":"down";var i=_(t,5),n=i[1];return 0<=i[4]-n?"up":"down"}function H(){var t=+window.orientation;return 90!==t&&-90!==t}var X={name:"YAxis",props:{origin:Object,height:Number,heightRate:Number,range:Object,fontSize:Number,type:String},data:function(){return{textDelta:T.textDelta,markerLineLength:T.markerLineLength}},computed:{cOrigin:function(){var t=this.origin||{},e=t.x,i=void 0===e?0:e,n=t.y,a=void 0===n?0:n;return{x:Math.round(i),y:Math.round(a)}},cHeight:function(){return Math.round(this.height)},isVolume:function(){return"volume"===this.type},factor:function(){return Math.pow(10,this.range.power||0)},unitHeight:function(){return this.range&&this.heightRate?this.heightRate*this.factor:0},rangeOfTwo:function(){return this.range&&this.unitHeight?{max:Math.ceil(2*z[this.type]/this.unitHeight),min:Math.floor(z[this.type]/this.unitHeight)}:null},halfFontSize:function(){return this.fontSize/this.unitHeight},maxV:function(){if(this.range.max*this.range.min<0){var t=[Math.abs(this.range.max),Math.abs(this.range.min)].sort(),e=_(t,2),i=e[0];if(e[1]/i<5)return i/this.factor-this.halfFontSize}return this.isVolume&&this.range.min<0?1/0:null},rule:function(){var e=this;if(!this.rangeOfTwo)return null;var t=this.rangeOfTwo,i=t.max,a=t.min;if(i<=a)return null;var n=[].concat(x(Array(i-a))).reduce(function(t,e,i){var n=a+i;return!n||n%2!=0&&n%5!=0?t:t.concat([{value:n}])},[]);if(this.maxV){var r=n.filter(function(t){return t.value<e.maxV});return r[r.length-1]||n[0]||{value:1}}return n[n.length-1]||{value:1}},zero:function(){var t=this.range,e=t.max,i=t.min,n=t.precision;return this.calcCoord((0).toFixed(n),Math.round(e/this.factor),this.isVolume?Math.round(this.cOrigin.y+this.height+i*this.heightRate):0)},coords:function(){var o=this;if(!this.origin||!this.rule||!this.range||Object.keys(this.range).length<1)return[];var t=this.range,e=t.max,s=void 0===e?1:e,i=t.min,n=void 0===i?0:i,a=t.power,c=void 0===a?0:a,u=t.precision;return[].concat(x(Array(Math.ceil((s-n)/this.factor)))).reduce(function(t,e,i){if(Math.ceil(s/o.factor-i)%o.rule.value==0){var n=s-o.factor*i;if(o.maxV&&Math.abs(n/o.factor)<o.rule.value/2)return t;var a=o.calcCoord(0<-c?n.toFixed(u):R.toFixed(n,-c),i),r=a.textOrigin.y-o.fontSize;if(o.cOrigin.y<=r&&a.textOrigin.y<=o.cOrigin.y+o.height)return t.concat(a)}return t},this.maxV?[this.zero]:[])}},watch:{coords:{handler:function(){this.emitWidth()},immediate:!0},origin:{handler:function(){this.emitWidth()},immediate:!0}},methods:{emitWidth:function(){var i=this;0<this.coords.length&&this.origin&&this.$nextTick(function(){var t=i.$refs.yAxis[0]||i.$refs.yAxis;if(t){var e=W(t);i.$emit("yWidth",Math.floor(e.width+T.textDelta))}})},calcCoord:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n={x:+this.cOrigin.x,y:i||Math.floor(e*this.unitHeight+this.cOrigin.y)};return{text:t,origin:n,textOrigin:{x:Math.round(n.x+this.textDelta),y:Math.round(n.y+this.fontSize/2-T.unit)}}}}};var E,L,$,N,j,V=($=void 0,N=!(E={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.origin?i("g",{staticClass:"y-axis"},[i("rect",{staticClass:"axis-line y",attrs:{x:e.cOrigin.x,y:e.cOrigin.y,width:"1",height:e.cHeight}}),e._v(" "),i("g",{ref:"yAxis",staticClass:"axis-coords y"},e._l(e.coords,function(t){return i("g",{key:t.text,staticClass:"axis-coord y"},[i("rect",{staticClass:"axis-coord-marker y",attrs:{x:t.origin.x,y:t.origin.y,width:e.markerLineLength,height:"1"}}),e._v(" "),i("text",{staticClass:"axis-coord-text y",attrs:{x:t.textOrigin.x,y:t.textOrigin.y,"font-size":e.fontSize}},[e._v("\n        "+e._s(t.text)+"\n      ")])])})),e._v(" "),i("g",{staticClass:"axis-reflines y"},e._l(e.coords,function(t){return i("rect",{key:t.text,staticClass:"axis-refline y",attrs:{x:0,y:t.origin.y,width:e.cOrigin.x,height:"1"}})}))]):e._e()},staticRenderFns:[]}),(j=("function"==typeof(L=X)?L.options:L)||{}).__file="YAxis.vue",j.render||(j.render=E.render,j.staticRenderFns=E.staticRenderFns,j._compiled=!0,N&&(j.functional=!0)),j._scopeId=$,j),B={name:"Candles",components:{YAxis:V},props:{paths:{type:Object,default:function(){return{}}},indicator:Object,range:Object,heightRate:Number,showHLine:Boolean,svgWidth:Number,size:Object,fontSize:Number},data:function(){return{CandleTypes:I,indicatorLines:""}},computed:{yAxisOrigin:function(){return{x:this.size.width,y:0}},rectY:function(){return this.size.height-1}},methods:{}};var J,K,U,G,Z,q=(U=void 0,G=!(J={render:function(){var i=this,t=i.$createElement,n=i._self._c||t;return n("g",{staticClass:"candles"},[n("y-axis",{attrs:{origin:i.yAxisOrigin,height:i.size.height,heightRate:i.heightRate,range:i.range,fontSize:i.fontSize,type:"price"},on:{yWidth:function(t){i.$emit("yWidth",t)}}}),i._v(" "),i.paths.paths?n("g",{attrs:{"clip-path":"url(#chart-content-clip)"}},i._l(i.paths.paths,function(t,e){return n("path",{key:e,staticClass:"candle",class:e,attrs:{d:t}})})):i._e(),i._v(" "),i.paths.ind?n("g",{attrs:{"clip-path":"url(#chart-content-clip)"}},i._l(i.paths.ind,function(t,e){return n("path",{key:e,staticClass:"indicator-line",class:i.indicator.value+"-"+e,attrs:{d:t}})})):i._e(),i._v(" "),i.showHLine?n("rect",{staticClass:"h-line",attrs:{x:0,y:i.rectY,width:i.svgWidth,height:"1"}}):i._e()],1)},staticRenderFns:[]}),(Z=("function"==typeof(K=B)?K.options:K)||{}).__file="Candles.vue",Z.render||(Z.render=J.render,Z.staticRenderFns=J.staticRenderFns,Z._compiled=!0,G&&(Z.functional=!0)),Z._scopeId=U,Z);var Q=function(t){return t instanceof Date},tt=36e5,et=6e4,it=/[T ]/,nt=/:/,at=/^(\d{2})$/,rt=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],ot=/^(\d{4})/,st=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],ct=/^-(\d{2})$/,ut=/^-?(\d{3})$/,ht=/^-?(\d{2})-?(\d{2})$/,lt=/^-?W(\d{2})$/,dt=/^-?W(\d{2})-?(\d{1})$/,ft=/^(\d{2}([.,]\d*)?)$/,vt=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,mt=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,gt=/([Z+-].*)$/,pt=/^(Z)$/,yt=/^([+-])(\d{2})$/,xt=/^([+-])(\d{2}):?(\d{2})$/;function bt(t,e,i){e=e||0,i=i||0;var n=new Date(0);n.setUTCFullYear(t,0,4);var a=7*e+i+1-(n.getUTCDay()||7);return n.setUTCDate(n.getUTCDate()+a),n}var Mt=function(t,e){if(Q(t))return new Date(t.getTime());if("string"!=typeof t)return new Date(t);var i=(e||{}).additionalDigits;i=null==i?2:Number(i);var n=function(t){var e,i={},n=t.split(it);if(e=nt.test(n[0])?(i.date=null,n[0]):(i.date=n[0],n[1])){var a=gt.exec(e);a?(i.time=e.replace(a[1],""),i.timezone=a[1]):i.time=e}return i}(t),a=function(t,e){var i,n=rt[e],a=st[e];if(i=ot.exec(t)||a.exec(t)){var r=i[1];return{year:parseInt(r,10),restDateString:t.slice(r.length)}}if(i=at.exec(t)||n.exec(t)){var o=i[1];return{year:100*parseInt(o,10),restDateString:t.slice(o.length)}}return{year:null}}(n.date,i),r=a.year,o=function(t,e){if(null===e)return null;var i,n,a,r;if(0===t.length)return(n=new Date(0)).setUTCFullYear(e),n;if(i=ct.exec(t))return n=new Date(0),a=parseInt(i[1],10)-1,n.setUTCFullYear(e,a),n;if(i=ut.exec(t)){n=new Date(0);var o=parseInt(i[1],10);return n.setUTCFullYear(e,0,o),n}if(i=ht.exec(t)){n=new Date(0),a=parseInt(i[1],10)-1;var s=parseInt(i[2],10);return n.setUTCFullYear(e,a,s),n}if(i=lt.exec(t))return r=parseInt(i[1],10)-1,bt(e,r);if(i=dt.exec(t)){r=parseInt(i[1],10)-1;var c=parseInt(i[2],10)-1;return bt(e,r,c)}return null}(a.restDateString,r);if(o){var s,c=o.getTime(),u=0;return n.time&&(u=function(t){var e,i,n;if(e=ft.exec(t))return(i=parseFloat(e[1].replace(",",".")))%24*tt;if(e=vt.exec(t))return i=parseInt(e[1],10),n=parseFloat(e[2].replace(",",".")),i%24*tt+n*et;if(e=mt.exec(t)){i=parseInt(e[1],10),n=parseInt(e[2],10);var a=parseFloat(e[3].replace(",","."));return i%24*tt+n*et+1e3*a}return null}(n.time)),s=n.timezone?(h=n.timezone,(l=pt.exec(h))?0:(l=yt.exec(h))?(d=60*parseInt(l[2],10),"+"===l[1]?-d:d):(l=xt.exec(h))?(d=60*parseInt(l[2],10)+parseInt(l[3],10),"+"===l[1]?-d:d):0):(s=new Date(c+u).getTimezoneOffset(),new Date(c+u+s*et).getTimezoneOffset()),new Date(c+u+s*et)}var h,l,d;return new Date(t)};var Dt=function(t){var e=Mt(t),i=new Date(0);return i.setFullYear(e.getFullYear(),0,1),i.setHours(0,0,0,0),i};var It=function(t){var e=Mt(t);return e.setHours(0,0,0,0),e};var St=function(t,e){var i=It(t),n=It(e),a=i.getTime()-6e4*i.getTimezoneOffset(),r=n.getTime()-6e4*n.getTimezoneOffset();return Math.round((a-r)/864e5)};var wt=function(t){var e=Mt(t);return St(e,Dt(e))+1};var Ct=function(t,e){var i=e&&Number(e.weekStartsOn)||0,n=Mt(t),a=n.getDay(),r=(a<i?7:0)+a-i;return n.setDate(n.getDate()-r),n.setHours(0,0,0,0),n};var _t=function(t){return Ct(t,{weekStartsOn:1})};var Rt=function(t){var e=Mt(t),i=e.getFullYear(),n=new Date(0);n.setFullYear(i+1,0,4),n.setHours(0,0,0,0);var a=_t(n),r=new Date(0);r.setFullYear(i,0,4),r.setHours(0,0,0,0);var o=_t(r);return e.getTime()>=a.getTime()?i+1:e.getTime()>=o.getTime()?i:i-1};var Ot=function(t){var e=Rt(t),i=new Date(0);return i.setFullYear(e,0,4),i.setHours(0,0,0,0),_t(i)};var zt=function(t){var e=Mt(t),i=_t(e).getTime()-Ot(e).getTime();return Math.round(i/6048e5)+1};var At=function(t){if(Q(t))return!isNaN(t);throw new TypeError(toString.call(t)+" is not an instance of Date")};var Tt=["M","MM","Q","D","DD","DDD","DDDD","d","E","W","WW","YY","YYYY","GG","GGGG","H","HH","h","hh","m","mm","s","ss","S","SS","SSS","Z","ZZ","X","x"];var kt=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);var n=Tt.concat(e).sort().reverse();return new RegExp("(\\[[^\\[]*\\])|(\\\\)?("+n.join("|")+"|.)","g")};var Pt=function(){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Su","Mo","Tu","We","Th","Fr","Sa"],a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=["AM","PM"],s=["am","pm"],c=["a.m.","p.m."],t={MMM:function(t){return e[t.getMonth()]},MMMM:function(t){return i[t.getMonth()]},dd:function(t){return n[t.getDay()]},ddd:function(t){return a[t.getDay()]},dddd:function(t){return r[t.getDay()]},A:function(t){return 1<=t.getHours()/12?o[1]:o[0]},a:function(t){return 1<=t.getHours()/12?s[1]:s[0]},aa:function(t){return 1<=t.getHours()/12?c[1]:c[0]}};return["M","D","DDD","d","Q","W"].forEach(function(i){t[i+"o"]=function(t,e){return function(t){var e=t%100;if(20<e||e<10)switch(e%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"}(e[i](t))}}),{formatters:t,formattingTokensRegExp:kt(t)}},Wt={distanceInWords:function(){var a={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};return{localize:function(t,e,i){var n;return i=i||{},n="string"==typeof a[t]?a[t]:1===e?a[t].one:a[t].other.replace("{{count}}",e),i.addSuffix?0<i.comparison?"in "+n:n+" ago":n}}}(),format:Pt()};var Yt={M:function(t){return t.getMonth()+1},MM:function(t){return Ht(t.getMonth()+1,2)},Q:function(t){return Math.ceil((t.getMonth()+1)/3)},D:function(t){return t.getDate()},DD:function(t){return Ht(t.getDate(),2)},DDD:function(t){return wt(t)},DDDD:function(t){return Ht(wt(t),3)},d:function(t){return t.getDay()},E:function(t){return t.getDay()||7},W:function(t){return zt(t)},WW:function(t){return Ht(zt(t),2)},YY:function(t){return Ht(t.getFullYear(),4).substr(2)},YYYY:function(t){return Ht(t.getFullYear(),4)},GG:function(t){return String(Rt(t)).substr(2)},GGGG:function(t){return Rt(t)},H:function(t){return t.getHours()},HH:function(t){return Ht(t.getHours(),2)},h:function(t){var e=t.getHours();return 0===e?12:12<e?e%12:e},hh:function(t){return Ht(Yt.h(t),2)},m:function(t){return t.getMinutes()},mm:function(t){return Ht(t.getMinutes(),2)},s:function(t){return t.getSeconds()},ss:function(t){return Ht(t.getSeconds(),2)},S:function(t){return Math.floor(t.getMilliseconds()/100)},SS:function(t){return Ht(Math.floor(t.getMilliseconds()/10),2)},SSS:function(t){return Ht(t.getMilliseconds(),3)},Z:function(t){return Ft(t.getTimezoneOffset(),":")},ZZ:function(t){return Ft(t.getTimezoneOffset())},X:function(t){return Math.floor(t.getTime()/1e3)},x:function(t){return t.getTime()}};function Ft(t,e){e=e||"";var i=0<t?"-":"+",n=Math.abs(t),a=n%60;return i+Ht(Math.floor(n/60),2)+e+Ht(a,2)}function Ht(t,e){for(var i=Math.abs(t).toString();i.length<e;)i="0"+i;return i}var Xt=function(t,e,i){var n=e?String(e):"YYYY-MM-DDTHH:mm:ss.SSSZ",a=(i||{}).locale,r=Wt.format.formatters,o=Wt.format.formattingTokensRegExp;a&&a.format&&a.format.formatters&&(r=a.format.formatters,a.format.formattingTokensRegExp&&(o=a.format.formattingTokensRegExp));var s=Mt(t);return At(s)?function(t,e,i){var n,a,r,o=t.match(i),s=o.length;for(n=0;n<s;n++)a=e[o[n]]||Yt[o[n]],o[n]=a||((r=o[n]).match(/\[[\s\S]/)?r.replace(/^\[|]$/g,""):r.replace(/\\/g,""));return function(t){for(var e="",i=0;i<s;i++)o[i]instanceof Function?e+=o[i](t,Yt):e+=o[i];return e}}(n,r,o)(s):"Invalid Date"},Et={name:"CrossCurve",props:{origin:Object,textSize:{type:Object,default:function(){return{width:T.markerWidth,height:T.xMarkerHeight}}},chartSize:Object,fontSize:Number,time:Number,value:Number},data:function(){return{valueHeight:T.yMarkerHeight,textDelta:T.textDelta}},computed:{cOrigin:function(){var t=this.origin||{},e=t.x,i=void 0===e?0:e,n=t.y,a=void 0===n?0:n;return{x:Math.floor(i),y:Math.floor(a)}},lineOrigin:function(){return{x:this.cOrigin.x+.5,y:this.cOrigin.y+.5}},timeX:function(){return this.c(this.cOrigin.x,this.textSize.width)},timeTextY:function(){return Math.round(this.chartSize.height+this.fontSize+this.textDelta)},valueX:function(){return this.c(this.cOrigin.y,this.valueHeight)},valueText:function(){return{x:Math.round(this.chartSize.width+this.textDelta),y:Math.round(this.cOrigin.y+this.fontSize/2-T.unit)}}},methods:{format:Xt,c:function(t,e){return Math.floor(t-e/2)}}};var Lt,$t,Nt,jt,Vt,Bt=(Nt=void 0,jt=!(Lt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.chartSize&&t.origin?i("g",{staticClass:"cross-curve"},[i("line",{staticClass:"cross-h",attrs:{x1:"0",y1:t.lineOrigin.y,x2:t.chartSize.width,y2:t.lineOrigin.y}}),t._v(" "),i("line",{staticClass:"cross-v",attrs:{x1:t.lineOrigin.x,y1:0,x2:t.lineOrigin.x,y2:t.chartSize.height}}),t._v(" "),i("g",{staticClass:"cross-time"},[i("rect",{staticClass:"cross-time-bg",attrs:{x:t.timeX,y:t.chartSize.height,width:t.textSize.width,height:t.textSize.height}}),t._v(" "),i("text",{staticClass:"cross-time-text",attrs:{x:t.cOrigin.x,y:t.timeTextY,"font-size":t.fontSize,"text-anchor":"middle"}},[t._v(t._s(t.format(t.time,"YYYY-MM-DD HH:mm"))+"\n    ")])]),t._v(" "),i("g",{staticClass:"cross-value"},[i("rect",{staticClass:"cross-value-bg",attrs:{x:t.chartSize.width,y:t.valueX,width:t.textSize.width,height:t.valueHeight}}),t._v(" "),i("text",{staticClass:"cross-value-text",attrs:{x:t.valueText.x,y:t.valueText.y,"font-size":t.fontSize}},[t._v(t._s(t.value)+"\n    ")])])]):t._e()},staticRenderFns:[]}),(Vt=("function"==typeof($t=Et)?$t.options:$t)||{}).__file="CrossCurve.vue",Vt.render||(Vt.render=Lt.render,Vt.staticRenderFns=Lt.staticRenderFns,Vt._compiled=!0,jt&&(Vt.functional=!0)),Vt._scopeId=Nt,Vt),Jt={name:"CrossCurve",props:{y:Number,width:Number,textWidth:{type:Number,default:T.markerWidth},price:Number,isUp:Boolean,fontSize:Number},data:function(){return{valueHeight:T.yMarkerHeight,textDelta:T.textDelta}},computed:{cY:function(){return Math.floor(this.y)||0},lineY:function(){return this.cY+.5},rectY:function(){return this.c(this.cY,this.valueHeight)},priceText:function(){return{x:Math.round(this.width+this.textDelta),y:Math.round(this.cY+this.fontSize/2-T.unit)}}},watch:{},methods:{format:Xt,c:function(t,e){return Math.floor(t-e/2)}}};var Kt,Ut,Gt,Zt,qt,Qt=(Gt=void 0,Zt=!(Kt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{staticClass:"curr-price",class:t.isUp?"up":"down"},[i("line",{staticClass:"curr-price-line",class:t.red,attrs:{x1:"0",y1:t.lineY,x2:t.width,y2:t.lineY}}),t._v(" "),i("g",{staticClass:"curr-price-value"},[i("rect",{staticClass:"curr-price-value-bg",attrs:{x:t.width,y:t.rectY,width:t.textWidth,height:t.valueHeight}}),t._v(" "),i("text",{staticClass:"curr-price-value-text",attrs:{x:t.priceText.x,y:t.priceText.y,"font-size":t.fontSize}},[t._v(t._s(t.price)+"\n    ")])])])},staticRenderFns:[]}),(qt=("function"==typeof(Ut=Jt)?Ut.options:Ut)||{}).__file="CurrPrice.vue",qt.render||(qt.render=Kt.render,qt.staticRenderFns=Kt.staticRenderFns,qt._compiled=!0,Zt&&(qt.functional=!0)),qt._scopeId=Gt,qt),te={name:"Legends",inject:["lang","$tr"],props:{lastPrices:Array,nearestItem:Object,offset:Object,baseIndicator:Object,techIndicator:Object},computed:{priceItems:function(){return[{name:"open",alias:1},{name:"highest",alias:2},{name:"lowest",alias:3},{name:"close",alias:4}]},prices:function(){var t=[].concat(x(this.nearestItem&&this.nearestItem.prices||this.lastPrices||[]));return t.className=F(t),t},baseKeys:function(){return this.calcKeys(this.baseIndicator,this.nearestItem&&this.nearestItem.baseInd)},techKeys:function(){return this.calcKeys(this.techIndicator,this.nearestItem&&this.nearestItem.techInd)},wrapStyle:function(){return this.offset?{width:this.offset.width+"px"}:{}},volumeStyle:function(){return this.offset&&this.offset.children&&this.offset.children.volume?{top:this.offset.children.volume[0]+"px"}:{}},techStyle:function(){return this.offset&&this.offset.children&&this.offset.children.indicator?{top:this.offset.children.indicator[0]+"px"}:{}}},methods:{calcKeys:function(t,e){if(!t||!e)return[];var n=t.order,i=t.ignore,a=i?Object.keys(e).filter(function(e){return!i.some(function(t){return t===e})}):Object.keys(e);return n?a.sort(function(e,i){return Object.keys(n).find(function(t){return e===t})-Object.keys(n).find(function(t){return i===t})}):a},cTechKey:function(e){var t=this.techIndicator.bar;return t&&t.some(function(t){return e===t})?e+"-"+F([],+this.nearestItem.techInd[e]):e}}};var ee,ie,ne,ae,re,oe=(ne=void 0,ae=!(ee={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"legends",style:e.wrapStyle},[i("div",{staticClass:"candle-legends"},[i("div",{staticClass:"prices"},e._l(e.priceItems,function(t){return i("div",{key:t.name,staticClass:"item"},[e._v(e._s(e.$tr(t.name))+":\n        "),i("span",{staticClass:"value",class:e.prices.className},[e._v("\n          "+e._s(e.prices[t.alias])+"\n        ")])])})),e._v(" "),e.nearestItem&&e.nearestItem.baseInd?i("div",{staticClass:"base-indicator-legends"},[e.baseIndicator.params?[i("span",{staticClass:"name"},[e._v("\n          "+e._s(e.baseIndicator.value)+"("+e._s(e.baseIndicator.params)+")\n        ")]),e._v(" "),e._l(e.baseKeys,function(t){return i("div",{key:t,staticClass:"item"},[e._v(e._s(t)+":\n          "),i("span",{staticClass:"value",class:e.baseIndicator.value+"-"+t},[e._v("\n            "+e._s(e.nearestItem.baseInd[t])+"\n          ")])])})]:e._l(e.baseKeys,function(t){return i("div",{key:t,staticClass:"item"},[e._v(e._s(e.baseIndicator.value)+" "+e._s(t)+":\n          "),i("span",{staticClass:"value",class:e.baseIndicator.value+"-"+t},[e._v("\n            "+e._s(e.nearestItem.baseInd[t])+"\n          ")])])})],2):e._e()]),e._v(" "),i("div",{staticClass:"volume-legends",style:e.volumeStyle},[i("div",{staticClass:"item"},[e._v("Volume:\n      "),i("span",{staticClass:"value",class:e.prices.className},[e._v(e._s(e.prices[5]))])])]),e._v(" "),e.techIndicator?i("div",{staticClass:"tech-indicator-legends",style:e.techStyle},[e.techIndicator.params?[i("span",{staticClass:"name"},[e._v("\n        "+e._s(e.techIndicator.value)+"("+e._s(e.techIndicator.params)+")\n      ")]),e._v(" "),e.nearestItem&&e.nearestItem.techInd?e._l(e.techKeys,function(t){return i("div",{key:t,staticClass:"item"},[e._v(e._s(t)+":\n          "),i("span",{staticClass:"value",class:e.techIndicator.value+"-"+e.cTechKey(t)},[e._v("\n          "+e._s(e.nearestItem.techInd[t])+"\n        ")])])}):e._e()]:e.nearestItem&&e.nearestItem.techInd?e._l(e.techKeys,function(t){return i("div",{key:t,staticClass:"item"},[e._v(e._s(e.techIndicator.value)+" "+e._s(t)+":\n        "),i("span",{staticClass:"value",class:e.techIndicator.value+"-"+e.cTechKey(t)},[e._v("\n          "+e._s(e.nearestItem.techInd[t])+"\n        ")])])}):i("span",{staticClass:"name"},[e._v(e._s(e.techIndicator.value))])],2):e._e()])},staticRenderFns:[]}),(re=("function"==typeof(ie=te)?ie.options:ie)||{}).__file="Legends.vue",re.render||(re.render=ee.render,re.staticRenderFns=ee.staticRenderFns,re._compiled=!0,ae&&(re.functional=!0)),re._scopeId=ne,re),se={name:"Loading",props:{width:Number,height:Number}};var ce,ue,he,le,de,fe=(he=void 0,le=!(ce={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"loading",staticStyle:{"enable-background":"new 0 0 512 512"},attrs:{x:"0px",y:"0px",width:t.width,height:t.height,viewBox:"0 0 512 512","xml:space":"preserve"}},[i("circle",{staticClass:"loading-circle-1",attrs:{cx:"256",cy:"16",r:"16"}}),t._v(" "),i("circle",{staticClass:"loading-circle-2",attrs:{transform:"matrix(0.5 -0.866 0.866 0.5 146.2975 349.7025)",cx:"376",cy:"48.2",r:"16"}}),t._v(" "),i("circle",{staticClass:"loading-circle-3",attrs:{transform:"matrix(0.866 -0.5 0.5 0.866 -5.8564 250.1436)",cx:"463.8",cy:"136",r:"16"}}),t._v(" "),i("circle",{staticClass:"loading-circle-4",attrs:{cx:"496",cy:"256",r:"16"}}),t._v(" "),i("circle",{staticClass:"loading-circle-5",attrs:{transform:"matrix(0.5 -0.866 0.866 0.5 -93.7025 589.7025)",cx:"463.8",cy:"376",r:"16"}}),t._v(" "),i("circle",{staticClass:"loading-circle-6",attrs:{transform:"matrix(0.866 -0.5 0.5 0.866 -181.5486 250.1436)",cx:"376",cy:"463.8",r:"16"}}),t._v(" "),i("circle",{staticClass:"loading-circle-7",attrs:{cx:"256",cy:"496",r:"16"}}),t._v(" "),i("circle",{staticClass:"loading-circle-8",attrs:{transform:"matrix(0.5 -0.866 0.866 0.5 -333.7025 349.7025)",cx:"136",cy:"463.8",r:"16"}}),t._v(" "),i("circle",{staticClass:"loading-circle-9",attrs:{transform:"matrix(0.866 -0.5 0.5 0.866 -181.5486 74.4514)",cx:"48.2",cy:"376",r:"16"}}),t._v(" "),i("circle",{staticClass:"loading-circle-10",attrs:{cx:"16",cy:"256",r:"16"}}),t._v(" "),i("circle",{staticClass:"loading-circle-11",attrs:{transform:"matrix(0.5 -0.866 0.866 0.5 -93.7025 109.7025)",cx:"48.2",cy:"136",r:"16"}}),t._v(" "),i("circle",{staticClass:"loading-circle-12",attrs:{transform:"matrix(0.866 -0.5 0.5 0.866 -5.8564 74.4514)",cx:"136",cy:"48.2",r:"16"}})])},staticRenderFns:[]}),(de=("function"==typeof(ue=se)?ue.options:ue)||{}).__file="Loading.vue",de.render||(de.render=ce.render,de.staticRenderFns=ce.staticRenderFns,de._compiled=!0,le&&(de.functional=!0)),de._scopeId=he,de),ve=function(){function t(){e(this,t)}return i(t,null,[{key:"updateOriginData",value:function(t,a){var r=this,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"update";t.sort(function(t,e){return t[0]-e[0]});var o=!!this.currBaseIndicator,s=!!this.currTechIndicator;if("refresh"===e)this.originData=t,this.cData=[],this.initIndicators(),this.originData.forEach(function(t,e){if(r.cData[e]=r.cPrices(t,r.originData[e-1]||t),o){var i=r.currBaseIndicator.value;r.indicatorsData[i][e]=r.calcIndicator(r.currBaseIndicator,e,r.indicatorsData[i])}if(s){var n=r.currTechIndicator.value;r.indicatorsData[n][e]=r.calcIndicator(r.currTechIndicator,e,r.indicatorsData[n])}a&&a.apply(void 0,x(r.loopCbParam(e)))});else{for(var i=this.originData.length,n=t.length,c=[],u=i-n,h=0;h<n;h+=1){for(var l=!1,d=t[h],f=u;f<i;f+=1){var v=this.originData[f];if(d[0]===v[0]){c.push({originDataIndex:f,index:h}),this.originData[f]=d,l=!0;break}if(d[0]<v[0])break}l||(c.push({originDataIndex:this.originData.length,index:h}),this.originData.push(d))}c.forEach(function(t){var e=t.originDataIndex;if(r.cData[e]=r.cPrices(r.originData[e],r.originData[e-1]||r.originData[e]),o){var i=r.currBaseIndicator.value;r.indicatorsData[i][e]=r.calcIndicator(r.currBaseIndicator,e,r.indicatorsData[i])}if(s){var n=r.currTechIndicator.value;r.indicatorsData[n][e]=r.calcIndicator(r.currTechIndicator,e,r.indicatorsData[n])}a&&a.apply(void 0,x(r.loopCbParam(e)))})}this.originData=[].concat(x(this.originData))}},{key:"currIndicatorChange",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"base",n="curr"+("base"===i?"Base":"Tech")+"Indicator";t?this[n]&&this[n].value===t.value||(this[n]=t,this.indicatorsData[t.value]=this.calcIndicators(t,e,i)):this[n]=t}},{key:"cPrices",value:function(t,e){var i,n=(i=t,Array.isArray(i)?i:Array.from(i)),a=n[0],r=n[1],o=n[2],s=n[3],c=n[4],u=n[5],h=n.slice(6);[r,o,s,c].forEach(function(t){R.pPrecision=Math.max(R.pPrecision,R.getPrecision(t))}),R.volPrecision=Math.max(R.volPrecision,R.getPrecision(u));var l=e[1],d=e[4],f=R.cPrice((l+d)/2),v=R.cPrice((o+s+r+c)/4);return[a,f,Math.max(o,f,v),Math.min(s,f,v),v,u].concat(x(h))}},{key:"initIndicators",value:function(){if(this.currBaseIndicator){var t=this.currBaseIndicator.value;this.indicatorsData[t]=[]}if(this.currTechIndicator){var e=this.currTechIndicator.value;this.indicatorsData[e]=[]}}},{key:"calcIndicators",value:function(i){var n=this,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"base",o=[];return this.originData.forEach(function(t,e){o.push(n.calcIndicator(i,e,o)),a&&a.apply(void 0,x(n.loopCbParam(e,f({},r+"IndicatorData",o))))}),o}},{key:"calcIndicator",value:function(t,e,i){return(0,t.method)(e,this.originData,i[e-1])}},{key:"loopCbParam",value:function(t,e){var i=e.baseIndicatorData,n=e.techIndicatorData;return[t,this.originData,this.cData,{baseIndicatorData:i||this.currBaseIndicator&&this.indicatorsData[this.currBaseIndicator.value],techIndicatorData:n||this.currTechIndicator&&this.indicatorsData[this.currTechIndicator.value]}]}}]),t}();ve.originData=[],ve.cData=[],ve.currBaseIndicator=null,ve.currTechIndicator=null,ve.indicatorsData={};var me={langName:"zh-Hans",time:"分时","1min":"1分钟","5min":"5分钟","15min":"15分钟","30min":"30分钟","1hour":"1小时","4hour":"4小时","1day":"1天","5day":"5天","1week":"1周","1mon":"1月",Jan:"1月",Feb:"2月",Mar:"3月",Apr:"4月",May:"5月",Jun:"6月",Jul:"7月",Aug:"8月",Sep:"9月",Oct:"10月",Nov:"11月",Dec:"12月",yyyy:"{year}年",candles:"K线图","heikin-ashi":"平均K线图",open:"开",highest:"高",lowest:"低",close:"收",periods:"周期","candle-types":"K线类型",indicators:"指标","indicators.base":"基础指标","indicators.technical":"技术指标",MA:"MA",EMA:"EMA",BOLL:"BOLL",SAR:"SAR",MACD:"MACD",KDJ:"KDJ",StochRSI:"StochRSI",RSI:"RSI",DMI:"DMI",OBV:"OBV",DMA:"DMA",TRIX:"TRIX",BRAR:"BRAR",VR:"VR",EMV:"EMV",WR:"WR",ROC:"ROC",MTM:"MTM",PSY:"PSY","full-screen":"全屏","full-screen-exit":"退出全屏","data.no":"无数据","see.landscape":"请横屏观看","back-to-portrait":"返回竖屏"};var ge=function(){function t(){e(this,t)}return i(t,null,[{key:"addLangSource",value:function(t){if(!t.langName)throw new Error("Key `langName` in lang object is missed");this.langs[t.langName]=t,console.log("Your custom language set successful")}},{key:"$tr",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:"")||this.lang;if(!this.langs[i])throw new Error("(Lang.js) No language: "+i);var n=this.langs[i][t];return n?Object.keys(e).map(function(t){return{reg:new RegExp("{"+t+"}","g"),value:e[t]}}).reduce(function(t,e){return t.replace(e.reg,e.value)},n):(console.warn("(Lang.js) Key: "+t+" is not exist"),t)}},{key:"setLang",value:function(t){return this.langs[t]?this.lang=t:console.error("(Lang.js) No language: "+t),this.lang}}]),t}();ge.langs=[{langName:"en",time:"Realtime","1min":"1min","5min":"5min","15min":"15min","30min":"30min","1hour":"1hour","4hour":"4hour","1day":"1day","5day":"5day","1week":"1week","1mon":"1mon",Jan:"Jan",Feb:"Feb",Mar:"Mar",Apr:"Apr",May:"May",Jun:"Jun",Jul:"Jul",Aug:"Aug",Sep:"Sep",Oct:"Oct",Nov:"Nov",Dec:"Dec",yyyy:"{year}",candles:"Candles","heikin-ashi":"Heikin Ashi",open:"O",highest:"H",lowest:"L",close:"C",periods:"Periods","candle-types":"Candle Types",indicators:"Indicators","indicators.base":"Base Indicators","indicators.technical":"Technical Indicators",MA:"MA",EMA:"EMA",BOLL:"BOLL",SAR:"SAR",MACD:"MACD",KDJ:"KDJ",StochRSI:"StochRSI",RSI:"RSI",DMI:"DMI",OBV:"OBV",DMA:"DMA",TRIX:"TRIX",BRAR:"BRAR",VR:"VR",EMV:"EMV",WR:"WR",ROC:"ROC",MTM:"MTM",PSY:"PSY","full-screen":"Full Screen","full-screen-exit":"Exit Full Screen","data.no":"No Data","see.landscape":"Please see it on the horizontal screen","back-to-portrait":"Back to portrait"},me,{langName:"zh-Hant",time:"分時","1min":"1分鐘","5min":"5分鐘","15min":"15分鐘","30min":"30分鐘","1hour":"1小時","4hour":"4小時","1day":"1天","5day":"5天","1week":"1周","1mon":"1月",Jan:"1月",Feb:"2月",Mar:"3月",Apr:"4月",May:"5月",Jun:"6月",Jul:"7月",Aug:"8月",Sep:"9月",Oct:"10月",Nov:"11月",Dec:"12月",yyyy:"{year}年",candles:"K線圖","heikin-ashi":"平均K線圖",open:"開",highest:"高",lowest:"低",close:"收",periods:"週期","candle-types":"K線類型",indicators:"指標","indicators.base":"基礎指標","indicators.technical":"技術指標",MA:"MA",EMA:"EMA",BOLL:"BOLL",SAR:"SAR",MACD:"MACD",KDJ:"KDJ",StochRSI:"StochRSI",RSI:"RSI",DMI:"DMI",OBV:"OBV",DMA:"DMA",TRIX:"TRIX",BRAR:"BRAR",VR:"VR",EMV:"EMV",WR:"WR",ROC:"ROC",MTM:"MTM",PSY:"PSY","full-screen":"全屏","full-screen-exit":"退出全屏","data.no":"無數據","see.landscape":"請橫屏觀看","back-to-portrait":"返回豎屏"}].reduce(function(t,e){return t[e.langName]=e,t},{}),ge.lang=me.langName;var pe={provide:function(){return{lang:this.lang,$tr:this.$tr}},created:function(){this.lang=ge.lang},data:function(){return{lang:""}},watch:{lang:function(){this.resize()}},methods:{$tr:function(t,e){return ge.$tr(t,e,this.lang)},addLangSource:function(t){ge.addLangSource(t)},setLang:function(t){this.lang=ge.setLang(t)}}},ye={props:{data:{type:Array,default:function(){return[]}},updateData:{type:Array,default:function(){return[]}}},data:function(){return{myData:[],size:null,candleWidth:T.candleWidth,dragDeltaX:0,cData:[],originRange:null,candlePaths:null,volumePaths:null,techIndPaths:null}},computed:{contentWidth:function(){return this.chartSize?this.chartSize.width-T.candleChartPaddingRight:0},halfCandleWidth:function(){return Math.floor(this.candleWidth/2)},cCandleWidth:function(){return 2*this.halfCandleWidth+1},candleInterval:function(){return Math.ceil(this.cCandleWidth/3)-1},volumeWidth:function(){return this.cCandleWidth+this.candleInterval-1},volumeDeltaX:function(){return.5-Math.floor(this.candleInterval/2)},candleOffsetWidth:function(){return Math.round(this.cCandleWidth+this.candleInterval)},cutLength:function(){if(!this.size)return 0;var t=Math.round((this.contentWidth+this.dragDeltaX)/this.candleOffsetWidth);return Math.max(1,t)},sliceLength:function(){if(!this.size)return 0;var t=Math.round(this.contentWidth/this.candleOffsetWidth);return Math.max(1,t)},cutIndex:function(){return Math.max(0,this.myData.length-this.cutLength)},showData:function(){return this.size?this.myData.slice(this.cutIndex,this.cutIndex+this.sliceLength):[]},startX:function(){return this.sliceLength>this.myData.length?0:this.contentWidth-this.candleOffsetWidth*this.sliceLength},computedRange:function(){if(!this.originRange)return null;var t=this.originRange,e=t.price,i=t.volume,n=t.indicator;return{price:this.calcRange(e,this.candlesSize.height,{top:T.candleChartPaddingTop,bottom:T.candleChartPaddingBottom}),volume:this.calcRange(i,this.volumeHeight,{top:T.volumeChartHeightTop,bottom:T.volumeChartHeightBottom}),indicator:this.calcRange(n,this.indicatorHeight,{top:T.indicatorChartPaddingTop,bottom:T.indicatorChartPaddingBottom})}},heightRate:function(){if(!this.computedRange)return{};var t=this.computedRange,e=t.price,i=t.volume,n=t.indicator;return{price:this.calcHeightRate(e,this.candlesSize.height),volume:this.calcHeightRate(i,this.volumeHeight),indicator:this.calcHeightRate(n,this.indicatorHeight)}},currPrices:function(){var t=(this.myData||[]).length;return!this.myData||t<1||!this.computedRange||!this.heightRate.price?null:this.type===I[0].value?this.myData[t-1]:ve.cData[t-1]},currPrice:function(){if(!this.currPrices)return null;var t=_(this.currPrices,5),e=t[1],i=t[4],n=this.computedRange.price,a=n.max;return i<n.min||a<=i?null:{value:i,y:Math.ceil((n.max-i)*this.heightRate.price),isUp:0<=i-e}}},watch:{data:{handler:function(t){t&&(ve.updateOriginData(JSON.parse(JSON.stringify(t)),null,"refresh"),this.myData=JSON.parse(JSON.stringify(ve.originData)))},immediate:!0},updateData:{handler:function(t){t&&(ve.updateOriginData(JSON.parse(JSON.stringify(t)),null,"update"),this.myData=JSON.parse(JSON.stringify(ve.originData)))},immediate:!0},showData:function(t){var g=this,p=[],y=this.initRange(R.pPrecision),x=this.initRange(R.volPrecision,0),b=this.initRange(0),M=void 0,D=void 0,I=void 0,S=this.priceKey(),w=this.baseIndicator,C=this.techIndicator;t.forEach(function(t,e){var i=Math.max(t[1],t[2],t[4]),n=Math.min(t[1],t[3],t[4]),a=_(t,6)[5];i>y.max&&(y.max=i),n<y.min&&(y.min=n),a>x.max&&(x.max=a);var r=g.calcOriginX(t,e),o={prices:t,cPrices:ve.cData[g.cutIndex+e],originX:r};if(w){var s=g.dealInd(e,w),c=s.indItem,u=s.max,h=s.min;o.baseInd=c,h<y.min&&(y.min=h),u>y.max&&(y.max=u)}if(C){var l=g.dealInd(e,C),d=l.indItem,f=l.max,v=l.min,m=l.values;o.techInd=d,v<b.min&&(b.min=v),f>b.max&&(b.max=f),m.forEach(function(t){b.precision=Math.max(b.precision,R.getPrecision(t))})}p.push(o),M=g.setCandlePaths(M,o[S],r,o.baseInd,e),D=g.setVolumePaths(D,t,r),I=g.setTechPaths(I,t,r,o.techInd,e)}),t.length?(y.power=this.calcFactorForAxis(y.max,y.min,y.precision),x.power=this.calcFactorForAxis(x.max,x.min,x.precision),C&&(b.power=this.calcFactorForAxis(b.max,b.min,b.precision)),this.originRange=h({},this.originRange,{price:y,volume:x},C?{indicator:b}:{})):this.originRange=null,this.cData=p,this.candlePaths=M,this.volumePaths=D,this.techIndPaths=I},type:function(o){var s=this,c=void 0;this.showData.forEach(function(t,e){var i=s.cData[e],n=i.originX,a=i.cPrices,r=o===I[0].value?t:a;c=s.setCandlePaths(c,r,n,null,e)}),this.candlePaths=c?h({},this.candlePaths,{paths:c.paths}):null},period:function(t,e){t.value===e.value&&this.updatePaths()},heightRate:function(t,e){var i={price:t.price!==e.price,volume:t.volume!==e.volume,indicator:t.indicator!==e.indicator};(i.price||i.volume||i.indicator)&&this.updatePaths()},baseIndicator:{handler:function(l){var d=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!l||l&&l.value!==t.value)if(0<this.showData.length){var f={};if(l){var v=this.priceKey();ve.currIndicatorChange(l,function(t,e,i,n){var a=n.baseIndicatorData;if(d.indexIsInRange(t)){var r=t-d.cutIndex,o=d.cData[r].originX,s=d.dealInd(r,l,a),c=s.indItem,u=s.max,h=s.min;d.cData[r].baseInd=c,d.originRange&&d.originRange.price&&(h<d.originRange.price.min&&(d.originRange.price.min=h),u>d.originRange.price.max&&(d.originRange.price.max=u),f=d.setCandlePaths(f,d.cData[r][v],o,c,r,!0))}},"base")}else ve.currIndicatorChange(l,null,"base"),this.showData.forEach(function(t,e){d.cData[e].baseInd=void 0});this.cData=[].concat(x(this.cData)),this.candlePaths=h({},this.candlePaths,{ind:f.ind})}else ve.currIndicatorChange(l,null,"base")},immediate:!0},techIndicator:{handler:function(f,t){var v=this,m=!f&&t||f&&!t;if(m||f&&t&&f.value!==t.value)if(0<this.showData.length){var g=void 0,p=void 0,y=this.initRange();f?ve.currIndicatorChange(f,function(t,e,i,n){var a=n.techIndicatorData;if(v.indexIsInRange(t)){var r=t-v.cutIndex,o=e[t],s=v.cData[r].originX;m&&(g=v.setVolumePaths(g,o,s));var c=v.dealInd(r,f,a),u=c.indItem,h=c.max,l=c.min,d=c.values;v.cData[r].techInd=u,l<y.min&&(y.min=l),h>y.max&&(y.max=h),d.forEach(function(t){y.precision=Math.max(y.precision,R.getPrecision(t))}),p=v.setTechPaths(p,o,s,v.cData[r].techInd,r)}},"tech"):(ve.currIndicatorChange(f,null,"tech"),this.showData.forEach(function(t,e){var i=v.cData[e].originX;m&&(g=v.setVolumePaths(g,t,i)),v.cData[e].techInd=void 0})),this.cData=[].concat(x(this.cData)),f&&(y.power=this.calcFactorForAxis(y.max,y.min,y.precision),this.originRange=h({},this.originRange,{indicator:y})),m&&(this.volumePaths=g),this.techIndPaths=p}else ve.currIndicatorChange(f,null,"tech")},immediately:!0}},methods:{updatePaths:function(){var o=this,s=void 0,c=void 0,u=void 0,h=this.priceKey();this.showData.forEach(function(t,e){var i=o.cData[e],n=i.originX,a=i.baseInd,r=i.techInd;s=o.setCandlePaths(s,o.cData[e][h],n,a,e),c=o.setVolumePaths(c,t,n),u=o.setTechPaths(u,t,n,r,e)}),this.cData=[].concat(x(this.cData)),this.candlePaths=s,this.volumePaths=c,this.techIndPaths=u},initRange:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return{max:0,min:1<arguments.length&&void 0!==arguments[1]?arguments[1]:1/0,precision:t,power:0}},calcOriginX:function(t,e){return Math.round(this.candleOffsetWidth*e+this.startX)},calcFactorForAxis:function(t,e,i){var n=R.toExponential(t-e).exponential;return Math.max(-i,n-1)},calcRange:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{top:1,bottom:1};if(!t)return null;var n=t.max,a=t.min,r=t.power,o=t.precision;if(!this.size||!e)return{max:n,min:a,power:r,precision:o};var s=(n-a)/e||1;return{max:R.cVal(n+s*i.top,o),min:R.cVal(a-s*i.bottom,o),power:r,precision:o}},calcHeightRate:function(t,e){if(!e||!t)return 1;var i=t.max-t.min;return i?e/i:1},dealInd:function(t,e,i){var n=e.value,a=e.ignore,r=(i||ve.indicatorsData[n])[this.cutIndex+t],o=Object.keys(r).filter(function(t){return!a||!a.includes(t)}).sort(function(t,e){return r[t]-r[e]});return{keys:o,indItem:r,max:r[o[o.length-1]],min:r[o[0]],values:o.map(function(t){return r[t]})}},setCandlePaths:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],i=arguments[2],n=arguments[3],a=arguments[4],r=5<arguments.length&&void 0!==arguments[5]&&arguments[5];if(!this.heightRate.price)return t;var o=t.paths,s=void 0===o?{}:o,c=t.ind,u=void 0===c?"":c,h=this.dCandlePath(e,i,n,a,r),l=h.candle,d=h.line;if(!r&&l){var f=l.type,v=l.path;s[f]?s[f]+=v:s[f]=v}return d&&("object"===(void 0===d?"undefined":y(d))?u=Object.keys(d).reduce(function(t,e){return t[e]=(t[e]||"")+d[e],t},u||{}):u+=d),{paths:!r&&s,ind:u}},dCandlePath:function(t,e,i,n){var a=this,r=4<arguments.length&&void 0!==arguments[4]&&arguments[4],o=this.heightRate.price,s=void 0;if(!r){var c=_(t,5),u=c[1],h=c[2],l=c[3],d=c[4];if("time"!==(this.period||{}).name){var f=this.className(t),v=Math.ceil((this.computedRange.price.max-h)*o),m=[Math.ceil((h-Math.max(u,d))*o),Math.max(1,Math.ceil(Math.abs(u-d)*o)),Math.ceil((Math.min(u,d)-l)*o)];s={type:f,path:"M"+(this.halfCandleWidth+e)+","+v+" h1 v"+m[0]+" h"+this.halfCandleWidth+" v"+m[1]+" h"+-this.halfCandleWidth+" v"+m[2]+" h-1 v"+-m[2]+" h"+-this.halfCandleWidth+" v"+-m[1]+" h"+this.halfCandleWidth+" z\n\r"}}else{var g=Math.ceil((this.computedRange.price.max-d)*o);s={type:"line",path:(0===n?"M":"L")+(this.halfCandleWidth+e+.5)+","+(g+.5)+"\n\r"}}}if(!i)return{candle:s};var p=this.halfCandleWidth+e+.5;return{candle:s,line:"object"===(void 0===i?"undefined":y(i))?Object.keys(i).reduce(function(t,e){return t[e]=a.baseIndDot(n,p,i[e]),t},{}):this.baseIndDot(n,p,i)}},baseIndDot:function(t,e,i){var n=this.computedRange.price.max,a=this.heightRate.price;return(0===t?"M":"L")+e+","+(Math.ceil((n-i)*a)-.5)+"\n\r"},setVolumePaths:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],i=arguments[2];if(!this.heightRate.volume)return t;var n=h({},t),a=this.className(e),r=this.dVolumePath(e,i);return n[a]?n[a]+=r:n[a]=r,n},dVolumePath:function(t,e){var i=_(t,6)[5],n=this.computedRange.volume.min,a=this.heightRate.volume,r=Math.floor((i-Math.max(0,n))*a),o=this.volumesSize.height-r-Math.max(0,-n)*a;return"M"+(e+this.volumeDeltaX)+","+(Math.ceil(this.crossCurveRangeY.volume[0]+o)-.5)+" h"+this.volumeWidth+" v"+r+" h"+-this.volumeWidth+" z\n\r"},setTechPaths:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],i=arguments[2],n=arguments[3],a=arguments[4];if(!this.heightRate.indicator)return t;var r=h({},t),s=this.dTechIndPath(i,e,n,a);return s&&"object"===(void 0===s?"undefined":y(s))&&(r=Object.keys(s).reduce(function(t,e){var i=s[e],n=i.value,a=i.chartType,r=i.classType,o=r?e+"-"+r:e;return t[o]={chartType:a,classType:r,value:(t[o]&&t[o].value||"")+n},t},r||{})),r},dTechIndPath:function(t,e,i,n){var a=this;if(!i||!this.techIndicator)return"";var r=this.halfCandleWidth+t+.5;return"object"===(void 0===i?"undefined":y(i))?Object.keys(i).filter(function(t){return!a.techIndicator.ignore||!a.techIndicator.ignore.includes(t)}).reduce(function(t,e){return t[e]=a.techIndDot(n,r,i[e]||0,a.isBar(a.techIndicator,e)?"bar":"line"),t},{}):this.techIndDot(n,r,i,this.isBar()?"bar":"line")},techIndDot:function(t,e,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"line";if(!this.computedRange.indicator)return{};var a=this.computedRange.indicator.max,r=this.heightRate.indicator,o=Math.ceil((a-i)*r+this.crossCurveRangeY.indicator[0])-.5,s=Math.ceil(a*r+this.crossCurveRangeY.indicator[0])-.5;return"bar"===n?{chartType:n,value:"M"+e+","+o+" V"+s+"z\n\r",classType:F([],+i)}:{chartType:n,value:(0===t?"M":"L")+e+","+o+"\n\r"}},isBar:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return t&&t.bar&&(!e||t.bar.includes(e))},className:F,indexIsInRange:function(t){return this.cutIndex+this.sliceLength>t&&t>=this.cutIndex},priceKey:function(){return this.type===I[0].value?"prices":"cPrices"}}},xe={name:"TechIndicator",components:{YAxis:V},props:{paths:{type:Object,default:function(){return{}}},indicator:Object,range:Object,heightRate:Number,y:Number,size:Object,fontSize:Number},computed:{deltaX:function(){return Math.floor(this.candleWidth/2)},yAxisOrigin:function(){return{x:this.size.width,y:Math.round(this.y)}},keys:function(){var t=this;return this.indicator?this.indicator.order?Object.keys(this.paths).sort(function(e,i){return Object.keys(t.indicator.order).find(function(t){return e.includes(t)})-Object.keys(t.indicator.order).find(function(t){return i.includes(t)})}):Object.keys(this.paths):[]}}};var be,Me,De,Ie,Se,we=(De=void 0,Ie=!(be={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("g",{staticClass:"tech-indicator"},[i("y-axis",{attrs:{origin:e.yAxisOrigin,height:e.size.height,heightRate:e.heightRate,range:e.range,fontSize:e.fontSize,type:"indicator"},on:{yWidth:function(t){e.$emit("yWidth",t)}}}),e._v(" "),e.indicator?i("g",{attrs:{"clip-path":"url(#chart-content-clip)"}},e._l(e.keys,function(t){return i("path",{key:t,class:["indicator-"+e.paths[t].chartType,e.indicator.value+"-"+t,e.paths[t].classType],attrs:{d:e.paths[t].value}})})):e._e()],1)},staticRenderFns:[]}),(Se=("function"==typeof(Me=xe)?Me.options:Me)||{}).__file="TechIndicator.vue",Se.render||(Se.render=be.render,Se.staticRenderFns=be.staticRenderFns,Se._compiled=!0,Ie&&(Se.functional=!0)),Se._scopeId=De,Se),Ce={name:"icon-full-screen",props:{type:String,width:Number,height:Number}};var _e,Re,Oe,ze,Ae,Te={name:"ToolBar",inject:["lang","$tr"],components:{IconFullScreen:(Oe=void 0,ze=!(_e={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return"exit"!==e.type?i("svg",{staticClass:"icon-full-screen",staticStyle:{"enable-background":"new 0 0 128 128"},attrs:{viewBox:"0 0 128 128",width:e.width,height:e.height},on:{click:function(t){e.$emit("update:type","exit")}}},[i("path",{attrs:{d:"M112,128H80v-8h32c4.4,0,8-3.6,8-8V80h8v32C128,120.8,120.8,128,112,128C112,128,112,128,112,128z\n   M120,16c0-4.4-3.6-8-8-8c0,0,0,0,0,0H80V0h32c8.8,0,16,7.2,16,16v32h-8C120,48,120,16,120,16z\n   M0,112V80h8v32c0,4.4,3.6,8,8,8c0,0,0,0,0,0h32v8H16C7.2,128,0,120.8,0,112C0,112,0,112,0,112z\n   M8,16v32H0V16C0,7.2,7.2,0,16,0c0,0,0,0,0,0h32v8H16C11.6,8,8,11.6,8,16C8,16,8,16,8,16z"}})]):i("svg",{staticClass:"icon-full-screen",staticStyle:{"enable-background":"new 0 0 128 128"},attrs:{viewBox:"0 0 128 128",width:e.width,height:e.height},on:{click:function(t){e.$emit("update:type","")}}},[i("path",{attrs:{d:"M96,80h32v8H96c-4.4,0-8,3.6-8,8v32h-8V96C80,87.2,87.2,80,96,80C96,80,96,80,96,80z\n  M88,32c0,4.4,3.6,8,8,8c0,0,0,0,0,0l32,0v8H96c-8.8,0-16-7.2-16-16V0l8,0C88,0,88,32,88,32z\n  M48,96v32h-8V96c0-4.4-3.6-8-8-8c0,0,0,0,0,0H0l0-8h32C40.8,80,48,87.2,48,96C48,96,48,96,48,96z\n  M40,32V0l8,0v32c0,8.8-7.2,16-16,16c0,0,0,0,0,0H0l0-8l32,0C36.4,40,40,36.4,40,32C40,32,40,32,40,32z"}})])},staticRenderFns:[]}),(Ae=("function"==typeof(Re=Ce)?Re.options:Re)||{}).__file="IconFullScreen.vue",Ae.render||(Ae.render=_e.render,Ae.staticRenderFns=_e.staticRenderFns,Ae._compiled=!0,ze&&(Ae.functional=!0)),Ae._scopeId=Oe,Ae)},props:{isMobile:Boolean,periodVal:Object,isFull:Boolean,showIndicators:Array},data:function(){return{period:{value:S[3],options:S},candleType:{value:I[0],options:I},indicators:{value:[],options:w},fullScreen:""}},watch:{showIndicators:{handler:function(t){t&&(this.indicators.value=t)},immediate:!0},periodVal:{handler:function(e){this.period.value=S.find(function(t){return e&&t.value===e.value&&t.name===e.name})||S[0],e!==this.period.value.value&&this.emitPeriod(this.period.value)},immediate:!0},"candleType.value":{handler:function(t){this.$emit("candleType",t.value)},immediate:!0},"indicators.value":{handler:function(t){t!==this.showIndicators&&this.$emit("update:showIndicators",t)},immediate:!0},fullScreen:function(t){this.$emit("isFullScreen","exit"===t)},isFull:{handler:function(t){this.fullScreen=t?"exit":""},immediate:!0}},methods:{choseIndicator:function(t,e){var i=this,n=Object.keys(this.indicators.value).find(function(t){return i.indicators.value[t].type===e});n?this.indicators.value[n].value===t.value?this.indicators.value.splice(n,1):this.indicators.value.splice(n,1,t):this.indicators.value.push(t)},emitPeriod:function(t){this.$emit("period",t)}}};var ke,Pe,We,Ye,Fe,He=(We=void 0,Ye=!(ke={render:function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("div",{staticClass:"tool-bar"},[a("div",{staticClass:"periods",class:{mobile:n.isMobile}},[n.isMobile?[n._v("\n      "+n._s(n.$tr("periods"))+"\n      "),a("div",{staticClass:"options"},n._l(n.period.options,function(e){return a("button",{key:e.name,staticClass:"option",class:{selected:n.period.value===e||n.period.value.name===e.name&&n.period.value.value===e.value},on:{click:function(t){n.emitPeriod(e)}}},[n._v(n._s(n.$tr(e.name))+"\n        ")])}))]:n._l(n.period.options,function(e){return a("button",{key:e.name,staticClass:"period",class:{selected:n.period.value===e},on:{click:function(t){n.emitPeriod(e)}}},[n._v(n._s(n.$tr(e.name))+"\n      ")])})],2),n._v(" "),a("div",{staticClass:"candle-types"},[n._v("\n    "+n._s(n.$tr("candle-types"))+"\n    "),a("div",{staticClass:"options"},n._l(n.candleType.options,function(e){return a("button",{key:e.value,staticClass:"option",class:{selected:n.candleType.value===e},on:{click:function(t){n.candleType.value=e}}},[n._v(n._s(n.$tr(e.name))+"\n      ")])}))]),n._v(" "),a("div",{staticClass:"indicators"},[n._v("\n    "+n._s(n.$tr("indicators"))+"\n    "),a("div",{staticClass:"options"},[n._l(n.indicators.options,function(t,i,e){return[a("h5",{key:i+"-caption",staticClass:"caption"},[n._v(n._s(n.$tr("indicators."+i)))]),n._v(" "),a("div",{key:i+"-options",staticClass:"option-group"},n._l(t,function(e){return a("button",{key:e.value,staticClass:"option",class:{selected:n.indicators.value.some(function(t){return t.value===e.value})},on:{click:function(t){n.choseIndicator(e,i)}}},[n._v(n._s(n.$tr(e.name))+"\n          ")])})),n._v(" "),0===e?a("div",{key:i+"-decoration",staticClass:"decoration"}):n._e()]})],2)]),n._v(" "),a("div",{staticClass:"icon-full"},[a("span",{staticClass:"tool-tip"},[n._v(n._s(n.$tr("exit"===n.fullScreen?"full-screen-exit":"full-screen")))]),n._v(" "),a("icon-full-screen",{attrs:{type:n.fullScreen},on:{"update:type":function(t){n.fullScreen=t}}})],1)])},staticRenderFns:[]}),(Fe=("function"==typeof(Pe=Te)?Pe.options:Pe)||{}).__file="ToolBar.vue",Fe.render||(Fe.render=ke.render,Fe.staticRenderFns=ke.staticRenderFns,Fe._compiled=!0,Ye&&(Fe.functional=!0)),Fe._scopeId=We,Fe),Xe={name:"Volume",components:{YAxis:V},props:{paths:{type:Object,default:function(){return{}}},range:Object,heightRate:Number,y:Number,size:Object,svgWidth:Number,showHLine:Boolean,fontSize:Number},computed:{yAxisOrigin:function(){return{x:this.size.width,y:Math.round(this.y)}},rectY:function(){return Math.round(this.y+this.size.height-1)}}};var Ee,Le,$e,Ne,je,Ve=($e=void 0,Ne=!(Ee={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("g",{staticClass:"volumes",staticStyle:{overflow:"hidden"}},[i("y-axis",{attrs:{origin:e.yAxisOrigin,height:e.size.height,heightRate:e.heightRate,range:e.range,fontSize:e.fontSize,type:"volume"},on:{yWidth:function(t){e.$emit("yWidth",t)}}}),e._v(" "),i("g",{attrs:{"clip-path":"url(#chart-content-clip)"}},e._l(e.paths,function(t,e){return i("path",{key:e,staticClass:"volume",class:e,attrs:{d:t}})})),e._v(" "),e.showHLine?i("rect",{staticClass:"h-line",attrs:{x:0,y:e.rectY,width:e.svgWidth,height:"1"}}):e._e()],1)},staticRenderFns:[]}),(je=("function"==typeof(Le=Xe)?Le.options:Le)||{}).__file="Volumes.vue",je.render||(je.render=Ee.render,je.staticRenderFns=Ee.staticRenderFns,je._compiled=!0,Ne&&(je.functional=!0)),je._scopeId=$e,je);var Be=function(t){return Mt(t).getDate()};var Je=function(t){return Mt(t).getMonth()},Ke={name:"XAxis",inject:["lang","$tr"],props:{y:Number,width:Number,period:Number,candleWidth:Number,candleInterval:Number,data:{type:Array,default:function(){return[]}},showLength:Number,fontSize:Number},data:function(){return{acceptedIntervals:[{value:12e4,bold:18e5,name:"2min"},{value:18e4,bold:18e5,name:"3min"},{value:24e4,bold:18e5,name:"4min"},{value:3e5,bold:18e5,name:"5min"},{value:6e5,bold:18e5,name:"10min"},{value:9e5,bold:36e5,name:"15min"},{value:18e5,bold:36e5,name:"30min"},{value:36e5,bold:864e5,name:"60min"},{value:54e5,mod:36e5,bold:864e5,name:"1.5hour"},{value:108e5,mod:36e5,bold:864e5,name:"3hour"},{value:216e5,mod:144e5,bold:864e5,name:"6hour"},{value:432e5,mod:144e5,bold:864e5,name:"12hour"},{value:864e5,mod:576e5,bold:"month",name:"1d"},{value:1728e5,mod:144e6,bold:"month",name:"2d"},{value:2592e5,mod:2304e5,bold:"month",name:"3d"},{value:3456e5,mod:3168e5,bold:"month",name:"4d"},{value:432e6,mod:4032e5,bold:"month",name:"5d"},{value:5184e5,mod:4896e5,bold:"month",name:"6d"},{value:6048e5,mod:576e6,bold:"month",name:"7d"},{value:6912e5,mod:6624e5,bold:"month",name:"8d"},{value:7776e5,mod:7488e5,bold:"month",name:"9d"},{value:864e6,mod:8352e5,bold:"month",name:"10d"},{value:1296e6,bold:"month",alias:"15d"},{value:2592e6,bold:"year",alias:"1mon"},{value:5184e6,bold:"year",alias:"2mon"},{value:7776e6,bold:"year",alias:"3mon"},{value:10368e6,bold:"year",alias:"4mon"}],textDelta:T.textDelta,markerLineLength:T.markerLineLength}},computed:{cY:function(){return Math.round(this.y)},cWidth:function(){return Math.round(this.width)},delta:function(){return Math.floor(this.candleWidth/2)},candleOffsetWidth:function(){return this.candleInterval+this.candleWidth},distanceOfTwo:function(){return{max:Math.floor(2*O/this.candleOffsetWidth),min:Math.ceil(O/this.candleOffsetWidth)}},showRule:function(){var i=this;if(!this.period)return this.acceptedIntervals[this.acceptedIntervals.length-1];var n=this.period,t=this.acceptedIntervals.filter(function(t){var e=t.value/n;return i.distanceOfTwo.max>=e&&e>=i.distanceOfTwo.min});return t[t.length-1]||this.acceptedIntervals[this.acceptedIntervals.length-1]},coords:function(){var s=this,t=this.data.length;if(!(this.showLength&&this.period&&t&&this.periodMatchedData()))return[];var e=this.showRule,c=e.value,i=e.mod,u=void 0===i?0:i,h=e.alias,n=this.data[t-1],a={time:n.prices[0],x:n.originX};return this.data.concat([].concat(x(Array(Math.max(0,+this.showLength-this.data.length)))).reduce(function(t){return a.time=+a.time+s.period,a.x+=s.candleOffsetWidth,t.concat([{prices:[a.time],originX:a.x}])},[])).reduce(function(t,e){var i=e.prices,n=e.originX,a=_(i,1)[0];if(h){var r=Be(+a);if("15d"===h)return 15===r||1===r?t.concat([s.calcCoord(i,n)]):t;var o=+h.match(/^(\d)mon/)[1];return(Je(+a)+1)%o===u&&24*r*60*60*1e3<=s.period?t.concat([s.calcCoord(i,n)]):t}return a%c===u?t.concat([s.calcCoord(i,n)]):t},[])}},watch:{coords:{handler:function(){this.emitHeight()},immediate:!0}},methods:{periodMatchedData:function(){var e=this;if(1<this.data.length){var t=function(t){return e.data[t].prices[0]};return t(1)-t(0)===this.period}return!0},calcCoord:function(t,e){return{prices:t,origin:{x:e+this.delta,y:this.cY},text:this.text(+t[0]),bold:this.bold(+t[0]),textY:Math.round(this.cY+this.fontSize+this.textDelta)}},bold:function(t){var e=void 0,i=this.showRule.bold;if("number"==typeof i)e=t%i==0;else{var n=Xt(t,"YYYY-MM-DD HH:mm");e="month"===i?/\s{4}-\s{2}-01 00:00/.test(n):/\s{4}-01-01 00:00/.test(n)}return e?"bold":""},text:function(t){var e=this.showRule,i=e.name,n=e.alias,a=void 0;return n||/d/.test(i)||"00:00"===(a=Xt(t,"HH:mm"))?(!n||n&&/d/.test(n))&&"01"!==(a=Xt(t,"DD"))?a:"01"===(a=Xt(t,"MM"))?this.$tr("yyyy",{year:Xt(t,"YYYY")}):this.$tr(A[Je(t)].name):a},emitHeight:function(){var i=this;0<this.coords.length&&this.$nextTick(function(){var t=i.$refs.xAxis[0]||i.$refs.xAxis;if(t){var e=W(t);i.$emit("xHeight",Math.floor(e.height+T.textDelta))}})}}};var Ue,Ge,Ze,qe,Qe,ti,ei,ii,ni,ai,ri={name:"Index",mixins:[pe,ye],components:{ToolBar:He,Candles:q,XAxis:(Ze=void 0,qe=!(Ue={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.period?i("g",{staticClass:"x-axis"},[i("rect",{staticClass:"axis-line x",attrs:{x:"0",y:e.cY,width:e.cWidth,height:"1"}}),e._v(" "),i("g",{staticClass:"axis-coords x"},e._l(e.coords,function(t){return i("g",{key:t.prices[0],ref:"xAxis",refInFor:!0,staticClass:"axis-coord x",class:t.bold,attrs:{"clip-path":"url(#chart-content-clip)"}},[i("rect",{staticClass:"axis-coord-marker x",attrs:{x:t.origin.x,y:t.origin.y,width:"1",height:e.markerLineLength}}),e._v(" "),i("text",{staticClass:"axis-coord-text x",attrs:{x:t.origin.x,y:t.textY,"font-size":e.fontSize,"text-anchor":"middle"}},[e._v("\n        "+e._s(t.text)+"\n      ")])])})),e._v(" "),i("g",{staticClass:"axis-refline x"},e._l(e.coords,function(t){return i("rect",{key:t.prices[0],staticClass:"axis-coord-marker x",attrs:{x:t.origin.x,y:0,width:"1",height:e.cY}})}))]):e._e()},staticRenderFns:[]}),(Qe=("function"==typeof(Ge=Ke)?Ge.options:Ge)||{}).__file="XAxis.vue",Qe.render||(Qe.render=Ue.render,Qe.staticRenderFns=Ue.staticRenderFns,Qe._compiled=!0,qe&&(Qe.functional=!0)),Qe._scopeId=Ze,Qe),CrossCurve:Bt,Volumes:Ve,Loading:fe,CurrPrice:Qt,TechIndicator:we,Legends:oe},props:{fontSize:{type:Number,default:T.defaultFontSize},markerWidth:{type:Number,default:T.markerWidth},loading:Boolean,period:{type:Object,default:function(){return S[3]}},isMobile:Boolean,showIndicators:Array},data:function(){return{toolbarSize:{},loadingSize:T.loadingSize,textDelta:T.textDelta,axis:{x:{height:0},y:{width:0}},type:I[0].value,showVolumes:!0,isFullScreen:!1,dragOrigin:null,indicators:[],crossCurveInfo:null,touchRes:null,scaleOrigin:{time:0,scale:1},isPortrait:H(),svgOffset:null,nearestItem:null}},computed:{volumeHeight:function(){var t=(this.size||{}).height,e=void 0===t?1/0:t;return Math.min(T.volumeChartHeight,Math.floor(1.5*e/10))},indicatorHeight:function(){var t=(this.size||{}).height,e=void 0===t?1/0:t;return Math.min(T.indicatorChartHeight,Math.floor(1.5*e/10))},viewBox:function(){return this.size?"0 0 "+this.size.width+" "+this.size.height:"0 0 0 0"},chartSize:function(){return this.size?{width:Math.round(this.size.width-this.axis.y.width),height:Math.round(this.size.height-this.axis.x.height)}:null},baseIndicator:function(){return this.indicators.filter(function(t){return"base"===t.type})[0]},techIndicator:function(){return this.indicators.filter(function(t){return"technical"===t.type})[0]},candlesSize:function(){return this.size?{width:this.chartSize.width,height:Math.round(this.chartSize.height-(this.showVolumes?this.volumeHeight:0)-(this.techIndicator?this.indicatorHeight:0))}:null},volumesSize:function(){return this.size?{width:this.chartSize.width,height:this.volumeHeight}:null},indicatorSize:function(){return this.size?{width:this.chartSize.width,height:this.indicatorHeight}:null},textSize:function(){return{width:this.markerWidth,height:Math.round(this.axis.x.height-this.textDelta/2)}},crossCurveRangeY:function(){return{candle:[0,this.candlesSize.height],volume:[this.candlesSize.height,Math.round(this.candlesSize.height+this.volumeHeight)],indicator:[Math.round(this.candlesSize.height+this.volumeHeight),this.chartSize.height]}},maxDeltaX:function(){return Math.max(Math.ceil((this.cCandleWidth+this.candleInterval)*this.myData.length-this.candlesSize.width),0)},legendsOffset:function(){return{width:this.chartSize.width,children:this.crossCurveRangeY}}},watch:{showIndicators:{handler:function(e){e&&(this.indicators=[].concat(x(w.base),x(w.technical)).filter(function(t){return e.includes(t.value)}))},immediate:!0},isFullScreen:function(){this.resize()},size:function(t){t&&this.bindTouch()}},methods:{reset:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.axis.y.width=0,this.dragDeltaX=0,t&&(this.originRange=null,R.pPrecision=0,R.volPrecision=0)},getSize:function(){var o=this;this.$nextTick(function(){var t=W(o.$refs.wrap),e=t.width,i=void 0===e?0:e,n=t.height,a=void 0===n?0:n;o.svgOffset=Y(o.$refs.kline),o.toolbarSize=W(o.$refs.toolbar.$el);var r=o.toolbarSize.height||0;o.size={width:+Math.floor(i),height:+Math.floor(a-r)}})},setXAxisHeight:function(t){this.axis.x.height=t},setYAxisWidth:function(t){this.axis.y.width=Math.max(this.axis.y.width,t)},resize:function(){this.isPortrait=H(),this.isMobile&&this.isFullScreen&&this.isPortrait||this.getSize()},startDrag:function(t){this.dragOrigin={x:t.offsetX,y:t.offsetY,dragDeltaX:this.dragDeltaX,time:t.timeStamp}},mouseMove:function(t){this.markerMove(t),this.isMobile||this.klineMove(t)},endDrag:function(){this.dragOrigin=null},klineMove:function(t){if(this.dragOrigin){if(t.timeStamp-this.dragOrigin.time<k)return;this.dragOrigin.time=t.timeStamp;var e=void 0!==t.deltaX?t.deltaX:t.offsetX-this.dragOrigin.x;this.dragOrigin.dragDeltaX===this.maxDeltaX&&0<e?(this.$emit("getMorePreData"),this.dragOrigin=null):(this.dragDeltaX=Math.round(e+this.dragOrigin.dragDeltaX),this.dragDeltaX=Math.min(Math.max(0,this.dragDeltaX),this.maxDeltaX))}},markerMove:function(t){if(this.cData&&0<this.cData.length){var a={x:t.offsetX,y:t.offsetY};if(0<=a.x&&a.x<=this.chartSize.width&&0<=a.y&&a.y<=this.chartSize.height){var r=this.crossCurveRangeY,e=Object.keys(r).find(function(t){var e=_(r[t],2),i=e[0],n=e[1];return i<=a.y&&a.y<=n}),i=this.findNearest(this.cData,a.x),n=_(r[e],1)[0],o="candle"===e?"price":e,s=this.heightRate[o],c=this.computedRange[o];this.nearestItem=h({},this.cData[i.index],{prices:this.type===I[0].value?this.cData[i.index].prices:this.cData[i.index].cPrices}),this.crossCurveInfo={origin:{x:i.x,y:Math.floor(a.y)},time:i.time,value:void 0!==s?R.cVal(c.max-(a.y-n)/s,c.precision):n}}else this.resetCrossCurveInfo()}},resetCrossCurveInfo:function(){this.crossCurveInfo=null,this.nearestItem=null},findNearest:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(t.length<1)return{index:i,x:0,time:0};var n=Math.floor((t.length-1)/2),a=this.calcX(t[n].originX);if(t.length<2)return{index:i,x:a,time:t[0].prices[0]};if(2!==t.length)return 0<a-e?this.findNearest(t.slice(0,n+1),e,i):a-e<0?this.findNearest(t.slice(n),e,i+n):{index:i+n,x:a,time:t[n].prices[0]};var r=this.calcX(t[1].originX);return 0<Math.abs(r-e)-Math.abs(a-e)?{index:i,x:a,time:t[0].prices[0]}:{index:i+1,x:r,time:t[1].prices[0]}},calcX:function(t){return Math.floor(t+this.cCandleWidth/2)},mouseScale:function(t){this.scale(0<t.deltaY?-1:1,t.timeStamp)},scale:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(!(e-this.scaleOrigin.time<k)){this.scaleOrigin={time:e,scale:i};var n=this.candleWidth+2*t,a=this.candleOffsetWidth;n<T.candleMinWidth?this.candleWidth=T.candleMinWidth:n>T.candleMaxWidth?this.candleWidth=T.candleMaxWidth:this.candleWidth=n;var r=this.candleOffsetWidth/a;1!==r&&(this.dragOrigin={timeStamp:0,dragDeltaX:this.dragDeltaX},this.klineMove({deltaX:this.dragDeltaX*(r-1),timeStamp:100}),this.dragOrigin=null)}},bindTouch:function(){var s=this;this.isMobile&&this.$nextTick(function(){s.touchRes||(s.touchRes=[l(s.$refs.cursor,function(t){var e=t.center,i=e.clientX,n=e.clientY,a=s.svgOffset,r=a.clientLeft,o=a.clientTop;s.markerMove({offsetX:i-r,offsetY:n-o})}),n(s.$refs.cursor,function(t){var e=t.type,i=t.timeStamp;if("panMove"===e){s.resetCrossCurveInfo();var n=t.centerDelta.deltaX;s.klineMove({deltaX:n,timeStamp:i})}else"panStart"===e?s.dragOrigin={dragDeltaX:s.dragDeltaX,timeStamp:i}:"panEnd"===e&&(s.dragOrigin=null)}),a(s.$refs.cursor,function(t){var e=t.pinchScale,i=t.timeStamp;1!==e&&(s.resetCrossCurveInfo(),s.scale(e>s.scaleOrigin.scale?1:-1,i,e))},!0)])})}},beforeMount:function(){window.addEventListener("mousemove",this.resetCrossCurveInfo),window.addEventListener("resize",this.resize)},mounted:function(){this.getSize()},beforeDestroy:function(){window.removeEventListener("mousemove",this.resetCrossCurveInfo),window.removeEventListener("resize",this.resize),this.touchRes&&this.touchRes.forEach(function(t){return t.unsubscribe()})}};return ii=void 0,ni=!(ti={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"wrap",staticClass:"kline-wrap",class:{"full-screen":e.isFullScreen&&!(e.isMobile&&e.isPortrait),mobile:e.isMobile}},[i("tool-bar",{ref:"toolbar",attrs:{isMobile:e.isMobile,isFull:e.isFullScreen,periodVal:e.period,showIndicators:e.indicators},on:{"update:showIndicators":function(t){e.indicators=t},period:function(t){e.$emit("update:period",t)},candleType:function(t){e.type=t},isFullScreen:function(t){e.isFullScreen=t}}}),e._v(" "),i("div",{staticClass:"content-wrap"},[i("svg",{ref:"kline",staticClass:"kline",attrs:{width:e.size&&e.size.width,height:e.size&&e.size.height,viewBox:e.viewBox}},[e.chartSize?[i("defs",[i("clipPath",{attrs:{id:"chart-content-clip"}},[i("rect",{attrs:{x:"0",y:"0",width:e.chartSize.width,height:e.size.height}})])]),e._v(" "),e.period?i("x-axis",{attrs:{data:e.cData,showLength:e.sliceLength,candleWidth:e.cCandleWidth,candleInterval:e.candleInterval,y:e.chartSize.height,width:e.candlesSize.width,period:e.period.value,fontSize:e.fontSize},on:{xHeight:e.setXAxisHeight}}):e._e(),e._v(" "),e.candlesSize&&e.computedRange?i("candles",{attrs:{size:e.candlesSize,indicator:e.baseIndicator,paths:e.candlePaths,range:e.computedRange.price,heightRate:e.heightRate.price,showHLine:!0,svgWidth:e.size.width,fontSize:e.fontSize},on:{yWidth:e.setYAxisWidth}}):e._e(),e._v(" "),e.showVolumes&&e.volumesSize&&e.computedRange?i("volumes",{attrs:{paths:e.volumePaths,range:e.computedRange.volume,heightRate:e.heightRate.volume,y:e.crossCurveRangeY.volume[0],size:e.volumesSize,svgWidth:e.size.width,showHLine:!!e.techIndicator,fontSize:e.fontSize},on:{yWidth:e.setYAxisWidth}}):e._e(),e._v(" "),e.techIndicator&&e.computedRange?i("tech-indicator",{attrs:{indicator:e.techIndicator,paths:e.techIndPaths,range:e.computedRange.indicator,heightRate:e.heightRate.indicator,y:e.crossCurveRangeY.indicator[0],size:e.indicatorSize,fontSize:e.fontSize},on:{yWidth:e.setYAxisWidth}}):e._e(),e._v(" "),e.currPrice?i("curr-price",{attrs:{y:e.currPrice.y,width:e.candlesSize.width,price:e.currPrice.value,fontSize:e.fontSize,textWidth:e.markerWidth,isUp:e.currPrice.isUp}}):e._e(),e._v(" "),e.axis.x.height&&e.crossCurveInfo?i("cross-curve",{attrs:{origin:e.crossCurveInfo.origin,time:e.crossCurveInfo.time,value:e.crossCurveInfo.value,fontSize:e.fontSize,textSize:e.textSize,chartSize:e.chartSize}}):e._e(),e._v(" "),i("rect",{ref:"cursor",staticClass:"cursor",attrs:{x:"0",y:"0",width:e.chartSize.width,height:e.chartSize.height},on:{mousedown:e.startDrag,mousemove:function(t){return t.stopPropagation(),e.mouseMove(t)},mouseup:e.endDrag,wheel:function(t){return t.stopPropagation(),t.preventDefault(),e.mouseScale(t)}}})]:e._e()],2),e._v(" "),e.size?i("legends",{attrs:{lastPrices:e.currPrices,nearestItem:e.nearestItem,offset:e.legendsOffset,baseIndicator:e.baseIndicator,techIndicator:e.techIndicator}}):e._e(),e._v(" "),e.loading?i("div",{staticClass:"loading-wrap"},[i("loading",{attrs:{width:e.loadingSize,height:e.loadingSize}})],1):e.myData.length<1?i("div",{staticClass:"no-data"},[i("div",{staticClass:"text"},[e._v(e._s(e.$tr("data.no")))])]):e.isMobile&&e.isFullScreen&&e.isPortrait?i("div",{staticClass:"see-landscape"},[i("div",{staticClass:"text"},[e._v("\n        "+e._s(e.$tr("see.landscape"))),i("br"),e._v(" "),i("button",{staticClass:"back-to-portrait",on:{click:function(t){e.isFullScreen=!1}}},[e._v(e._s(e.$tr("back-to-portrait")))])])]):e._e()],1)],1)},staticRenderFns:[]}),(ai=("function"==typeof(ei=ri)?ei.options:ei)||{}).__file="Index.vue",ai.render||(ai.render=ti.render,ai.staticRenderFns=ti.staticRenderFns,ai._compiled=!0,ni&&(ai.functional=!0)),ai._scopeId=ii,ai});
//# sourceMappingURL=index.js.map
