!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Kline=t()}(this,function(){"use strict";function d(){var e=Array.prototype.filter.call(document.getElementsByTagName("meta"),function(e){return"viewport"===e.getAttribute("name")});if(e.length<1)return 1;var t=(e=e[e.length-1]).getAttribute("content").match(/initial-scale\s*=\s*([^,]+)(,|$)/);return(t?+t[1]:1)||1}function a(){return Math.random().toFixed(6)}function s(e,t){var n=this;n.observer=e,n.id=t,n.unsubscribe=function(e){var t=Object.keys(n.observer.subscribes).find(function(e){return n.observer.subscribes[e].id===n.id});n.observer.subscribes.splice(t,1),"function"==typeof e&&e(),console.log("simple-observer: Subscription: Unsubscribe success!")}}var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},v=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};function m(e,t){return Math.sqrt(Math.pow(e.pageX-t.pageX,2)+Math.pow(e.pageY-t.pageY,2))}function f(e,t){return Math.atan((e.pageY-t.pageY)/(e.pageX-t.pageX))/Math.PI*180}function g(t,n){function e(e){return n?(+t[e]+ +n[e])/2:+t[e]}return{clientX:e("clientX"),clientY:e("clientY"),pageX:e("pageX"),pageY:e("pageY"),screenX:e("screenX"),screenY:e("screenY")}}var p=function(e){if("function"!=typeof e)throw new Error("simple-observer: Observer: Params generator of constructor is invalid, must be a function");var r=this;r.subscribes=[],r.subscribe=function(e){for(var t=a(),n=0,i=function(e){return r.subscribes[e].id===t};n=Object.keys(r.subscribes).find(i),t=a(),void 0!==n;);return r.subscribes.push({id:t,callback:e}),new s(r,t)},e(function(){var t=arguments;r.subscribes.map(function(e){e.callback.apply(r,t)})})};function o(t,s){var n=null;window.TouchObservers||(window.TouchObservers=[]);var o=window.TouchObservers.find(function(e){return e.el===t});if(o&&o.Observer){if(!s)return o;o.unbind()}else{var e=new p(function(e){n=e});o?(o.Observer=e,o.next=n):(o={Observer:e,next:n,el:t},window.TouchObservers.push(o))}var u=null,c=null,h=0,l=0;function i(e){u=Array.prototype.map.call(e.targetTouches,function(e){return e}),c=0<u.length?g(u[0],u[1]):null,l=1<u.length?f(u[0],u[1]):0,h=1<u.length?m(u[0],u[1]):0;var t={type:e.type,touches:u,center:c,angle:l,distance:h,timeStamp:e.timeStamp,centerDelta:null,deltaAngle:0,pinchScale:1,event:e};"function"==typeof s?s(t):s&&e.preventDefault(),o.next(t)}function r(e){var t=u.map(function(t){return Array.prototype.find.call(e.changedTouches,function(e){return e.identifier===t.identifier})}).filter(function(e){return!!e}),n=0<t.length?g(t[0],t[1]):null,i=1<t.length?f(t[0],t[1]):0,r=1<t.length?m(t[0],t[1]):0,a={type:e.type,touches:t,center:n,angle:i,distance:r,timeStamp:e.timeStamp,centerDelta:function(e,t){var n=d();if(!e||!t)return{deltaX:0,deltaY:0,deltaDistance:0,direction:"",windowScale:n};var i=e.pageX-t.pageX,r=e.pageY-t.pageY,a=Math.sqrt(Math.pow(i,2)+Math.pow(r,2)),s=Math.abs(i)<=30/n?"":0<i?"right":"left",o=Math.abs(r)<=30/n?"":0<r?"bottom":"top";return{deltaX:i,deltaY:r,deltaDistance:a,direction:s+(s&&o?"-":"")+o,windowScale:n}}(n,c),deltaAngle:i-l,pinchScale:r/h||1,event:e};"function"==typeof s?s(a):s&&e.preventDefault(),o.next(a)}function a(){t.removeEventListener("touchstart",i),t.removeEventListener("touchmove",r),t.removeEventListener("touchend",r)}return t.addEventListener("touchstart",i),t.addEventListener("touchmove",r),t.addEventListener("touchend",r),o.unbind=a,o.destroy=function(){a(),o.Observer=null},o}function e(i){return function(e,t,n){return"function"==typeof e&&(n=t||null,t=e,e=window),i(e,t,n)}}function u(e){return e[0].toUpperCase()+e.slice(1)}var c=Object.assign||function(){return Array.prototype.map.call(arguments,function(e){return"object"===(void 0===e?"undefined":t(e))?e:{}}).reduce(function(t,n){return Object.keys(n).forEach(function(e){t[e]=n[e]}),t},{})};var i=e(function(e,t,n){var i=o(e,n);return{unsubscribe:i.Observer.subscribe(function(e){1===e.touches.length&&t(c(e,{type:"pan"+u(e.type.replace("touch",""))}))}).unsubscribe,touchObserver:i}});var h=e(function(e,t,n){var i=o(e,n),r=0;return{unsubscribe:i.Observer.subscribe(function(e){if("touchend"===e.type&&0===r)return t(c(e,{type:"pinchEnd"})),void r++;2<=e.touches.length&&(t(c(e,{type:"pinch"+u(e.type.replace("touch",""))})),r=0)}).unsubscribe,touchObserver:i}}),x=S,y=S,b=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,w=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function S(e){e||(e={});var t=e.ua;return t||"undefined"==typeof navigator||(t=navigator.userAgent),t&&t.headers&&"string"==typeof t.headers["user-agent"]&&(t=t.headers["user-agent"]),"string"==typeof t&&(e.tablet?w.test(t):b.test(t))}x.isMobile=y;Object.freeze([Date.now(),1,1,1,1,1,1]);var M=Object.freeze([{name:"candles",value:"normal"},{name:"heikin-ashi",value:"average"}]),$=Object.freeze([{name:"time",value:6e4},{name:"1min",value:6e4},{name:"5min",value:3e5},{name:"15min",value:9e5},{name:"30min",value:18e5},{name:"1hour",value:36e5},{name:"4hour",value:144e5},{name:"1day",value:864e5},{name:"5day",value:432e6},{name:"1week",value:6048e5}]),D=Object.freeze({base:[{name:"MA",value:"MA"},{name:"EMA",value:"EMA"},{name:"BOLL",value:"BOLL"},{name:"SAR",value:"SAR"}],technical:[{name:"MACD",value:"MACD"},{name:"KDJ",value:"KDJ"},{name:"StochRSI",value:"StochRSI"},{name:"RSI",value:"RSI"},{name:"DMI",value:"DMI"},{name:"OBV",value:"OBV"},{name:"DMA",value:"DMA"},{name:"TRIX",value:"TRIX"},{name:"BRAR",value:"BRAR"},{name:"VR",value:"VR"},{name:"EMV",value:"EMV"},{name:"WR",value:"WR"},{name:"ROC",value:"ROC"},{name:"MTM",value:"MTM"},{name:"PSY",value:"PSY"}]}),z=d(),C=75/z,R=30/z,_=Object.freeze([{name:"Jan",value:1},{name:"Feb",value:2},{name:"Mar",value:3},{name:"Apr",value:4},{name:"May",value:5},{name:"Jun",value:6},{name:"Jul",value:7},{name:"Aug",value:8},{name:"Sep",value:9},{name:"Oct",value:10},{name:"Nov",value:11},{name:"Dec",value:12}]),O=Object.freeze({down:0,halfUp:1,halfDown:2,up:3}),A=Object.freeze({candleWidth:Math.round(6/z),candleMinWidth:2*Math.round(1/z),textDelta:Math.round(8/z),markerLineLength:Math.round(4/z),markerWidth:Math.round(100/z),yMarkerHeight:Math.round(20/z),xMarkerHeight:Math.round(24/z),xHeightDelta:Math.round(8/z),defaultFontSize:Math.round(10/z),candleChartPadding:Math.round(10/z),indicatorChartHeight:Math.round(100/z),indicatorChartPadding:Math.round(10/z),volumeChartHeight:Math.round(100/z),volumeChartPaddingBottom:Math.round(5/z),loadingSize:Math.round(64/z)}),T=1e3/(window.ActiveXObject||"ActiveXObject"in window?50:60),Y=x();function I(e){return e.getBoundingClientRect()}function k(e){var t=l(e,5),n=t[1];return 0<t[4]-n?"up":"down"}function W(){var e=+window.orientation;return 90!==e&&-90!==e}var H=20,F=1,E=1e6,N=-7,X=21,L="[big.js] ",P=L+"Invalid ",j=P+"decimal places",B=P+"rounding mode",V=L+"Division by zero",J={},U=void 0,G=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function K(e,t,n,i){var r=e.c,a=e.e+t+1;if(a<r.length){if(1===n)i=5<=r[a];else if(2===n)i=5<r[a]||5==r[a]&&(i||a<0||r[a+1]!==U||1&r[a-1]);else if(3===n)i=i||!!r[0];else if(i=!1,0!==n)throw Error(B);if(a<1)r.length=1,r[0]=i?(e.e=-t,1):e.e=0;else{if(r.length=a--,i)for(;9<++r[a];)r[a]=0,a--||(++e.e,r.unshift(1));for(a=r.length;!r[--a];)r.pop()}}else if(n<0||3<n||n!==~~n)throw Error(B);return e}function Z(e,t,n,i){var r,a,s=e.constructor,o=!e.c[0];if(n!==U){if(n!==~~n||n<(3==t)||E<n)throw Error(3==t?P+"precision":j);for(n=i-(e=new s(e)).e,e.c.length>++i&&K(e,n,s.RM),2==t&&(i=e.e+n+1);e.c.length<i;)e.c.push(0)}if(r=e.e,n=(a=e.c.join("")).length,2!=t&&(1==t||3==t&&i<=r||r<=s.NE||r>=s.PE))a=a.charAt(0)+(1<n?"."+a.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)a="0"+a;a="0."+a}else if(0<r)if(++r>n)for(r-=n;r--;)a+="0";else r<n&&(a=a.slice(0,r)+"."+a.slice(r));else 1<n&&(a=a.charAt(0)+"."+a.slice(1));return e.s<0&&(!o||4==t)?"-"+a:a}J.abs=function(){var e=new this.constructor(this);return e.s=1,e},J.cmp=function(e){var t,n=this.c,i=(e=new this.constructor(e)).c,r=this.s,a=e.s,s=this.e,o=e.e;if(!n[0]||!i[0])return n[0]?r:i[0]?-a:0;if(r!=a)return r;if(t=r<0,s!=o)return o<s^t?1:-1;for(a=(s=n.length)<(o=i.length)?s:o,r=-1;++r<a;)if(n[r]!=i[r])return n[r]>i[r]^t?1:-1;return s==o?0:o<s^t?1:-1},J.div=function(e){var t=this.constructor,n=this.c,i=(e=new t(e)).c,r=this.s==e.s?1:-1,a=t.DP;if(a!==~~a||a<0||E<a)throw Error(j);if(!i[0])throw Error(V);if(!n[0])return new t(0*r);var s,o,u,c,h,l=i.slice(),d=s=i.length,m=n.length,f=n.slice(0,s),v=f.length,g=e,p=g.c=[],x=0,y=a+(g.e=this.e-e.e)+1;for(g.s=r,r=y<0?0:y,l.unshift(0);v++<s;)f.push(0);do{for(u=0;u<10;u++){if(s!=(v=f.length))c=v<s?1:-1;else for(h=-1,c=0;++h<s;)if(i[h]!=f[h]){c=i[h]>f[h]?1:-1;break}if(!(c<0))break;for(o=v==s?i:l;v;){if(f[--v]<o[v]){for(h=v;h&&!f[--h];)f[h]=9;--f[h],f[v]+=10}f[v]-=o[v]}for(;!f[0];)f.shift()}p[x++]=c?u:++u,f[0]&&c?f[v]=n[d]||0:f=[n[d]]}while((d++<m||f[0]!==U)&&r--);return p[0]||1==x||(p.shift(),g.e--),y<x&&K(g,a,t.RM,f[0]!==U),g},J.eq=function(e){return!this.cmp(e)},J.gt=function(e){return 0<this.cmp(e)},J.gte=function(e){return-1<this.cmp(e)},J.lt=function(e){return this.cmp(e)<0},J.lte=function(e){return this.cmp(e)<1},J.minus=J.sub=function(e){var t,n,i,r,a=this,s=a.constructor,o=a.s,u=(e=new s(e)).s;if(o!=u)return e.s=-u,a.plus(e);var c=a.c.slice(),h=a.e,l=e.c,d=e.e;if(!c[0]||!l[0])return l[0]?(e.s=-u,e):new s(c[0]?a:0);if(o=h-d){for((i=(r=o<0)?(o=-o,c):(d=h,l)).reverse(),u=o;u--;)i.push(0);i.reverse()}else for(n=((r=c.length<l.length)?c:l).length,o=u=0;u<n;u++)if(c[u]!=l[u]){r=c[u]<l[u];break}if(r&&(i=c,c=l,l=i,e.s=-e.s),0<(u=(n=l.length)-(t=c.length)))for(;u--;)c[t++]=0;for(u=t;o<n;){if(c[--n]<l[n]){for(t=n;t&&!c[--t];)c[t]=9;--c[t],c[n]+=10}c[n]-=l[n]}for(;0===c[--u];)c.pop();for(;0===c[0];)c.shift(),--d;return c[0]||(e.s=1,c=[d=0]),e.c=c,e.e=d,e},J.mod=function(e){var t,n=this,i=n.constructor,r=n.s,a=(e=new i(e)).s;if(!e.c[0])throw Error(V);return n.s=e.s=1,t=1==e.cmp(n),n.s=r,e.s=a,t?new i(n):(r=i.DP,a=i.RM,i.DP=i.RM=0,n=n.div(e),i.DP=r,i.RM=a,this.minus(n.times(e)))},J.plus=J.add=function(e){var t,n=this,i=n.constructor,r=n.s,a=(e=new i(e)).s;if(r!=a)return e.s=-a,n.minus(e);var s=n.e,o=n.c,u=e.e,c=e.c;if(!o[0]||!c[0])return c[0]?e:new i(o[0]?n:0*r);if(o=o.slice(),r=s-u){for((t=0<r?(u=s,c):(r=-r,o)).reverse();r--;)t.push(0);t.reverse()}for(o.length-c.length<0&&(t=c,c=o,o=t),r=c.length,a=0;r;o[r]%=10)a=(o[--r]=o[r]+c[r]+a)/10|0;for(a&&(o.unshift(a),++u),r=o.length;0===o[--r];)o.pop();return e.c=o,e.e=u,e},J.pow=function(e){var t=this,n=new t.constructor(1),i=n,r=e<0;if(e!==~~e||e<-1e6||1e6<e)throw Error(P+"exponent");for(r&&(e=-e);1&e&&(i=i.times(t)),e>>=1;)t=t.times(t);return r?n.div(i):i},J.round=function(e,t){var n=this.constructor;if(e===U)e=0;else if(e!==~~e||e<-E||E<e)throw Error(j);return K(new n(this),e,t===U?n.RM:t)},J.sqrt=function(){var e,t,n,i=this,r=i.constructor,a=i.s,s=i.e,o=new r(.5);if(!i.c[0])return new r(i);if(a<0)throw Error(L+"No square root");for(s=(e=0===(a=Math.sqrt(i+""))||a===1/0?((t=i.c.join("")).length+s&1||(t+="0"),s=((s+1)/2|0)-(s<0||1&s),new r(((a=Math.sqrt(t))==1/0?"1e":(a=a.toExponential()).slice(0,a.indexOf("e")+1))+s)):new r(a)).e+(r.DP+=4);n=e,e=o.times(n.plus(i.div(n))),n.c.slice(0,s).join("")!==e.c.slice(0,s).join(""););return K(e,r.DP-=4,r.RM)},J.times=J.mul=function(e){var t,n=this.constructor,i=this.c,r=(e=new n(e)).c,a=i.length,s=r.length,o=this.e,u=e.e;if(e.s=this.s==e.s?1:-1,!i[0]||!r[0])return new n(0*e.s);for(e.e=o+u,a<s&&(t=i,i=r,r=t,u=a,a=s,s=u),t=new Array(u=a+s);u--;)t[u]=0;for(o=s;o--;){for(s=0,u=a+o;o<u;)s=t[u]+r[o]*i[u-o-1]+s,t[u--]=s%10,s=s/10|0;t[u]=(t[u]+s)%10}for(s?++e.e:t.shift(),o=t.length;!t[--o];)t.pop();return e.c=t,e},J.toExponential=function(e){return Z(this,1,e,e)},J.toFixed=function(e){return Z(this,2,e,this.e+e)},J.toPrecision=function(e){return Z(this,3,e,e-1)},J.toString=function(){return Z(this)},J.valueOf=J.toJSON=function(){return Z(this,4)};var q=function n(){function i(e){var t=this;if(!(t instanceof i))return e===U?n():new i(e);e instanceof i?(t.s=e.s,t.e=e.e,t.c=e.c.slice()):function(e,t){var n,i,r;if(0===t&&1/t<0)t="-0";else if(!G.test(t+=""))throw Error(P+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,-1<(n=t.indexOf("."))&&(t=t.replace(".","")),0<(i=t.search(/e/i))?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),r=t.length,i=0;i<r&&"0"==t.charAt(i);)++i;if(i==r)e.c=[e.e=0];else{for(;0<r&&"0"==t.charAt(--r););for(e.e=n-i-1,e.c=[],n=0;i<=r;)e.c[n++]=+t.charAt(i++)}}(t,e),t.constructor=i}return i.prototype=J,i.DP=H,i.RM=F,i.NE=N,i.PE=X,i.version="5.2.2",i}(),Q={langName:"zh",time:"分时","1min":"1min","5min":"5min","15min":"15min","30min":"30min","1hour":"1hour","4hour":"4hour","1day":"1day","5day":"5day","1week":"1week","1mon":"1mon",Jan:"1月",Feb:"2月",Mar:"3月",Apr:"4月",May:"5月",Jun:"6月",Jul:"7月",Aug:"8月",Sep:"9月",Oct:"10月",Nov:"11月",Dec:"12月",yyyy:"{year}年",candles:"K线图","heikin-ashi":"平均K线图",periods:"周期","candle-types":"K线类型",indicators:"指标","indicators.base":"基础指标","indicators.technical":"技术指标",MA:"MA",EMA:"EMA",BOLL:"BOLL",SAR:"SAR",MACD:"MACD",KDJ:"KDJ",StochRSI:"StochRSI",RSI:"RSI",DMI:"DMI",OBV:"OBV",DMA:"DMA",TRIX:"TRIX",BRAR:"BRAR",VR:"VR",EMV:"EMV",WR:"WR",ROC:"ROC",MTM:"MTM",PSY:"PSY","full-screen":"全屏","full-screen-exit":"退出全屏","data.no":"无数据","see.landscape":"请横屏观看"};var ee=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"addLangSource",value:function(e){if(!e.langName)throw new Error("Key `langName` in lang object is missed");this.langs[e.langName]=e,console.log("Your custom language set successful")}},{key:"$t",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!this.langs[this.lang])throw new Error("(Lang.js) No language: "+this.lang);var n=this.langs[this.lang][e];return n?Object.keys(t).map(function(e){return{rule:new RegExp("{"+e+"}","g"),value:t[e]}}).reduce(function(e,t){return e.replace(t.reg,t.value)},n):(console.warn("(Lang.js) Key: "+e+" is not exist"),e)}},{key:"setLang",value:function(e){if(!this.langs[e])throw new Error("(Lang.js) No language: "+e);this.lang=e}}]),e}();ee.langs=[{langName:"en",time:"time","1min":"1min","5min":"5min","15min":"15min","30min":"30min","1hour":"1hour","4hour":"4hour","1day":"1day","5day":"5day","1week":"1week","1mon":"1mon",Jan:"Jan",Feb:"Feb",Mar:"Mar",Apr:"Apr",May:"May",Jun:"Jun",Jul:"Jul",Aug:"Aug",Sep:"Sep",Oct:"Oct",Nov:"Nov",Dec:"Dec",yyyy:"{year}",candles:"Candles","heikin-ashi":"Heikin Ashi",periods:"Periods","candle-types":"Candle Types",indicators:"Indicators","indicators.base":"Base Indicators","indicators.technical":"Technical Indicators",MA:"MA",EMA:"EMA",BOLL:"BOLL",SAR:"SAR",MACD:"MACD",KDJ:"KDJ",StochRSI:"StochRSI",RSI:"RSI",DMI:"DMI",OBV:"OBV",DMA:"DMA",TRIX:"TRIX",BRAR:"BRAR",VR:"VR",EMV:"EMV",WR:"WR",ROC:"ROC",MTM:"MTM",PSY:"PSY","full-screen":"Full Screen","full-screen-exit":"Exit Full Screen","data.no":"No Data","see.landscape":"Please see it on the horizontal screen"},Q].reduce(function(e,t){return e[t.langName]=t,e},{}),ee.lang=Q.langName;var te={created:function(){this.$lang=ee},data:function(){return{$lang:null}},methods:{$num:function(e){return new q(e)}}},ne={props:{data:{type:Array,default:function(){return[]}}},data:function(){return{size:null,candleWidth:A.candleWidth,dragDeltaX:0,cData:[],originRange:null}},computed:{contentWidth:function(){return this.chartSize?+this.$num(this.chartSize.width).minus(A.candleChartPadding):0},cCandleWidth:function(){return+this.$num(this.$num(this.candleWidth).div(2).round(0,O.down)).times(2).plus(1)},candleInterval:function(){return Math.round(+this.$num(this.cCandleWidth).div(7))},candleOffsetWidth:function(){return+this.$num(this.cCandleWidth).plus(this.candleInterval)},cutLength:function(){if(!this.size)return 0;var e=this.$num(this.contentWidth).plus(this.dragDeltaX).div(this.candleOffsetWidth).round(0,O.up);return e.lt(this.data.length-1)?+e.plus(1):Math.max(1,+e.minus(1))},sliceLength:function(){if(!this.size)return 0;var e=this.$num(this.contentWidth).div(this.candleOffsetWidth).round(0,O.up);return e.lt(this.data.length-1)?+e.plus(1):Math.max(1,+e.minus(1))},showData:function(){if(!this.size)return[];var e=Math.max(0,this.data.length-this.cutLength);return this.data.slice(e,e+this.sliceLength)},startX:function(){return+this.$num(this.contentWidth).minus(this.$num(this.candleOffsetWidth).times(this.sliceLength))},computedRange:function(){if(!this.originRange)return null;var e=this.originRange,t=e.price,n=e.volume;return{price:this.calcRange(t,this.candlesSize.height,{top:40,bottom:40}),volume:this.calcRange(n,this.volumeHeight,{top:30,bottom:0})}},heightRate:function(){if(!this.computedRange)return{};var e=this.computedRange,t=e.price,n=e.volume;return{price:this.calcHeightRate(t,this.candlesSize.height),volume:this.calcHeightRate(n,this.volumeHeight)}},currPrice:function(){var e=(this.data||[]).length;if(!this.data||e<1||!this.computedRange||!this.heightRate.price)return null;var t=this.data[e-1],n=this.data[e-2],i=this.type===M[0].value?t:this.cPrices(t,n||t),r=l(i,5),a=r[1],s=r[4],o=this.computedRange.price,u=o.max;return s<o.min||u<=s?null:{value:s,y:+this.$num(o.max).minus(s).times(this.heightRate.price).round(0,O.up),isUp:0<=s-a}}},watch:{showData:function(a){var s=this;if(0<a.length){var o=[],u={max:0,min:1/0,precision:0,power:0},c={max:0,min:1/0,precision:0,power:0};a.forEach(function(e,t){var n=Math.max(e[1],e[2],e[4]),i=Math.min(e[1],e[3],e[4]),r=l(e,6)[5];n>u.max?u.max=n:i<u.min&&(u.min=i),r>c.max?c.max=r:r<c.min&&(c.min=r),e.slice(1,5).forEach(function(e){u.precision=Math.max(u.precision,s.getPrecision(e))}),c.precision=Math.max(c.precision,s.getPrecision(c)),o.push({prices:s.type===M[1].value?s.cPrices(e,a[t-1]||e,u.precision):e,origin:s.heightRate.price?s.calcOrigin(e,t):null})}),u.power=this.calcFactorForAxis(u.max,u.min,u.precision),c.power=this.calcFactorForAxis(c.max,c.min,c.precision),this.cData=o,this.originRange={price:u,volume:c}}},"heightRate.price":function(){var i=this;this.cData=this.cData.map(function(e,t){var n=e.prices;return{prices:n,origin:i.calcOrigin(n,t)}})}},methods:{calcOrigin:function(e,t){return{x:+this.$num(this.candleOffsetWidth).times(t).plus(this.startX),y:+this.$num(this.computedRange.price.max).minus(Math.max(e[1],e[2],e[4])).times(this.heightRate.price).round(0,O.up)}},cPrices:function(e,t,n){var i,r=(i=e,Array.isArray(i)?i:Array.from(i)),a=r[0],s=r[1],o=r[2],u=r[3],c=r[4],h=r.slice(5),l=t[1],d=t[4],m=+this.$num(l).plus(d).div(2).toFixed(n),f=+this.$num(o).plus(u).plus(s).plus(c).div(4).toFixed(n);return[a,m,Math.max(o,m,f),Math.min(u,m,f),f].concat(v(h))},getPrecision:function(e){var t=e.toString().split("."),n=l(t,2)[1];return n?n.length:0},calcFactorForAxis:function(e,t,n){var i=+this.$num(e).minus(t).toExponential().toString().split("e")[1];return Math.max(-n,i-1)},calcRange:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{top:1,bottom:1},i=e.max,r=e.min,a=e.power,s=e.precision;if(!this.size||!t)return{max:i,min:r,power:a,precision:s};var o=+this.$num(i).minus(r).div(t);return{max:+this.$num(i).plus(this.$num(o).times(n.top)),min:+this.$num(r).minus(this.$num(o).times(n.bottom)),power:a,precision:s}},calcHeightRate:function(e,t){if(!t)return 1;var n=e.max,i=e.min,r=+this.$num(n).minus(i);return r?+this.$num(t).div(r):1}}},ie={name:"YAxis",mixins:[te],props:{origin:Object,height:Number,heightRate:Number,range:Object,fontSize:Number},data:function(){return{textDelta:A.textDelta,markerLineLength:A.markerLineLength}},computed:{cOrigin:function(){var e=this.origin||{},t=e.x,n=void 0===t?0:t,i=e.y,r=void 0===i?0:i;return{x:Math.round(n),y:Math.round(r)}},cHeight:function(){return Math.round(this.height)},factor:function(){return+this.$num(10).pow(this.range.power||0)},unitHeight:function(){return this.range&&this.heightRate?+this.$num(this.heightRate).times(this.factor):0},rangeOfTwo:function(){return this.range&&this.unitHeight?{max:+this.$num(R).times(2).div(this.unitHeight).round(0,O.up),min:+this.$num(R).div(this.unitHeight).round(0,O.down)}:null},rule:function(){var r=this;if(!this.rangeOfTwo)return null;var e=this.rangeOfTwo,t=e.max,a=e.min;if(this.$num(t).lte(a))return null;var n=[].concat(v(Array(+this.$num(t).minus(a)))).reduce(function(e,t,n){var i=+r.$num(a).plus(n);return!i||0!=+r.$num(i).mod(2)&&0!=+r.$num(i).mod(5)?e:e.concat([{value:i}])},[]);return n[n.length-1]||{value:1}},coords:function(){var o=this;if(!this.origin||!this.rule||!this.range||Object.keys(this.range).length<1)return[];var e=this.range,t=e.max,u=void 0===t?1:t,n=e.min,i=void 0===n?0:n,r=e.power,c=void 0===r?0:r,h=e.precision;return[].concat(v(Array(+this.$num(u).minus(i).div(this.factor).round(0,O.up)))).reduce(function(e,t,n){var i=+o.$num(u).div(o.factor).minus(n).round(0,O.up);if(0==+o.$num(i).mod(o.rule.value)){var r=o.$num(u).minus(o.$num(o.factor).times(n)),a=o.calcCoord(0<-c?r.toFixed(h,O.up):r.round(-c,O.up).toString(),n),s=+o.$num(a.textOrigin.y).minus(o.fontSize);if(o.cOrigin.y<=s&&s<=o.cOrigin.y+o.height)return e.concat(a)}return e},[])}},watch:{coords:function(){this.emitWidth()},origin:function(){this.emitWidth()}},methods:{emitWidth:function(){var n=this;0<this.coords.length&&this.origin&&this.$nextTick(function(){var e=n.$refs.yAxis[0]||n.$refs.yAxis;if(e){var t=I(e);n.$emit("yWidth",+n.$num(t.width).plus(A.textDelta).round(0,O.down))}})},calcCoord:function(e,t){var n={x:+this.cOrigin.x,y:+this.$num(t).times(this.unitHeight).plus(this.cOrigin.y).round(0,O.down)};return{text:e,origin:n,textOrigin:{x:this.$num(n.x).plus(this.textDelta),y:this.$num(n.y).plus(this.$num(this.fontSize).div(2))}}}}};var re,ae,se,oe,ue,ce=(se=void 0,oe=!(re={render:function(){var n=this,e=n.$createElement,i=n._self._c||e;return n.origin?i("g",{ref:"yAxis",staticClass:"y-axis"},[i("rect",{staticClass:"axis-line y",attrs:{x:n.cOrigin.x,y:n.cOrigin.y,width:"1",height:n.cHeight}}),n._v(" "),n._l(n.coords,function(e,t){return i("g",{key:t,staticClass:"axis-coord y"},[i("rect",{staticClass:"axis-coord-marker y",attrs:{x:e.origin.x,y:e.origin.y,width:n.markerLineLength,height:"1"}}),n._v(" "),i("text",{staticClass:"axis-coord-text y",attrs:{x:e.textOrigin.x,y:e.textOrigin.y,"font-size":n.fontSize}},[n._v("\n      "+n._s(e.text)+"\n    ")])])})],2):n._e()},staticRenderFns:[]}),(ue=("function"==typeof(ae=ie)?ae.options:ae)||{}).__file="YAxis.vue",ue.render||(ue.render=re.render,ue.staticRenderFns=re.staticRenderFns,ue._compiled=!0,oe&&(ue.functional=!0)),ue._scopeId=se,ue),he={name:"Candles",mixins:[te],components:{YAxis:ce},props:{data:{type:Array,default:function(){return[]}},range:Object,heightRate:Number,type:{type:String,default:M[0].value},showHLine:Boolean,svgWidth:Number,size:Object,candleWidth:Number,candleInterval:Number,fontSize:Number},data:function(){return{CandleTypes:M}},computed:{paths:function(){var a=this,s={};return this.data.length<1||!this.data[0].origin||this.data.forEach(function(e){var t=e.prices,n=e.origin,i=a.className(t),r=a.d(n,t);s[i]?s[i]+=r:s[i]=r}),s},yAxisOrigin:function(){return{x:this.size.width,y:0}},rectY:function(){return this.size.height-1}},methods:{d:function(e,t){var n=e.x,i=e.y,r=l(t,5),a=r[1],s=r[2],o=r[3],u=r[4],c=this.$num(this.candleWidth).div(2).round(0,O.down),h=[+this.$num(s).minus(this.$num(Math.max(a,u))).times(this.heightRate).round(0,O.up),Math.max(1,+this.$num(a).minus(u).abs().times(this.heightRate).round(0,O.up)),+this.$num(Math.min(a,u)).minus(o).times(this.heightRate).round(0,O.up)];return"M"+c.plus(n)+","+i+" h1 v"+h[0]+" h"+c+" v"+h[1]+" h"+-c+" v"+h[2]+" h-1 v"+-h[2]+" h"+-c+" v"+-h[1]+" h"+c+" z\n\r"},className:k}};var le,de,me,fe,ve,ge=(me=void 0,fe=!(le={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{staticClass:"candles"},[n("g",{attrs:{"clip-path":"url(#chart-content-clip)"}},t._l(t.paths,function(e,t){return n("path",{key:t,staticClass:"candle",class:t,attrs:{d:e}})})),t._v(" "),n("y-axis",{attrs:{origin:t.yAxisOrigin,height:t.size.height,heightRate:t.heightRate,range:t.range,fontSize:t.fontSize},on:{yWidth:function(e){t.$emit("yWidth",e)}}}),t._v(" "),t.showHLine?n("rect",{staticClass:"h-line",attrs:{x:0,y:t.rectY,width:t.svgWidth,height:"1"}}):t._e()],1)},staticRenderFns:[]}),(ve=("function"==typeof(de=he)?de.options:de)||{}).__file="Candles.vue",ve.render||(ve.render=le.render,ve.staticRenderFns=le.staticRenderFns,ve._compiled=!0,fe&&(ve.functional=!0)),ve._scopeId=me,ve);var pe=function(e){return e instanceof Date},xe=36e5,ye=6e4,be=/[T ]/,we=/:/,Se=/^(\d{2})$/,Me=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],$e=/^(\d{4})/,De=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],ze=/^-(\d{2})$/,Ce=/^-?(\d{3})$/,Re=/^-?(\d{2})-?(\d{2})$/,_e=/^-?W(\d{2})$/,Oe=/^-?W(\d{2})-?(\d{1})$/,Ae=/^(\d{2}([.,]\d*)?)$/,Te=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,Ye=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,Ie=/([Z+-].*)$/,ke=/^(Z)$/,We=/^([+-])(\d{2})$/,He=/^([+-])(\d{2}):?(\d{2})$/;function Fe(e,t,n){t=t||0,n=n||0;var i=new Date(0);i.setUTCFullYear(e,0,4);var r=7*t+n+1-(i.getUTCDay()||7);return i.setUTCDate(i.getUTCDate()+r),i}var Ee=function(e,t){if(pe(e))return new Date(e.getTime());if("string"!=typeof e)return new Date(e);var n=(t||{}).additionalDigits;n=null==n?2:Number(n);var i=function(e){var t,n={},i=e.split(be);if(t=we.test(i[0])?(n.date=null,i[0]):(n.date=i[0],i[1])){var r=Ie.exec(t);r?(n.time=t.replace(r[1],""),n.timezone=r[1]):n.time=t}return n}(e),r=function(e,t){var n,i=Me[t],r=De[t];if(n=$e.exec(e)||r.exec(e)){var a=n[1];return{year:parseInt(a,10),restDateString:e.slice(a.length)}}if(n=Se.exec(e)||i.exec(e)){var s=n[1];return{year:100*parseInt(s,10),restDateString:e.slice(s.length)}}return{year:null}}(i.date,n),a=r.year,s=function(e,t){if(null===t)return null;var n,i,r,a;if(0===e.length)return(i=new Date(0)).setUTCFullYear(t),i;if(n=ze.exec(e))return i=new Date(0),r=parseInt(n[1],10)-1,i.setUTCFullYear(t,r),i;if(n=Ce.exec(e)){i=new Date(0);var s=parseInt(n[1],10);return i.setUTCFullYear(t,0,s),i}if(n=Re.exec(e)){i=new Date(0),r=parseInt(n[1],10)-1;var o=parseInt(n[2],10);return i.setUTCFullYear(t,r,o),i}if(n=_e.exec(e))return a=parseInt(n[1],10)-1,Fe(t,a);if(n=Oe.exec(e)){a=parseInt(n[1],10)-1;var u=parseInt(n[2],10)-1;return Fe(t,a,u)}return null}(r.restDateString,a);if(s){var o,u=s.getTime(),c=0;return i.time&&(c=function(e){var t,n,i;if(t=Ae.exec(e))return(n=parseFloat(t[1].replace(",",".")))%24*xe;if(t=Te.exec(e))return n=parseInt(t[1],10),i=parseFloat(t[2].replace(",",".")),n%24*xe+i*ye;if(t=Ye.exec(e)){n=parseInt(t[1],10),i=parseInt(t[2],10);var r=parseFloat(t[3].replace(",","."));return n%24*xe+i*ye+1e3*r}return null}(i.time)),o=i.timezone?(h=i.timezone,(l=ke.exec(h))?0:(l=We.exec(h))?(d=60*parseInt(l[2],10),"+"===l[1]?-d:d):(l=He.exec(h))?(d=60*parseInt(l[2],10)+parseInt(l[3],10),"+"===l[1]?-d:d):0):(o=new Date(u+c).getTimezoneOffset(),new Date(u+c+o*ye).getTimezoneOffset()),new Date(u+c+o*ye)}var h,l,d;return new Date(e)};var Ne=function(e){var t=Ee(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n};var Xe=function(e){var t=Ee(e);return t.setHours(0,0,0,0),t};var Le=function(e,t){var n=Xe(e),i=Xe(t),r=n.getTime()-6e4*n.getTimezoneOffset(),a=i.getTime()-6e4*i.getTimezoneOffset();return Math.round((r-a)/864e5)};var Pe=function(e){var t=Ee(e);return Le(t,Ne(t))+1};var je=function(e,t){var n=t&&Number(t.weekStartsOn)||0,i=Ee(e),r=i.getDay(),a=(r<n?7:0)+r-n;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i};var Be=function(e){return je(e,{weekStartsOn:1})};var Ve=function(e){var t=Ee(e),n=t.getFullYear(),i=new Date(0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);var r=Be(i),a=new Date(0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);var s=Be(a);return t.getTime()>=r.getTime()?n+1:t.getTime()>=s.getTime()?n:n-1};var Je=function(e){var t=Ve(e),n=new Date(0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Be(n)};var Ue=function(e){var t=Ee(e),n=Be(t).getTime()-Je(t).getTime();return Math.round(n/6048e5)+1};var Ge=function(e){if(pe(e))return!isNaN(e);throw new TypeError(toString.call(e)+" is not an instance of Date")};var Ke=["M","MM","Q","D","DD","DDD","DDDD","d","E","W","WW","YY","YYYY","GG","GGGG","H","HH","h","hh","m","mm","s","ss","S","SS","SSS","Z","ZZ","X","x"];var Ze=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);var i=Ke.concat(t).sort().reverse();return new RegExp("(\\[[^\\[]*\\])|(\\\\)?("+i.join("|")+"|.)","g")};var qe=function(){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=["January","February","March","April","May","June","July","August","September","October","November","December"],i=["Su","Mo","Tu","We","Th","Fr","Sa"],r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s=["AM","PM"],o=["am","pm"],u=["a.m.","p.m."],e={MMM:function(e){return t[e.getMonth()]},MMMM:function(e){return n[e.getMonth()]},dd:function(e){return i[e.getDay()]},ddd:function(e){return r[e.getDay()]},dddd:function(e){return a[e.getDay()]},A:function(e){return 1<=e.getHours()/12?s[1]:s[0]},a:function(e){return 1<=e.getHours()/12?o[1]:o[0]},aa:function(e){return 1<=e.getHours()/12?u[1]:u[0]}};return["M","D","DDD","d","Q","W"].forEach(function(n){e[n+"o"]=function(e,t){return function(e){var t=e%100;if(20<t||t<10)switch(t%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"}(t[n](e))}}),{formatters:e,formattingTokensRegExp:Ze(e)}},Qe={distanceInWords:function(){var r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};return{localize:function(e,t,n){var i;return n=n||{},i="string"==typeof r[e]?r[e]:1===t?r[e].one:r[e].other.replace("{{count}}",t),n.addSuffix?0<n.comparison?"in "+i:i+" ago":i}}}(),format:qe()};var et={M:function(e){return e.getMonth()+1},MM:function(e){return nt(e.getMonth()+1,2)},Q:function(e){return Math.ceil((e.getMonth()+1)/3)},D:function(e){return e.getDate()},DD:function(e){return nt(e.getDate(),2)},DDD:function(e){return Pe(e)},DDDD:function(e){return nt(Pe(e),3)},d:function(e){return e.getDay()},E:function(e){return e.getDay()||7},W:function(e){return Ue(e)},WW:function(e){return nt(Ue(e),2)},YY:function(e){return nt(e.getFullYear(),4).substr(2)},YYYY:function(e){return nt(e.getFullYear(),4)},GG:function(e){return String(Ve(e)).substr(2)},GGGG:function(e){return Ve(e)},H:function(e){return e.getHours()},HH:function(e){return nt(e.getHours(),2)},h:function(e){var t=e.getHours();return 0===t?12:12<t?t%12:t},hh:function(e){return nt(et.h(e),2)},m:function(e){return e.getMinutes()},mm:function(e){return nt(e.getMinutes(),2)},s:function(e){return e.getSeconds()},ss:function(e){return nt(e.getSeconds(),2)},S:function(e){return Math.floor(e.getMilliseconds()/100)},SS:function(e){return nt(Math.floor(e.getMilliseconds()/10),2)},SSS:function(e){return nt(e.getMilliseconds(),3)},Z:function(e){return tt(e.getTimezoneOffset(),":")},ZZ:function(e){return tt(e.getTimezoneOffset())},X:function(e){return Math.floor(e.getTime()/1e3)},x:function(e){return e.getTime()}};function tt(e,t){t=t||"";var n=0<e?"-":"+",i=Math.abs(e),r=i%60;return n+nt(Math.floor(i/60),2)+t+nt(r,2)}function nt(e,t){for(var n=Math.abs(e).toString();n.length<t;)n="0"+n;return n}var it=function(e,t,n){var i=t?String(t):"YYYY-MM-DDTHH:mm:ss.SSSZ",r=(n||{}).locale,a=Qe.format.formatters,s=Qe.format.formattingTokensRegExp;r&&r.format&&r.format.formatters&&(a=r.format.formatters,r.format.formattingTokensRegExp&&(s=r.format.formattingTokensRegExp));var o=Ee(e);return Ge(o)?function(e,t,n){var i,r,a,s=e.match(n),o=s.length;for(i=0;i<o;i++)r=t[s[i]]||et[s[i]],s[i]=r||((a=s[i]).match(/\[[\s\S]/)?a.replace(/^\[|]$/g,""):a.replace(/\\/g,""));return function(e){for(var t="",n=0;n<o;n++)s[n]instanceof Function?t+=s[n](e,et):t+=s[n];return t}}(i,a,s)(o):"Invalid Date"},rt={name:"CrossCurve",mixins:[te],props:{origin:Object,textSize:{type:Object,default:function(){return{width:A.markerWidth,height:A.xMarkerHeight}}},chartSize:Object,fontSize:Number,time:Number,value:Number},data:function(){return{valueHeight:A.yMarkerHeight,textDelta:A.textDelta}},computed:{cOrigin:function(){var e=this.origin||{},t=e.x,n=void 0===t?0:t,i=e.y,r=void 0===i?0:i;return{x:+this.$num(n).round(0,O.down),y:+this.$num(r).round(0,O.down)}},lineOrigin:function(){return{x:+this.$num(this.cOrigin.x).plus(.5),y:+this.$num(this.cOrigin.y).plus(.5)}},timeX:function(){return this.c(this.cOrigin.x,this.textSize.width)},timeTextY:function(){return this.$num(this.chartSize.height).plus(this.fontSize).plus(this.textDelta)},valueX:function(){return this.c(this.cOrigin.y,this.valueHeight)},valueText:function(){return{x:this.$num(this.chartSize.width).plus(this.textDelta),y:this.$num(this.cOrigin.y).plus(this.$num(this.fontSize).div(2))}}},methods:{format:it,c:function(e,t){return+this.$num(e).minus(this.$num(t).div(2)).round(0,O.down)}}};var at,st,ot,ut,ct,ht=(ot=void 0,ut=!(at={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.chartSize&&e.origin?n("g",{staticClass:"cross-curve"},[n("line",{staticClass:"cross-h",attrs:{x1:"0",y1:e.lineOrigin.y,x2:e.chartSize.width,y2:e.lineOrigin.y}}),e._v(" "),n("line",{staticClass:"cross-v",attrs:{x1:e.lineOrigin.x,y1:0,x2:e.lineOrigin.x,y2:e.chartSize.height}}),e._v(" "),n("g",{staticClass:"cross-time"},[n("rect",{staticClass:"cross-time-bg",attrs:{x:e.timeX,y:e.chartSize.height,width:e.textSize.width,height:e.textSize.height}}),e._v(" "),n("text",{staticClass:"cross-time-text",attrs:{x:e.cOrigin.x,y:e.timeTextY,"font-size":e.fontSize,"text-anchor":"middle"}},[e._v(e._s(e.format(e.time,"YYYY-MM-DD HH:mm"))+"\n    ")])]),e._v(" "),n("g",{staticClass:"cross-value"},[n("rect",{staticClass:"cross-value-bg",attrs:{x:e.chartSize.width,y:e.valueX,width:e.textSize.width,height:e.valueHeight}}),e._v(" "),n("text",{staticClass:"cross-value-text",attrs:{x:e.valueText.x,y:e.valueText.y,"font-size":e.fontSize}},[e._v(e._s(e.value)+"\n    ")])])]):e._e()},staticRenderFns:[]}),(ct=("function"==typeof(st=rt)?st.options:st)||{}).__file="CrossCurve.vue",ct.render||(ct.render=at.render,ct.staticRenderFns=at.staticRenderFns,ct._compiled=!0,ut&&(ct.functional=!0)),ct._scopeId=ot,ct),lt={name:"CrossCurve",mixins:[te],props:{y:Number,width:Number,textWidth:{type:Number,default:A.markerWidth},price:Number,isUp:Boolean,fontSize:Number},data:function(){return{valueHeight:A.yMarkerHeight,textDelta:A.textDelta}},computed:{cY:function(){return+this.$num(this.y||0).round(0,O.down)},lineY:function(){return this.$num(this.cY).plus(.5)},rectY:function(){return this.c(this.cY,this.valueHeight)},priceText:function(){return{x:this.$num(this.width).plus(this.textDelta),y:this.$num(this.cY).plus(this.$num(this.fontSize).div(2))}}},watch:{},methods:{format:it,c:function(e,t){return+this.$num(e).minus(this.$num(t).div(2)).round(0,O.down)}}};var dt,mt,ft,vt,gt,pt=(ft=void 0,vt=!(dt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{staticClass:"curr-price",class:e.isUp?"up":"down"},[n("line",{staticClass:"curr-price-line",class:e.red,attrs:{x1:"0",y1:e.lineY,x2:e.width,y2:e.lineY}}),e._v(" "),n("g",{staticClass:"curr-price-value"},[n("rect",{staticClass:"curr-price-value-bg",attrs:{x:e.width,y:e.rectY,width:e.textWidth,height:e.valueHeight}}),e._v(" "),n("text",{staticClass:"curr-price-value-text",attrs:{x:e.priceText.x,y:e.priceText.y,"font-size":e.fontSize}},[e._v(e._s(e.price)+"\n    ")])])])},staticRenderFns:[]}),(gt=("function"==typeof(mt=lt)?mt.options:mt)||{}).__file="CurrPrice.vue",gt.render||(gt.render=dt.render,gt.staticRenderFns=dt.staticRenderFns,gt._compiled=!0,vt&&(gt.functional=!0)),gt._scopeId=ft,gt),xt={name:"Loading",props:{width:Number,height:Number}};var yt,bt,wt,St,Mt,$t=(wt=void 0,St=!(yt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"loading",staticStyle:{"enable-background":"new 0 0 512 512"},attrs:{x:"0px",y:"0px",width:e.width,height:e.height,viewBox:"0 0 512 512","xml:space":"preserve"}},[n("circle",{staticClass:"loading-circle-1",attrs:{cx:"256",cy:"16",r:"16"}}),e._v(" "),n("circle",{staticClass:"loading-circle-2",attrs:{transform:"matrix(0.5 -0.866 0.866 0.5 146.2975 349.7025)",cx:"376",cy:"48.2",r:"16"}}),e._v(" "),n("circle",{staticClass:"loading-circle-3",attrs:{transform:"matrix(0.866 -0.5 0.5 0.866 -5.8564 250.1436)",cx:"463.8",cy:"136",r:"16"}}),e._v(" "),n("circle",{staticClass:"loading-circle-4",attrs:{cx:"496",cy:"256",r:"16"}}),e._v(" "),n("circle",{staticClass:"loading-circle-5",attrs:{transform:"matrix(0.5 -0.866 0.866 0.5 -93.7025 589.7025)",cx:"463.8",cy:"376",r:"16"}}),e._v(" "),n("circle",{staticClass:"loading-circle-6",attrs:{transform:"matrix(0.866 -0.5 0.5 0.866 -181.5486 250.1436)",cx:"376",cy:"463.8",r:"16"}}),e._v(" "),n("circle",{staticClass:"loading-circle-7",attrs:{cx:"256",cy:"496",r:"16"}}),e._v(" "),n("circle",{staticClass:"loading-circle-8",attrs:{transform:"matrix(0.5 -0.866 0.866 0.5 -333.7025 349.7025)",cx:"136",cy:"463.8",r:"16"}}),e._v(" "),n("circle",{staticClass:"loading-circle-9",attrs:{transform:"matrix(0.866 -0.5 0.5 0.866 -181.5486 74.4514)",cx:"48.2",cy:"376",r:"16"}}),e._v(" "),n("circle",{staticClass:"loading-circle-10",attrs:{cx:"16",cy:"256",r:"16"}}),e._v(" "),n("circle",{staticClass:"loading-circle-11",attrs:{transform:"matrix(0.5 -0.866 0.866 0.5 -93.7025 109.7025)",cx:"48.2",cy:"136",r:"16"}}),e._v(" "),n("circle",{staticClass:"loading-circle-12",attrs:{transform:"matrix(0.866 -0.5 0.5 0.866 -5.8564 74.4514)",cx:"136",cy:"48.2",r:"16"}})])},staticRenderFns:[]}),(Mt=("function"==typeof(bt=xt)?bt.options:bt)||{}).__file="Loading.vue",Mt.render||(Mt.render=yt.render,Mt.staticRenderFns=yt.staticRenderFns,Mt._compiled=!0,St&&(Mt.functional=!0)),Mt._scopeId=wt,Mt),Dt={name:"icon-full-screen",props:{type:String,width:Number,height:Number},data:function(){return{}},methods:{}};var zt,Ct,Rt,_t,Ot,At={name:"ToolBar",mixins:[te],components:{IconFullScreen:(Rt=void 0,_t=!(zt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return"exit"!==t.type?n("svg",{staticClass:"icon-full-screen",staticStyle:{"enable-background":"new 0 0 128 128"},attrs:{viewBox:"0 0 128 128",width:t.width,height:t.height},on:{click:function(e){t.$emit("update:type","exit")}}},[n("path",{attrs:{d:"M112,128H80v-8h32c4.4,0,8-3.6,8-8V80h8v32C128,120.8,120.8,128,112,128C112,128,112,128,112,128z\n   M120,16c0-4.4-3.6-8-8-8c0,0,0,0,0,0H80V0h32c8.8,0,16,7.2,16,16v32h-8C120,48,120,16,120,16z\n   M0,112V80h8v32c0,4.4,3.6,8,8,8c0,0,0,0,0,0h32v8H16C7.2,128,0,120.8,0,112C0,112,0,112,0,112z\n   M8,16v32H0V16C0,7.2,7.2,0,16,0c0,0,0,0,0,0h32v8H16C11.6,8,8,11.6,8,16C8,16,8,16,8,16z"}})]):n("svg",{staticClass:"icon-full-screen",staticStyle:{"enable-background":"new 0 0 128 128"},attrs:{viewBox:"0 0 128 128",width:t.width,height:t.height},on:{click:function(e){t.$emit("update:type","")}}},[n("path",{attrs:{d:"M96,80h32v8H96c-4.4,0-8,3.6-8,8v32h-8V96C80,87.2,87.2,80,96,80C96,80,96,80,96,80z\n  M88,32c0,4.4,3.6,8,8,8c0,0,0,0,0,0l32,0v8H96c-8.8,0-16-7.2-16-16V0l8,0C88,0,88,32,88,32z\n  M48,96v32h-8V96c0-4.4-3.6-8-8-8c0,0,0,0,0,0H0l0-8h32C40.8,80,48,87.2,48,96C48,96,48,96,48,96z\n  M40,32V0l8,0v32c0,8.8-7.2,16-16,16c0,0,0,0,0,0H0l0-8l32,0C36.4,40,40,36.4,40,32C40,32,40,32,40,32z"}})])},staticRenderFns:[]}),(Ot=("function"==typeof(Ct=Dt)?Ct.options:Ct)||{}).__file="IconFullScreen.vue",Ot.render||(Ot.render=zt.render,Ot.staticRenderFns=zt.staticRenderFns,Ot._compiled=!0,_t&&(Ot.functional=!0)),Ot._scopeId=Rt,Ot)},props:{isMobile:Boolean,periodVal:Object},data:function(){return{period:{value:$[0],options:$},candleType:{value:M[0],options:M},indicators:{value:[],options:D},fullScreen:""}},computed:{},watch:{periodVal:{handler:function(t){this.period.value=$.find(function(e){return t&&e.value===t.value&&e.name===t.name})||$[0],t!==this.period.value.value&&this.emitPeriod(this.period.value)},immediate:!0},"candleType.value":{handler:function(e){this.$emit("candleType",e.value)},immediate:!0},"indicators.value":{handler:function(e){this.$emit("indicators",e)},immediate:!0},fullScreen:function(e){this.$emit("isFullScreen","exit"===e)}},methods:{choseIndicator:function(t,e){var n=this,i=Object.keys(this.indicators.value).find(function(e){return n.indicators.value[e].value===t.value});i?this.indicators.value.splice(i,1):this.indicators.value.push(r({},t,{type:e}))},emitPeriod:function(e){this.$emit("period",e)}}};var Tt,Yt,It,kt,Wt,Ht=(It=void 0,kt=!(Tt={render:function(){var i=this,e=i.$createElement,r=i._self._c||e;return r("div",{staticClass:"tool-bar"},[r("div",{staticClass:"periods",class:{mobile:i.isMobile}},[i.isMobile?[i._v("\n      "+i._s(i.$lang.$t("periods"))+"\n      "),r("div",{staticClass:"options"},i._l(i.period.options,function(t){return r("button",{key:t.value,staticClass:"option",class:{selected:i.period.value===t||i.period.value.name===t.name&&i.period.value.value===t.value},on:{click:function(e){i.emitPeriod(t)}}},[i._v(i._s(i.$lang.$t(t.name))+"\n        ")])}))]:i._l(i.period.options,function(t){return r("button",{key:t.value,staticClass:"period",class:{selected:i.period.value===t},on:{click:function(e){i.emitPeriod(t)}}},[i._v(i._s(i.$lang.$t(t.name))+"\n      ")])})],2),i._v(" "),r("div",{staticClass:"candle-types"},[i._v("\n    "+i._s(i.$lang.$t("candle-types"))+"\n    "),r("div",{staticClass:"options"},i._l(i.candleType.options,function(t){return r("button",{key:t.value,staticClass:"option",class:{selected:i.candleType.value===t},on:{click:function(e){i.candleType.value=t}}},[i._v(i._s(i.$lang.$t(t.name))+"\n      ")])}))]),i._v(" "),r("div",{staticClass:"indicators"},[i._v("\n    "+i._s(i.$lang.$t("indicators"))+"\n    "),r("div",{staticClass:"options"},[i._l(i.indicators.options,function(e,n,t){return[r("h5",{key:n,staticClass:"caption"},[i._v(i._s(i.$lang.$t("indicators."+n)))]),i._v(" "),r("div",{key:n,staticClass:"option-group"},i._l(e,function(t){return r("button",{key:t.value,staticClass:"option",class:{selected:i.indicators.value.some(function(e){return e.value===t.value})},on:{click:function(e){i.choseIndicator(t,n)}}},[i._v(i._s(i.$lang.$t(t.name))+"\n          ")])})),i._v(" "),0===t?r("div",{key:n,staticClass:"decoration"}):i._e()]})],2)]),i._v(" "),r("div",{staticClass:"icon-full"},[r("span",{staticClass:"tool-tip"},[i._v(i._s(i.$lang.$t("exit"===i.fullScreen?"full-screen-exit":"full-screen")))]),i._v(" "),r("icon-full-screen",{attrs:{type:i.fullScreen},on:{"update:type":function(e){i.fullScreen=e}}})],1)])},staticRenderFns:[]}),(Wt=("function"==typeof(Yt=At)?Yt.options:Yt)||{}).__file="ToolBar.vue",Wt.render||(Wt.render=Tt.render,Wt.staticRenderFns=Tt.staticRenderFns,Wt._compiled=!0,kt&&(Wt.functional=!0)),Wt._scopeId=It,Wt),Ft={name:"Volume",mixins:[te],components:{YAxis:ce},props:{data:{type:Array,default:function(){return[]}},range:Object,heightRate:Number,y:Number,size:Object,candleWidth:Number,candleInterval:Number,svgWidth:Number,showHLine:Boolean,fontSize:Number},data:function(){return{}},computed:{contentHeight:function(){return(this.size.height||A.volumeChartHeight)-A.volumeChartPaddingBottom},volumeWidth:function(){return+this.$num(this.candleWidth).plus(this.candleInterval)-1},deltaX:function(){return.5-this.$num(this.candleInterval).div(2).round(0,O.down)},paths:function(){var a=this,s={};return this.data.length<1||!this.data[0].origin||this.data.forEach(function(e){var t=e.prices,n=e.origin,i=a.className(t),r=a.d(t,n);s[i]?s[i]+=r:s[i]=r}),s},yAxisOrigin:function(){return{x:this.size.width,y:+this.$num(this.y).round()}},rectY:function(){return this.$num(this.y).plus(this.size.height).minus(1).round()}},methods:{className:k,d:function(e,t){var n=l(e,6)[5],i=+this.$num(n).minus(Math.max(0,this.range.min)).times(this.heightRate).round(0,O.down),r=+this.$num(this.contentHeight).minus(i);return"M"+ +this.$num(t.x).round(0,O.down).plus(this.deltaX)+","+(+this.$num(this.y).plus(r).round(0,O.down)-.5)+" h"+this.volumeWidth+" v"+i+" h"+-this.volumeWidth+" z\n\r"}}};var Et,Nt,Xt,Lt,Pt,jt=(Xt=void 0,Lt=!(Et={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{staticClass:"volumes",staticStyle:{overflow:"hidden"}},[n("g",{attrs:{"clip-path":"url(#chart-content-clip)"}},t._l(t.paths,function(e,t){return n("path",{key:t,staticClass:"volume",class:t,attrs:{d:e}})})),t._v(" "),n("y-axis",{attrs:{origin:t.yAxisOrigin,height:t.size.height,heightRate:t.heightRate,range:t.range,fontSize:t.fontSize},on:{yWidth:function(e){t.$emit("yWidth",e)}}}),t._v(" "),t.showHLine?n("rect",{staticClass:"h-line",attrs:{x:0,y:t.rectY,width:t.svgWidth,height:"1"}}):t._e()],1)},staticRenderFns:[]}),(Pt=("function"==typeof(Nt=Ft)?Nt.options:Nt)||{}).__file="Volumes.vue",Pt.render||(Pt.render=Et.render,Pt.staticRenderFns=Et.staticRenderFns,Pt._compiled=!0,Lt&&(Pt.functional=!0)),Pt._scopeId=Xt,Pt);var Bt=function(e){return Ee(e).getDate()};var Vt=function(e){return Ee(e).getMonth()},Jt={name:"XAxis",mixins:[te],props:{y:Number,width:Number,period:Number,candleWidth:Number,candleInterval:Number,data:{type:Array,default:function(){return[]}},showLength:Number,fontSize:Number},data:function(){return{acceptedIntervals:[{value:12e4,bold:18e5,name:"2min"},{value:18e4,bold:18e5,name:"3min"},{value:24e4,bold:18e5,name:"4min"},{value:3e5,bold:18e5,name:"5min"},{value:6e5,bold:18e5,name:"10min"},{value:9e5,bold:36e5,name:"15min"},{value:18e5,bold:36e5,name:"30min"},{value:36e5,bold:864e5,name:"60min"},{value:54e5,mod:36e5,bold:864e5,name:"1.5hour"},{value:108e5,mod:36e5,bold:864e5,name:"3hour"},{value:216e5,mod:144e5,bold:864e5,name:"6hour"},{value:432e5,mod:144e5,bold:864e5,name:"12hour"},{value:864e5,mod:576e5,bold:"month",name:"1d"},{value:1728e5,mod:144e6,bold:"month",name:"2d"},{value:2592e5,mod:2304e5,bold:"month",name:"3d"},{value:3456e5,mod:3168e5,bold:"month",name:"4d"},{value:432e6,mod:4032e5,bold:"month",name:"5d"},{value:5184e5,mod:4896e5,bold:"month",name:"6d"},{value:6048e5,mod:576e6,bold:"month",name:"7d"},{value:6912e5,mod:6624e5,bold:"month",name:"8d"},{value:7776e5,mod:7488e5,bold:"month",name:"9d"},{value:864e6,mod:8352e5,bold:"month",name:"10d"},{value:1296e6,bold:"month",alias:"15d"},{value:2592e6,bold:"year",alias:"1mon"},{value:5184e6,bold:"year",alias:"2mon"},{value:7776e6,bold:"year",alias:"3mon"},{value:10368e6,bold:"year",alias:"4mon"}],textDelta:A.textDelta,markerLineLength:A.markerLineLength}},computed:{cY:function(){return Math.round(this.y)},cWidth:function(){return Math.round(this.width)},delta:function(){return+this.$num(this.candleWidth).div(2).round(0,O.down)},candleOffsetWidth:function(){return+this.$num(this.candleInterval).plus(this.candleWidth)},distanceOfTwo:function(){return{max:+this.$num(C).times(2).div(this.candleOffsetWidth).round(0,O.down),min:+this.$num(C).div(this.candleOffsetWidth).round(0,O.up)}},showRule:function(){var i=this;if(!this.period)return this.acceptedIntervals[this.acceptedIntervals.length-1];var r=this.period,e=this.acceptedIntervals.filter(function(e){var t=e.value,n=i.$num(t).div(r);return n.lte(i.distanceOfTwo.max)&&n.gte(i.distanceOfTwo.min)});return e[e.length-1]||this.acceptedIntervals[this.acceptedIntervals.length-1]},coords:function(){var s=this,e=this.data.length;if(!this.showLength||!this.period||!e)return[];var t=this.showRule,o=t.value,n=t.mod,u=void 0===n?0:n,c=t.alias,i=this.data[e-1],r={time:i.prices[0],x:i.origin.x};return this.data.concat([].concat(v(Array(Math.max(0,+this.showLength-this.data.length)))).reduce(function(e){return r.time=+s.$num(r.time).plus(s.period),r.x=+s.$num(r.x).plus(s.candleOffsetWidth),e.concat([{prices:[r.time],origin:{x:r.x}}])},[])).reduce(function(e,t){var n=t.prices,i=t.origin,r=l(n,1)[0];if(c){if("15d"===c&&15===Bt(+r))return e.concat([s.calcCoord(n,i)]);var a=+c.match(/^(\d)mon/)[1];if(+s.$num(Vt(+r)).plus(1).mod(a)===u)return e.concat([s.calcCoord(n,i)])}return+s.$num(r).mod(o)===u?e.concat([s.calcCoord(n,i)]):e},[])}},watch:{coords:function(){this.emitHeight()}},methods:{calcCoord:function(e,t){return{prices:e,origin:{x:+this.$num(t.x).plus(this.delta),y:this.cY},text:this.text(+e[0]),bold:this.bold(+e[0]),textY:this.$num(this.cY).plus(this.fontSize).plus(this.textDelta)}},bold:function(e){var t=void 0,n=this.showRule.bold;if("number"==typeof n)t=e%n==0;else{var i=it(e,"YYYY-MM-DD HH:mm");t="month"===n?/\s{4}-\s{2}-01 00:00/.test(i):/\s{4}-01-01 00:00/.test(i)}return t?"bold":""},text:function(e){var t=this.showRule,n=t.name,i=void 0;return t.alias||/d/.test(n)||"00:00"===(i=it(e,"HH:mm"))?"01"!==(i=it(e,"DD"))?i:"01"===(i=it(e,"MM"))?this.$lang.$t("yyyy",{year:it(e,"YYYY")}):this.$lang.$t(_[Vt(e)+1]):i},emitHeight:function(){var n=this;0<this.coords.length&&this.$nextTick(function(){var e=n.$refs.xAxis[0]||n.$refs.xAxis;if(e){var t=I(e);n.$emit("xHeight",+n.$num(t.height).plus(A.textDelta).round(0,O.down))}})}}};var Ut,Gt,Kt,Zt,qt,Qt,en,tn,nn,rn,an={name:"Index",mixins:[te,ne],components:{ToolBar:Ht,Candles:ge,XAxis:(Kt=void 0,Zt=!(Ut={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.period?n("g",{ref:"xAxis",staticClass:"x-axis"},[n("rect",{staticClass:"axis-line x",attrs:{x:"0",y:t.cY,width:t.cWidth,height:"1"}}),t._v(" "),t._l(t.coords,function(e){return n("g",{key:e.prices[0],staticClass:"axis-coord x",class:e.bold,attrs:{"clip-path":"url(#chart-content-clip)"}},[n("rect",{staticClass:"axis-coord-marker x",attrs:{x:e.origin.x,y:e.origin.y,width:"1",height:t.markerLineLength}}),t._v(" "),n("text",{staticClass:"axis-coord-text x",attrs:{x:e.origin.x,y:e.textY,"font-size":t.fontSize,"text-anchor":"middle"}},[t._v("\n      "+t._s(e.text)+"\n    ")])])})],2):t._e()},staticRenderFns:[]}),(qt=("function"==typeof(Gt=Jt)?Gt.options:Gt)||{}).__file="XAxis.vue",qt.render||(qt.render=Ut.render,qt.staticRenderFns=Ut.staticRenderFns,qt._compiled=!0,Zt&&(qt.functional=!0)),qt._scopeId=Kt,qt),CrossCurve:ht,Volumes:jt,Loading:$t,CurrPrice:pt},props:{fontSize:{type:Number,default:A.defaultFontSize},markerWidth:{type:Number,default:A.markerWidth},loading:Boolean,period:{type:Object,default:$[0]}},data:function(){return{volumeHeight:A.volumeChartHeight,indicatorHeight:A.indicatorChartHeight,loadingSize:A.loadingSize,textDelta:A.textDelta,axis:{x:{height:0},y:{width:0}},type:M[0].value,showVolumes:!0,isFullScreen:!1,dragOrigin:null,indicators:[],crossCurveInfo:null,touchRes:null,isMobile:Y,scaleStartTime:0,isPortrait:W()}},computed:{viewBox:function(){return this.size?"0 0 "+this.size.width+" "+this.size.height:"0 0 0 0"},chartSize:function(){return this.size?{width:+this.$num(this.size.width).minus(this.axis.y.width),height:+this.$num(this.size.height).minus(this.axis.x.height)}:null},showTechIndicator:function(){return!!this.indicators.filter(function(e){return"technical"===e.type}).length},candlesSize:function(){return this.size?{width:this.chartSize.width,height:+this.$num(this.chartSize.height).minus(this.showVolumes?this.volumeHeight:0).minus(this.showTechIndicator?this.indicatorHeight:0)}:null},volumesSize:function(){return this.size?{width:this.chartSize.width,height:this.volumeHeight}:null},textSize:function(){return{width:this.markerWidth,height:+this.$num(this.axis.x.height).minus(this.$num(this.textDelta).div(2).round())}},crossCurveRangeY:function(){return{candle:[0,this.candlesSize.height],volume:[this.candlesSize.height,this.candlesSize.height+this.volumeHeight],indicator:[this.candlesSize.height+this.volumeHeight,this.chartSize.height]}},maxDeltaX:function(){return+this.$num(this.cCandleWidth).plus(this.candleInterval).times(this.data.length).minus(this.candlesSize.width)}},watch:{isFullScreen:function(){this.resize()},size:function(e){e&&this.bindTouch()}},methods:{getSize:function(){var s=this;this.$nextTick(function(){var e=I(s.$refs.wrap),t=e.width,n=void 0===t?0:t,i=e.height,r=void 0===i?0:i,a=I(s.$refs.toolbar.$el).height||0;s.size={width:+s.$num(n).round(0,O.down),height:+s.$num(r).minus(a).round(0,O.down)}})},setXAxisHeight:function(e){this.axis.x.height=e},setYAxisWidth:function(e){this.axis.y.width=Math.max(this.axis.y.width,e)},resize:function(){this.isPortrait=W(),Y&&this.isFullScreen&&this.isPortrait||this.getSize()},startDrag:function(e){this.dragOrigin={x:e.offsetX,y:e.offsetY,dragDeltaX:this.dragDeltaX,time:e.timeStamp}},mouseMove:function(e){this.markerMove(e),this.isMobile||this.klineMove(e)},endDrag:function(){this.dragOrigin=null},klineMove:function(e){if(this.dragOrigin){if(e.timeStamp-this.dragOrigin.time<T)return;this.dragOrigin.time=e.timeStamp;var t=void 0!==e.deltaX?e.deltaX:+this.$num(e.offsetX).minus(this.dragOrigin.x);this.dragOrigin.dragDeltaX===this.maxDeltaX&&0<t?(this.$emit("getMorePreData"),this.dragOrigin=null):(this.dragDeltaX=+this.$num(t).plus(this.dragOrigin.dragDeltaX).toFixed(0),this.dragDeltaX=Math.min(Math.max(0,this.dragDeltaX),this.maxDeltaX))}},markerMove:function(e){if(this.cData&&0<this.cData.length){var r={x:e.offsetX,y:e.offsetY};if(0<=r.x&&r.x<=this.chartSize.width&&0<=r.y&&r.y<=this.chartSize.height){var a=this.crossCurveRangeY,t=Object.keys(a).find(function(e){var t=l(a[e],2),n=t[0],i=t[1];return n<=r.y&&r.y<=i}),n=this.findNearest(this.cData,r.x),i=l(a[t],1)[0],s="volume"===t?"volume":"price",o=this.heightRate[s],u=this.computedRange[s];this.crossCurveInfo={origin:{x:n.x,y:Math.floor(r.y)},time:n.time,value:void 0!==o?+this.$num(u.max).minus(this.$num(r.y).minus(i).div(o)).toFixed(u.precision):i}}else this.resetCrossCurveInfo()}},resetCrossCurveInfo:function(){this.crossCurveInfo=null},findNearest:function(e,t){if(e.length<1)return{x:0,time:0};var n=Math.floor((e.length-1)/2),i=this.calcX(e[n].origin);if(e.length<2)return{x:i,time:e[0].prices[0]};if(2!==e.length)return 0<i-t?this.findNearest(e.slice(0,n+1),t):i-t<0?this.findNearest(e.slice(n),t):{x:i,time:e[n].prices[0]};var r=this.calcX(e[1].origin);return 0<Math.abs(r-t)-Math.abs(i-t)?{x:i,time:e[0].prices[0]}:{x:r,time:e[1].prices[0]}},calcX:function(e){return+this.$num(e.x).plus(this.$num(this.cCandleWidth).div(2).round(0,O.down))},mouseScale:function(e){this.scale(0<e.deltaY?-1:1,e.timeStamp)},scale:function(e,t){if(!(t-this.scaleStartTime<T)){this.scaleStartTime=t;var n=this.candleWidth+2*e;this.candleWidth=Math.max(A.candleMinWidth,n)}},bindTouch:function(){var r=this;this.isMobile&&this.$nextTick(function(){r.touchRes||(r.touchRes=[i(r.$refs.cursor,function(e){var t=e.type,n=e.timeStamp;if("panMove"===t){var i=e.centerDelta.deltaX;r.klineMove({deltaX:i,timeStamp:n})}else"panStart"===t?r.dragOrigin={dragDeltaX:r.dragDeltaX,timeStamp:n}:"panEnd"===t&&(r.dragOrigin=null)},function(e){var t=e.event,n=e.type;console.log(t,n),t.preventDefault()}),h(r.$refs.cursor,function(e){var t=e.pinchScale,n=e.timeStamp;1!==t&&r.scale(1<t?1:-1,n)},function(e){e.event.preventDefault()})])})}},beforeMount:function(){window.addEventListener("mousemove",this.resetCrossCurveInfo),window.addEventListener("resize",this.resize)},mounted:function(){this.getSize()},beforeDestroy:function(){window.removeEventListener("mousemove",this.resetCrossCurveInfo),window.removeEventListener("resize",this.resize),this.touchRes&&this.touchRes.forEach(function(e){return e.unsubscribe()})}};return tn=void 0,nn=!(Qt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"wrap",staticClass:"kline-wrap",class:{"full-screen":t.isFullScreen&&!(t.isMobile&&t.isPortrait),mobile:t.isMobile}},[n("tool-bar",{ref:"toolbar",attrs:{isMobile:t.isMobile,periodVal:t.period},on:{period:function(e){t.$emit("update:period",e)},candleType:function(e){t.type=e},indicators:function(e){t.indicators=e},isFullScreen:function(e){t.isFullScreen=e}}}),t._v(" "),n("svg",{ref:"kline",staticClass:"kline",attrs:{width:t.size&&t.size.width,height:t.size&&t.size.height,viewBox:t.viewBox}},[t.chartSize?[n("defs",[n("clipPath",{attrs:{id:"chart-content-clip"}},[n("rect",{attrs:{x:"0",y:"0",width:t.chartSize.width,height:t.size.height}})])]),t._v(" "),t.candlesSize&&t.computedRange?n("candles",{attrs:{size:t.candlesSize,data:t.cData,range:t.computedRange.price,heightRate:t.heightRate.price,type:t.type,showHLine:!0,candleWidth:t.cCandleWidth,candleInterval:t.candleInterval,svgWidth:t.size.width,fontSize:t.fontSize},on:{yWidth:t.setYAxisWidth}}):t._e(),t._v(" "),t.showVolumes&&t.volumesSize&&t.computedRange?n("volumes",{attrs:{data:t.cData,range:t.computedRange.volume,heightRate:t.heightRate.volume,y:t.candlesSize.height,size:t.volumesSize,candleWidth:t.cCandleWidth,candleInterval:t.candleInterval,svgWidth:t.size.width,showHLine:t.showTechIndicator,fontSize:t.fontSize},on:{yWidth:t.setYAxisWidth}}):t._e(),t._v(" "),t.period?n("x-axis",{attrs:{data:t.cData,showLength:t.sliceLength,candleWidth:t.cCandleWidth,candleInterval:t.candleInterval,y:t.chartSize.height,width:t.candlesSize.width,period:t.period.value,fontSize:t.fontSize},on:{xHeight:t.setXAxisHeight}}):t._e(),t._v(" "),t.currPrice?n("curr-price",{attrs:{y:t.currPrice.y,width:t.candlesSize.width,price:t.currPrice.value,fontSize:t.fontSize,textWidth:t.markerWidth,isUp:t.currPrice.isUp}}):t._e(),t._v(" "),t.axis.x.height&&t.crossCurveInfo?n("cross-curve",{attrs:{origin:t.crossCurveInfo.origin,time:t.crossCurveInfo.time,value:t.crossCurveInfo.value,fontSize:t.fontSize,textSize:t.textSize,chartSize:t.chartSize}}):t._e(),t._v(" "),n("rect",{ref:"cursor",staticClass:"cursor",attrs:{x:"0",y:"0",width:t.chartSize.width,height:t.chartSize.height},on:{mousedown:t.startDrag,mousemove:function(e){return e.stopPropagation(),t.mouseMove(e)},mouseup:t.endDrag,wheel:function(e){return e.stopPropagation(),e.preventDefault(),t.mouseScale(e)}}})]:t._e()],2),t._v(" "),t.loading?n("div",{staticClass:"loading-wrap"},[n("loading",{attrs:{width:t.loadingSize,height:t.loadingSize}})],1):t.data.length<1?n("div",{staticClass:"no-data"},[t._v(t._s(t.$lang.$t("data.no")))]):t.isMobile&&t.isFullScreen&&t.isPortrait?n("div",{staticClass:"see-landscape"},[t._v(t._s(t.$lang.$t("see.landscape")))]):t._e()],1)},staticRenderFns:[]}),(rn=("function"==typeof(en=an)?en.options:en)||{}).__file="Index.vue",rn.render||(rn.render=Qt.render,rn.staticRenderFns=Qt.staticRenderFns,rn._compiled=!0,nn&&(rn.functional=!0)),rn._scopeId=tn,rn});
//# sourceMappingURL=index.js.map
