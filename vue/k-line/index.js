!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Kline=e()}(this,function(){"use strict";function d(){var t=Array.prototype.filter.call(document.getElementsByTagName("meta"),function(t){return"viewport"===t.getAttribute("name")});if(t.length<1)return 1;var e=(t=t[t.length-1]).getAttribute("content").match(/initial-scale\s*=\s*([^,]+)(,|$)/);return(e?+e[1]:1)||1}function a(){return Math.random().toFixed(6)}function o(t,e){var i=this;i.observer=t,i.id=e,i.unsubscribe=function(t){var e=Object.keys(i.observer.subscribes).find(function(t){return i.observer.subscribes[t].id===i.id});i.observer.subscribes.splice(e,1),"function"==typeof t&&t(),console.log("simple-observer: Subscription: Unsubscribe success!")}}var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),z=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t},f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},D=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){r=!0,a=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},v=function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)};function g(t,e){return Math.sqrt(Math.pow(t.pageX-e.pageX,2)+Math.pow(t.pageY-e.pageY,2))}function p(t,e){return Math.atan((t.pageY-e.pageY)/(t.pageX-e.pageX))/Math.PI*180}function x(e,i){function t(t){return i?(+e[t]+ +i[t])/2:+e[t]}return{clientX:t("clientX"),clientY:t("clientY"),pageX:t("pageX"),pageY:t("pageY"),screenX:t("screenX"),screenY:t("screenY")}}var y=function(t){if("function"!=typeof t)throw new Error("simple-observer: Observer: Params generator of constructor is invalid, must be a function");var r=this;r.subscribes=[],r.subscribe=function(t){for(var e=a(),i=0,n=function(t){return r.subscribes[t].id===e};i=Object.keys(r.subscribes).find(n),e=a(),void 0!==i;);return r.subscribes.push({id:e,callback:t}),new o(r,e)},t(function(){var e=arguments;r.subscribes.map(function(t){t.callback.apply(r,e)})})};function s(e,o){var i=null;window.TouchObservers||(window.TouchObservers=[]);var s=window.TouchObservers.find(function(t){return t.el===e});if(s&&s.Observer){if(!o)return s;s.unbind()}else{var t=new y(function(t){i=t});s?(s.Observer=t,s.next=i):(s={Observer:t,next:i,el:e},window.TouchObservers.push(s))}var c=null,u=null,h=0,l=0;function n(t){c=Array.prototype.map.call(t.targetTouches,function(t){return t}),u=0<c.length?x(c[0],c[1]):null,l=1<c.length?p(c[0],c[1]):0,h=1<c.length?g(c[0],c[1]):0;var e={type:t.type,touches:c,center:u,angle:l,distance:h,timeStamp:t.timeStamp,centerDelta:null,deltaAngle:0,pinchScale:1,event:t};"function"==typeof o?o(e):o&&t.preventDefault(),s.next(e)}function r(t){var e=c.map(function(e){return Array.prototype.find.call(t.changedTouches,function(t){return t.identifier===e.identifier})}).filter(function(t){return!!t}),i=0<e.length?x(e[0],e[1]):null,n=1<e.length?p(e[0],e[1]):0,r=1<e.length?g(e[0],e[1]):0,a={type:t.type,touches:e,center:i,angle:n,distance:r,timeStamp:t.timeStamp,centerDelta:function(t,e){var i=d();if(!t||!e)return{deltaX:0,deltaY:0,deltaDistance:0,direction:"",windowScale:i};var n=t.pageX-e.pageX,r=t.pageY-e.pageY,a=Math.sqrt(Math.pow(n,2)+Math.pow(r,2)),o=Math.abs(n)<=30/i?"":0<n?"right":"left",s=Math.abs(r)<=30/i?"":0<r?"bottom":"top";return{deltaX:n,deltaY:r,deltaDistance:a,direction:o+(o&&s?"-":"")+s,windowScale:i}}(i,u),deltaAngle:n-l,pinchScale:r/h||1,event:t};"function"==typeof o?o(a):o&&t.preventDefault(),s.next(a)}function a(){e.removeEventListener("touchstart",n),e.removeEventListener("touchmove",r),e.removeEventListener("touchend",r)}return e.addEventListener("touchstart",n),e.addEventListener("touchmove",r),e.addEventListener("touchend",r),s.unbind=a,s.destroy=function(){a(),s.Observer=null},s}function t(n){return function(t,e,i){return"function"==typeof t&&(i=e||null,e=t,t=window),n(t,e,i)}}function c(t){return t[0].toUpperCase()+t.slice(1)}var u=Object.assign||function(){return Array.prototype.map.call(arguments,function(t){return"object"===(void 0===t?"undefined":m(t))?t:{}}).reduce(function(e,i){return Object.keys(i).forEach(function(t){e[t]=i[t]}),e},{})};var n=t(function(t,e,i){var n=s(t,i);return{unsubscribe:n.Observer.subscribe(function(t){1===t.touches.length&&e(u(t,{type:"pan"+c(t.type.replace("touch",""))}))}).unsubscribe,touchObserver:n}});var r=t(function(t,e,i){var n=s(t,i),r=0;return{unsubscribe:n.Observer.subscribe(function(t){if("touchend"===t.type&&0===r)return e(u(t,{type:"pinchEnd"})),void r++;2<=t.touches.length&&(e(u(t,{type:"pinch"+c(t.type.replace("touch",""))})),r=0)}).unsubscribe,touchObserver:n}});var h=t(function(t,e,i){var n=s(t,i),r=0;return{unsubscribe:n.Observer.subscribe(function(t){if(1===t.touches.length)if("touchstart"===t.type)r=t.timeStamp;else if("touchend"===t.type){if(250<t.timeStamp-r)return;if(t.centerDelta.deltaDistance>10/t.centerDelta.windowScale)return;e(u(t,{type:"tap"}))}}).unsubscribe,touchObserver:n}}),l=S,b=S,M=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,w=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function S(t){t||(t={});var e=t.ua;return e||"undefined"==typeof navigator||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"==typeof e&&(t.tablet?w.test(e):M.test(e))}l.isMobile=b;var C=function(){function t(){e(this,t)}return i(t,null,[{key:"toExponential",value:function(t){var e=0,i=t<0?-1:1,n=Math.abs(t);if(n<1){for(;n<1;)e-=1,n*=10;n=Math.abs(t)/Math.pow(10,e)}else for(;10<n;)e+=1,n/=10;return{value:n*i,exponential:e}}},{key:"toIntWithExponential",value:function(t){var e=t.toString().split(".");return{value:+e.join(""),exponential:e[0].length-1-(e[1]?e[1].length:0)}}},{key:"cPrice",value:function(t){return+(+t).toFixed(this.pPrecision)}},{key:"cVolume",value:function(t){return+(+t).toFixed(this.volPrecision)}},{key:"cStaticVal",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2,i=this.toExponential(t),n=i.value.toFixed(Math.max(0,e-1));return 0<=i.exponential?n*Math.pow(10,i.exponential):n/Math.pow(10,-i.exponential)}},{key:"cVal",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2;return+(+t).toFixed(e)}},{key:"toFixed",value:function(t,e){if(0<=e)return this.cVal(t,e);var i=this.toExponential(t),n=i.value,r=i.exponential;return n.toFixed(Math.max(0,r+e))*Math.pow(10,r)}}]),t}();function _(r,a){return(2<arguments.length&&void 0!==arguments[2]?arguments[2]:[5,10,30,60]).reduce(function(t,e){var n=Math.max(0,r-e+1),i=r-n+1;return t[e]=C.cPrice([].concat(v(Array(i))).reduce(function(t,e,i){return t+a[n+i][4]},0)/i),t},{})}function R(t){var a=t.index,e=t.dataArr,o=void 0===e?[]:e,i=t.currVal,s=void 0===i?void 0:i,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return(2<arguments.length&&void 0!==arguments[2]?arguments[2]:[12,26]).reduce(function(t,e){var i=void 0!==s?s:o[a][4];if(0==+a)t[e]=s?i:C.cPrice(i);else{var n=2/(e+1),r=n*i+(1-n)*(c[e]||i);t[e]=s?r:C.cPrice(r)}return t},{})}function O(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:7,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:2,r=_(t,e,[i])[i],a=function(t,n,r){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:5,a=Math.max(0,t-e+1),i=t-a+1;return Math.sqrt([].concat(v(Array(i))).reduce(function(t,e,i){return t+Math.pow(n[a+i][4]-r,2)},0)/i)}(t,e,r,i);return{MA:r,UP:C.cPrice(r+n*a),DOWN:C.cPrice(r-n*a)}}C.pPrecision=0,C.volPrecision=0;Object.freeze([Date.now(),1,1,1,1,1,1]);var I=Object.freeze([{name:"candles",value:"normal"},{name:"heikin-ashi",value:"average"}]),A=Object.freeze([{name:"time",value:6e4},{name:"1min",value:6e4},{name:"5min",value:3e5},{name:"15min",value:9e5},{name:"30min",value:18e5},{name:"1hour",value:36e5},{name:"4hour",value:144e5},{name:"1day",value:864e5},{name:"5day",value:432e6},{name:"1week",value:6048e5}]),k=Object.freeze({base:[{name:"MA",value:"MA",method:function(t,e){return(2<arguments.length&&void 0!==arguments[2]?arguments[2]:[]).concat([_(t,e,[5,10,30,60])])}},{name:"EMA",value:"EMA",method:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];return i.concat([R({index:t,dataArr:e},i[i.length-1],[12,26])])}},{name:"BOLL",value:"BOLL",method:function(t,e){return(2<arguments.length&&void 0!==arguments[2]?arguments[2]:[]).concat([O(t,e,7,2)])}}],technical:[{name:"MACD",value:"MACD",method:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];return i.concat([function(t,e){var i,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:12,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:26,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:9,s=R({index:t,dataArr:e},(z(i={},r,n.EMAShort),z(i,a,n.EMALong),i),[r,a]),c=s[r],u=s[a],h=C.cPrice(c-u),l=C.cPrice(R({index:t,currVal:h},z({},o,n.DEA),[o])[o]);return{EMAShort:c,EMALong:u,DIF:h,DEA:l,MACD:C.cPrice(2*(h-l))}}(t,e,i[i.length-1],12,26,9)])},bar:["MACD"],ignore:["EMAShort","EMALong"]},{name:"KDJ",value:"KDJ",method:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];return i.concat([function(t,a,e){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:9,n=f({K:50,D:50,J:50},e),o=Math.max(0,t-i+1),s={high:0,low:1/0};if([].concat(v(Array(t-o+1))).forEach(function(t,e){var i=D(a[o+e],4),n=i[2],r=i[3];s.high=Math.max(s.high,n),s.low=Math.min(s.low,r)}),s.high-s.low==0)return n;var r=(a[t][4]-s.low)/(s.high-s.low)*100,c=C.cVal(2/3*n.K+1/3*r),u=C.cVal(2/3*n.D+1/3*c);return{K:c,D:u,J:C.cVal(3*c-2*u)}}(t,e,i[i.length-1],9)])}},{name:"RSI",value:"RSI",method:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];return i.concat([function(i,s){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return(3<arguments.length&&void 0!==arguments[3]?arguments[3]:[5,10,14]).reduce(function(t,e){var a=Math.max(0,i-e+1),o={positive:0,negative:0};return[].concat(v(Array(i-a+1))).forEach(function(t,e){var i=s[a+e-1]||s[a+e],n=D(i,5)[4],r=D(s[a+e],5)[4]-n||0;0<=r?o.positive+=r:o.negative+=-r}),o.positive+o.negative===0?t[e]=n[e]||50:t[e]=C.cVal(o.positive/(o.positive+o.negative)*100),t},{})}(t,e,i[i.length-1],[5,10,14])])}},{name:"WR",value:"WR",method:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];return i.concat([function(i,s){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return(3<arguments.length&&void 0!==arguments[3]?arguments[3]:[6,10]).reduce(function(t,e){var a=Math.max(0,i-e+1),o={high:0,low:1/0};return[].concat(v(Array(i-a+1))).forEach(function(t,e){var i=D(s[a+e],4),n=i[2],r=i[3];o.high=Math.max(o.high,n),o.low=Math.min(o.low,r)}),o.high-o.low==0?t[e]=n[e]||50:t[e]=C.cVal((o.high-s[i][4])/(o.high-o.low)*100),t},{})}(t,e,i[i.length-1],[6,10])])}}]}),T=d(),W=75/T,Y=30/T,F=Object.freeze([{name:"Jan",value:1},{name:"Feb",value:2},{name:"Mar",value:3},{name:"Apr",value:4},{name:"May",value:5},{name:"Jun",value:6},{name:"Jul",value:7},{name:"Aug",value:8},{name:"Sep",value:9},{name:"Oct",value:10},{name:"Nov",value:11},{name:"Dec",value:12}]),H=(Object.freeze({down:0,halfUp:1,halfDown:2,up:3}),Object.freeze({candleWidth:Math.round(6/T),candleMinWidth:Math.round(1/T),candleMaxWidth:20*Math.round(1/T),textDelta:Math.round(8/T),markerLineLength:Math.round(4/T),markerWidth:Math.round(100/T),yMarkerHeight:Math.round(20/T),xMarkerHeight:Math.round(24/T),xHeightDelta:Math.round(8/T),defaultFontSize:Math.round(10/T),candleChartPadding:Math.round(10/T),indicatorChartHeight:Math.round(100/T),indicatorChartPadding:Math.round(10/T),volumeChartHeight:Math.round(100/T),volumeChartPaddingBottom:Math.round(5/T),loadingSize:Math.round(64/T)})),$=1e3/(window.ActiveXObject||"ActiveXObject"in window?50:60),E=l();function X(t){return t.getBoundingClientRect()}var L=X,P=function(t){var e=function(t){for(var e=X(t),i={pageLeft:e.left,pageTop:e.top},n=t;n.offsetParent;)e=X(n.offsetParent),i.pageLeft+=e.left,i.pageTop+=e.top;return i}(t);return{clientLeft:e.pageLeft-document.documentElement.scrollLeft,clientTop:e.pageTop-document.documentElement.scrollTop}};function N(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(e)return 0<e?"up":"down";var i=D(t,5),n=i[1];return 0<i[4]-n?"up":"down"}function j(){var t=+window.orientation;return 90!==t&&-90!==t}var V={langName:"zh",time:"分时","1min":"1min","5min":"5min","15min":"15min","30min":"30min","1hour":"1hour","4hour":"4hour","1day":"1day","5day":"5day","1week":"1week","1mon":"1mon",Jan:"1月",Feb:"2月",Mar:"3月",Apr:"4月",May:"5月",Jun:"6月",Jul:"7月",Aug:"8月",Sep:"9月",Oct:"10月",Nov:"11月",Dec:"12月",yyyy:"{year}年",candles:"K线图","heikin-ashi":"平均K线图",periods:"周期","candle-types":"K线类型",indicators:"指标","indicators.base":"基础指标","indicators.technical":"技术指标",MA:"MA",EMA:"EMA",BOLL:"BOLL",SAR:"SAR",MACD:"MACD",KDJ:"KDJ",StochRSI:"StochRSI",RSI:"RSI",DMI:"DMI",OBV:"OBV",DMA:"DMA",TRIX:"TRIX",BRAR:"BRAR",VR:"VR",EMV:"EMV",WR:"WR",ROC:"ROC",MTM:"MTM",PSY:"PSY","full-screen":"全屏","full-screen-exit":"退出全屏","data.no":"无数据","see.landscape":"请横屏观看","back-to-portrait":"返回竖屏"};var B=function(){function t(){e(this,t)}return i(t,null,[{key:"addLangSource",value:function(t){if(!t.langName)throw new Error("Key `langName` in lang object is missed");this.langs[t.langName]=t,console.log("Your custom language set successful")}},{key:"$t",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!this.langs[this.lang])throw new Error("(Lang.js) No language: "+this.lang);var i=this.langs[this.lang][t];return i?Object.keys(e).map(function(t){return{rule:new RegExp("{"+t+"}","g"),value:e[t]}}).reduce(function(t,e){return t.replace(e.reg,e.value)},i):(console.warn("(Lang.js) Key: "+t+" is not exist"),t)}},{key:"setLang",value:function(t){if(!this.langs[t])throw new Error("(Lang.js) No language: "+t);this.lang=t}}]),t}();B.langs=[{langName:"en",time:"time","1min":"1min","5min":"5min","15min":"15min","30min":"30min","1hour":"1hour","4hour":"4hour","1day":"1day","5day":"5day","1week":"1week","1mon":"1mon",Jan:"Jan",Feb:"Feb",Mar:"Mar",Apr:"Apr",May:"May",Jun:"Jun",Jul:"Jul",Aug:"Aug",Sep:"Sep",Oct:"Oct",Nov:"Nov",Dec:"Dec",yyyy:"{year}",candles:"Candles","heikin-ashi":"Heikin Ashi",periods:"Periods","candle-types":"Candle Types",indicators:"Indicators","indicators.base":"Base Indicators","indicators.technical":"Technical Indicators",MA:"MA",EMA:"EMA",BOLL:"BOLL",SAR:"SAR",MACD:"MACD",KDJ:"KDJ",StochRSI:"StochRSI",RSI:"RSI",DMI:"DMI",OBV:"OBV",DMA:"DMA",TRIX:"TRIX",BRAR:"BRAR",VR:"VR",EMV:"EMV",WR:"WR",ROC:"ROC",MTM:"MTM",PSY:"PSY","full-screen":"Full Screen","full-screen-exit":"Exit Full Screen","data.no":"No Data","see.landscape":"Please see it on the horizontal screen","back-to-portrait":"Back to portrait"},V].reduce(function(t,e){return t[e.langName]=e,t},{}),B.lang=V.langName;var J={created:function(){this.$lang=B},data:function(){return{$lang:null}}},U={props:{data:{type:Array,default:function(){return[]}}},data:function(){return{size:null,candleWidth:H.candleWidth,dragDeltaX:0,cData:[],originRange:null,inds:{}}},computed:{contentWidth:function(){return this.chartSize?this.chartSize.width-H.candleChartPadding:0},cCandleWidth:function(){return 2*Math.floor(this.candleWidth/2)+1},candleInterval:function(){return Math.ceil(this.cCandleWidth/3)-1},candleOffsetWidth:function(){return Math.round(this.cCandleWidth+this.candleInterval)},cutLength:function(){if(!this.size)return 0;var t=Math.ceil((this.contentWidth+this.dragDeltaX)/this.candleOffsetWidth);return t<this.data.length-1?t+1:Math.max(1,t-1)},sliceLength:function(){if(!this.size)return 0;var t=Math.ceil(this.contentWidth/this.candleOffsetWidth);return t<this.data.length-1?t+1:Math.max(1,t-1)},cutIndex:function(){return Math.max(0,this.data.length-this.cutLength)},showData:function(){return this.size?this.data.slice(this.cutIndex,this.cutIndex+this.sliceLength):[]},startX:function(){return this.contentWidth-this.candleOffsetWidth*this.sliceLength},computedRange:function(){if(!this.originRange)return null;var t=this.originRange,e=t.price,i=t.volume,n=t.indicator;return{price:this.calcRange(e,this.candlesSize.height,{top:40,bottom:40}),volume:this.calcRange(i,this.volumeHeight,{top:30,bottom:10}),indicator:this.calcRange(n,this.indicatorHeight,{top:10,bottom:10})}},heightRate:function(){if(!this.computedRange)return{};var t=this.computedRange,e=t.price,i=t.volume,n=t.indicator;return{price:this.calcHeightRate(e,this.candlesSize.height),volume:this.calcHeightRate(i,this.volumeHeight),indicator:this.calcHeightRate(n,this.indicatorHeight)}},currPrice:function(){var t=(this.data||[]).length;if(!this.data||t<1||!this.computedRange||!this.heightRate.price)return null;var e=this.data[t-1],i=this.data[t-2],n=this.type===I[0].value?e:this.cPrices(e,i||e),r=D(n,5),a=r[1],o=r[4],s=this.computedRange.price,c=s.max;return o<s.min||c<=o?null:{value:o,y:Math.ceil((s.max-o)*this.heightRate.price),isUp:0<=o-a}}},watch:{showData:function(p){var x=this;if(0<p.length){var y=[],b=this.initRange(),M=this.initRange(),w=this.initRange(),S={};p.forEach(function(t,e){var i=Math.max(t[1],t[2],t[4]),n=Math.min(t[1],t[3],t[4]),r=D(t,6)[5];i>b.max&&(b.max=i),n<b.min&&(b.min=n),r>M.max&&(M.max=r),r<M.min&&(M.min=r),t.slice(1,5).forEach(function(t){b.precision=Math.max(b.precision,x.getPrecision(t))}),M.precision=Math.max(M.precision,x.getPrecision(M)),C.pPrecision=b.precision;var a=x.heightRate.price?x.calcOrigin(t,e):null;if(y.push({prices:x.type===I[1].value?x.cPrices(t,p[e-1]||t,b.precision):t,origin:a}),x.baseIndicator){var o=x.dealInd(e,x.baseIndicator,S),s=o.type,c=o.data,u=o.max,h=o.min;S.base=z({},s,c),h<b.min&&(b.min=h),u>b.max&&(b.max=u)}if(x.techIndicator){var l=x.dealInd(e,x.techIndicator,S,"tech"),d=l.type,f=l.data,v=l.max,m=l.min,g=l.values;S.tech=z({},d,f),m<w.min&&(w.min=m),v>w.max&&(w.max=v),g.forEach(function(t){w.precision=Math.max(w.precision,x.getPrecision(t))})}}),b.power=this.calcFactorForAxis(b.max,b.min,b.precision),M.power=this.calcFactorForAxis(M.max,M.min,M.precision),this.techIndicator&&(w.power=this.calcFactorForAxis(w.max,w.min,w.precision)),this.cData=y,this.originRange=f({},this.originRange,{price:b,volume:M},this.techIndicator?{indicator:w}:{}),this.inds=S}},"heightRate.price":function(){var n=this;this.cData=this.cData.map(function(t,e){var i=t.prices;return{prices:i,origin:n.calcOrigin(i,e)}})},baseIndicator:function(s){var c=this;if(s){var u={};this.cData.forEach(function(t,e){var i=c.dealInd(e,s,u),n=i.type,r=i.data,a=i.max,o=i.min;u.base=z({},n,r),c.originRange&&c.originRange.price&&(o<c.originRange.price.min&&(c.originRange.price.min=o),a>c.originRange.price.max&&(c.originRange.price.max=a))}),this.$set(this.inds,"base",u.base)}else this.inds.base=void 0},techIndicator:function(c){var u=this;if(c){var h={},l=this.initRange();this.cData.forEach(function(t,e){var i=u.dealInd(e,c,h,"tech"),n=i.type,r=i.data,a=i.max,o=i.min,s=i.values;h.tech=z({},n,r),o<l.min&&(l.min=o),a>l.max&&(l.max=a),s.forEach(function(t){l.precision=Math.max(l.precision,u.getPrecision(t))})}),this.$set(this.inds,"tech",h.tech),l.power=this.calcFactorForAxis(l.max,l.min,l.precision),this.originRange=f({},this.originRange,{indicator:l})}else this.inds.tech=void 0}},methods:{initRange:function(){return{max:0,min:1/0,precision:0,power:0}},calcOrigin:function(t,e){return{x:Math.round(this.candleOffsetWidth*e+this.startX),y:Math.ceil((this.computedRange.price.max-Math.max(t[1],t[2],t[4]))*this.heightRate.price)}},cPrices:function(t,e){var i,n=(i=t,Array.isArray(i)?i:Array.from(i)),r=n[0],a=n[1],o=n[2],s=n[3],c=n[4],u=n.slice(5),h=e[1],l=e[4],d=C.cPrice((h+l)/2),f=C.cPrice((o+s+a+c)/4);return[r,d,Math.max(o,d,f),Math.min(s,d,f),f].concat(v(u))},getPrecision:function(t){var e=t.toString().split("."),i=D(e,2)[1];return i?i.length:0},calcFactorForAxis:function(t,e,i){var n=C.toExponential(t-e).exponential;return Math.max(-i,n-1)},calcRange:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{top:1,bottom:1};if(!t)return null;var n=t.max,r=t.min,a=t.power,o=t.precision;if(!this.size||!e)return{max:n,min:r,power:a,precision:o};var s=(n-r)/e;return{max:C.cVal(n+s*i.top,o),min:C.cVal(r-s*i.bottom,o),power:a,precision:o}},calcHeightRate:function(t,e){if(!e||!t)return 1;var i=t.max-t.min;return i?e/i:1},dealInd:function(t,e,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"base",r=e.value,a=e.method,o=e.ignore,s=a(this.cutIndex+t,this.data,i[n]&&i[n][r]),c=s[s.length-1],u=Object.keys(c).filter(function(t){return!o||!o.includes(t)}).sort(function(t,e){return c[t]-c[e]});return{type:r,data:s,max:c[u[u.length-1]],min:c[u[0]],values:u.map(function(t){return c[t]})}}}},K={name:"YAxis",mixins:[J],props:{origin:Object,height:Number,heightRate:Number,range:Object,fontSize:Number,isVolume:Boolean},data:function(){return{textDelta:H.textDelta,markerLineLength:H.markerLineLength}},computed:{cOrigin:function(){var t=this.origin||{},e=t.x,i=void 0===e?0:e,n=t.y,r=void 0===n?0:n;return{x:Math.round(i),y:Math.round(r)}},cHeight:function(){return Math.round(this.height)},factor:function(){return Math.pow(10,this.range.power||0)},unitHeight:function(){return this.range&&this.heightRate?this.heightRate*this.factor:0},rangeOfTwo:function(){return this.range&&this.unitHeight?{max:Math.ceil(2*Y/this.unitHeight),min:Math.floor(Y/this.unitHeight)}:null},halfFontSize:function(){return this.fontSize/this.unitHeight},maxV:function(){if(this.range.max*this.range.min<0){var t=[Math.abs(this.range.max),Math.abs(this.range.min)].sort(),e=D(t,2),i=e[0];if(e[1]/i<5)return i/this.factor-this.halfFontSize}return this.isVolume&&this.range.min<0?1/0:null},rule:function(){var e=this;if(!this.rangeOfTwo)return null;var t=this.rangeOfTwo,i=t.max,r=t.min;if(i<=r)return null;var n=[].concat(v(Array(i-r))).reduce(function(t,e,i){var n=r+i;return!n||n%2!=0&&n%5!=0?t:t.concat([{value:n}])},[]);if(this.maxV){var a=n.filter(function(t){return t.value<e.maxV});return a[a.length-1]||n[0]||{value:1}}return n[n.length-1]||{value:1}},zero:function(){var t=this.range,e=t.max,i=t.min,n=t.precision;return this.calcCoord((0).toFixed(n),Math.round(e/this.factor),this.isVolume?Math.round(this.cOrigin.y+this.height+i*this.heightRate):0)},coords:function(){var o=this;if(!this.origin||!this.rule||!this.range||Object.keys(this.range).length<1)return[];var t=this.range,e=t.max,s=void 0===e?1:e,i=t.min,n=void 0===i?0:i,r=t.power,c=void 0===r?0:r,u=t.precision;return[].concat(v(Array(Math.ceil((s-n)/this.factor)))).reduce(function(t,e,i){if(Math.ceil(s/o.factor-i)%o.rule.value==0){var n=s-o.factor*i;if(o.maxV&&Math.abs(n/o.factor)<o.rule.value/2)return t;var r=o.calcCoord(0<-c?n.toFixed(u):C.toFixed(n,-c).toString(),i),a=r.textOrigin.y-o.fontSize;if(o.cOrigin.y<=a&&r.textOrigin.y<=o.cOrigin.y+o.height)return t.concat(r)}return t},this.maxV?[this.zero]:[])}},watch:{coords:function(){this.emitWidth()},origin:function(){this.emitWidth()}},methods:{emitWidth:function(){var i=this;0<this.coords.length&&this.origin&&this.$nextTick(function(){var t=i.$refs.yAxis[0]||i.$refs.yAxis;if(t){var e=L(t);i.$emit("yWidth",Math.floor(e.width+H.textDelta))}})},calcCoord:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n={x:+this.cOrigin.x,y:i||Math.floor(e*this.unitHeight+this.cOrigin.y)};return{text:t,origin:n,textOrigin:{x:Math.round(n.x+this.textDelta),y:Math.round(n.y+this.fontSize/2-1)}}}}};var G,Z,q,Q,tt,et=(q=void 0,Q=!(G={render:function(){var i=this,t=i.$createElement,n=i._self._c||t;return i.origin?n("g",{ref:"yAxis",staticClass:"y-axis"},[n("rect",{staticClass:"axis-line y",attrs:{x:i.cOrigin.x,y:i.cOrigin.y,width:"1",height:i.cHeight}}),i._v(" "),i._l(i.coords,function(t,e){return n("g",{key:e,staticClass:"axis-coord y"},[n("rect",{staticClass:"axis-coord-marker y",attrs:{x:t.origin.x,y:t.origin.y,width:i.markerLineLength,height:"1"}}),i._v(" "),n("text",{staticClass:"axis-coord-text y",attrs:{x:t.textOrigin.x,y:t.textOrigin.y,"font-size":i.fontSize}},[i._v("\n      "+i._s(t.text)+"\n    ")])])})],2):i._e()},staticRenderFns:[]}),(tt=("function"==typeof(Z=K)?Z.options:Z)||{}).__file="YAxis.vue",tt.render||(tt.render=G.render,tt.staticRenderFns=G.staticRenderFns,tt._compiled=!0,Q&&(tt.functional=!0)),tt._scopeId=q,tt),it={name:"Candles",mixins:[J],components:{YAxis:et},props:{data:{type:Array,default:function(){return[]}},indicator:Object,range:Object,heightRate:Number,type:{type:String,default:I[0].value},showHLine:Boolean,svgWidth:Number,size:Object,candleWidth:Number,candleInterval:Number,fontSize:Number},data:function(){return{CandleTypes:I,paths:{},indicatorLines:""}},computed:{deltaX:function(){return Math.floor(this.candleWidth/2)},yAxisOrigin:function(){return{x:this.size.width,y:0}},rectY:function(){return this.size.height-1},cIndicator:function(){if(!this.indicator)return null;var t=Object.keys(this.indicator)[0];return{type:t,data:this.indicator[t]}}},watch:{data:{handler:function(){this.setPaths()},immediate:!0},heightRate:{handler:function(){this.setPaths()},immediate:!0},cIndicator:{handler:function(){this.setPaths()},immediate:!0}},methods:{setPaths:function(){var c=this,u={},h="";this.data.length<1||!this.data[0].origin||!this.heightRate||this.data.forEach(function(t,e){var i=t.prices,n=t.origin,r=c.className(i),a=c.d(n,i,e),o=a.candle,s=a.line;u[r]?u[r]+=o:u[r]=o,s&&("object"===(void 0===s?"undefined":m(s))?h=Object.keys(s).reduce(function(t,e){return t[e]=(t[e]||"")+s[e],t},h||{}):h+=s)}),this.paths=u,this.indicatorLines=h},d:function(t,e,i){var n=this,r=t.x,a=t.y,o=D(e,5),s=o[1],c=o[2],u=o[3],h=o[4],l=[Math.ceil((c-Math.max(s,h))*this.heightRate),Math.max(1,Math.ceil(Math.abs(s-h)*this.heightRate)),Math.ceil((Math.min(s,h)-u)*this.heightRate)],d="M"+(this.deltaX+r)+","+a+" h1 v"+l[0]+" h"+this.deltaX+" v"+l[1]+" h"+-this.deltaX+" v"+l[2]+" h-1 v"+-l[2]+" h"+-this.deltaX+" v"+-l[1]+" h"+this.deltaX+" z\n\r";if(!this.cIndicator||!this.cIndicator.data||!this.cIndicator.data[i])return{candle:d};var f=this.cIndicator.data[i],v=this.deltaX+r+.5;return{candle:d,line:"object"===(void 0===f?"undefined":m(f))?Object.keys(f).reduce(function(t,e){return t[e]=n.dot(i,v,f[e]),t},{}):this.dot(i,v,f)}},dot:function(t,e,i){return(0===t?"M":"L")+e+","+(Math.ceil((this.range.max-i)*this.heightRate)-.5)+"\n\r"},className:N}};var nt,rt,at,ot,st,ct=(at=void 0,ot=!(nt={render:function(){var i=this,t=i.$createElement,n=i._self._c||t;return n("g",{staticClass:"candles"},[n("g",{attrs:{"clip-path":"url(#chart-content-clip)"}},i._l(i.paths,function(t,e){return n("path",{key:e,staticClass:"candle",class:e,attrs:{d:t}})})),i._v(" "),i.cIndicator?n("g",{attrs:{"clip-path":"url(#chart-content-clip)"}},i._l(i.indicatorLines,function(t,e){return n("path",{key:e,staticClass:"indicator-line",class:i.cIndicator.type+"-"+e,attrs:{d:t}})})):i._e(),i._v(" "),n("y-axis",{attrs:{origin:i.yAxisOrigin,height:i.size.height,heightRate:i.heightRate,range:i.range,fontSize:i.fontSize},on:{yWidth:function(t){i.$emit("yWidth",t)}}}),i._v(" "),i.showHLine?n("rect",{staticClass:"h-line",attrs:{x:0,y:i.rectY,width:i.svgWidth,height:"1"}}):i._e()],1)},staticRenderFns:[]}),(st=("function"==typeof(rt=it)?rt.options:rt)||{}).__file="Candles.vue",st.render||(st.render=nt.render,st.staticRenderFns=nt.staticRenderFns,st._compiled=!0,ot&&(st.functional=!0)),st._scopeId=at,st);var ut=function(t){return t instanceof Date},ht=36e5,lt=6e4,dt=/[T ]/,ft=/:/,vt=/^(\d{2})$/,mt=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],gt=/^(\d{4})/,pt=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],xt=/^-(\d{2})$/,yt=/^-?(\d{3})$/,bt=/^-?(\d{2})-?(\d{2})$/,Mt=/^-?W(\d{2})$/,wt=/^-?W(\d{2})-?(\d{1})$/,St=/^(\d{2}([.,]\d*)?)$/,zt=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,Dt=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,Ct=/([Z+-].*)$/,_t=/^(Z)$/,Rt=/^([+-])(\d{2})$/,Ot=/^([+-])(\d{2}):?(\d{2})$/;function It(t,e,i){e=e||0,i=i||0;var n=new Date(0);n.setUTCFullYear(t,0,4);var r=7*e+i+1-(n.getUTCDay()||7);return n.setUTCDate(n.getUTCDate()+r),n}var At=function(t,e){if(ut(t))return new Date(t.getTime());if("string"!=typeof t)return new Date(t);var i=(e||{}).additionalDigits;i=null==i?2:Number(i);var n=function(t){var e,i={},n=t.split(dt);if(e=ft.test(n[0])?(i.date=null,n[0]):(i.date=n[0],n[1])){var r=Ct.exec(e);r?(i.time=e.replace(r[1],""),i.timezone=r[1]):i.time=e}return i}(t),r=function(t,e){var i,n=mt[e],r=pt[e];if(i=gt.exec(t)||r.exec(t)){var a=i[1];return{year:parseInt(a,10),restDateString:t.slice(a.length)}}if(i=vt.exec(t)||n.exec(t)){var o=i[1];return{year:100*parseInt(o,10),restDateString:t.slice(o.length)}}return{year:null}}(n.date,i),a=r.year,o=function(t,e){if(null===e)return null;var i,n,r,a;if(0===t.length)return(n=new Date(0)).setUTCFullYear(e),n;if(i=xt.exec(t))return n=new Date(0),r=parseInt(i[1],10)-1,n.setUTCFullYear(e,r),n;if(i=yt.exec(t)){n=new Date(0);var o=parseInt(i[1],10);return n.setUTCFullYear(e,0,o),n}if(i=bt.exec(t)){n=new Date(0),r=parseInt(i[1],10)-1;var s=parseInt(i[2],10);return n.setUTCFullYear(e,r,s),n}if(i=Mt.exec(t))return a=parseInt(i[1],10)-1,It(e,a);if(i=wt.exec(t)){a=parseInt(i[1],10)-1;var c=parseInt(i[2],10)-1;return It(e,a,c)}return null}(r.restDateString,a);if(o){var s,c=o.getTime(),u=0;return n.time&&(u=function(t){var e,i,n;if(e=St.exec(t))return(i=parseFloat(e[1].replace(",",".")))%24*ht;if(e=zt.exec(t))return i=parseInt(e[1],10),n=parseFloat(e[2].replace(",",".")),i%24*ht+n*lt;if(e=Dt.exec(t)){i=parseInt(e[1],10),n=parseInt(e[2],10);var r=parseFloat(e[3].replace(",","."));return i%24*ht+n*lt+1e3*r}return null}(n.time)),s=n.timezone?(h=n.timezone,(l=_t.exec(h))?0:(l=Rt.exec(h))?(d=60*parseInt(l[2],10),"+"===l[1]?-d:d):(l=Ot.exec(h))?(d=60*parseInt(l[2],10)+parseInt(l[3],10),"+"===l[1]?-d:d):0):(s=new Date(c+u).getTimezoneOffset(),new Date(c+u+s*lt).getTimezoneOffset()),new Date(c+u+s*lt)}var h,l,d;return new Date(t)};var kt=function(t){var e=At(t),i=new Date(0);return i.setFullYear(e.getFullYear(),0,1),i.setHours(0,0,0,0),i};var Tt=function(t){var e=At(t);return e.setHours(0,0,0,0),e};var Wt=function(t,e){var i=Tt(t),n=Tt(e),r=i.getTime()-6e4*i.getTimezoneOffset(),a=n.getTime()-6e4*n.getTimezoneOffset();return Math.round((r-a)/864e5)};var Yt=function(t){var e=At(t);return Wt(e,kt(e))+1};var Ft=function(t,e){var i=e&&Number(e.weekStartsOn)||0,n=At(t),r=n.getDay(),a=(r<i?7:0)+r-i;return n.setDate(n.getDate()-a),n.setHours(0,0,0,0),n};var Ht=function(t){return Ft(t,{weekStartsOn:1})};var $t=function(t){var e=At(t),i=e.getFullYear(),n=new Date(0);n.setFullYear(i+1,0,4),n.setHours(0,0,0,0);var r=Ht(n),a=new Date(0);a.setFullYear(i,0,4),a.setHours(0,0,0,0);var o=Ht(a);return e.getTime()>=r.getTime()?i+1:e.getTime()>=o.getTime()?i:i-1};var Et=function(t){var e=$t(t),i=new Date(0);return i.setFullYear(e,0,4),i.setHours(0,0,0,0),Ht(i)};var Xt=function(t){var e=At(t),i=Ht(e).getTime()-Et(e).getTime();return Math.round(i/6048e5)+1};var Lt=function(t){if(ut(t))return!isNaN(t);throw new TypeError(toString.call(t)+" is not an instance of Date")};var Pt=["M","MM","Q","D","DD","DDD","DDDD","d","E","W","WW","YY","YYYY","GG","GGGG","H","HH","h","hh","m","mm","s","ss","S","SS","SSS","Z","ZZ","X","x"];var Nt=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);var n=Pt.concat(e).sort().reverse();return new RegExp("(\\[[^\\[]*\\])|(\\\\)?("+n.join("|")+"|.)","g")};var jt=function(){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Su","Mo","Tu","We","Th","Fr","Sa"],r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=["AM","PM"],s=["am","pm"],c=["a.m.","p.m."],t={MMM:function(t){return e[t.getMonth()]},MMMM:function(t){return i[t.getMonth()]},dd:function(t){return n[t.getDay()]},ddd:function(t){return r[t.getDay()]},dddd:function(t){return a[t.getDay()]},A:function(t){return 1<=t.getHours()/12?o[1]:o[0]},a:function(t){return 1<=t.getHours()/12?s[1]:s[0]},aa:function(t){return 1<=t.getHours()/12?c[1]:c[0]}};return["M","D","DDD","d","Q","W"].forEach(function(i){t[i+"o"]=function(t,e){return function(t){var e=t%100;if(20<e||e<10)switch(e%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"}(e[i](t))}}),{formatters:t,formattingTokensRegExp:Nt(t)}},Vt={distanceInWords:function(){var r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};return{localize:function(t,e,i){var n;return i=i||{},n="string"==typeof r[t]?r[t]:1===e?r[t].one:r[t].other.replace("{{count}}",e),i.addSuffix?0<i.comparison?"in "+n:n+" ago":n}}}(),format:jt()};var Bt={M:function(t){return t.getMonth()+1},MM:function(t){return Ut(t.getMonth()+1,2)},Q:function(t){return Math.ceil((t.getMonth()+1)/3)},D:function(t){return t.getDate()},DD:function(t){return Ut(t.getDate(),2)},DDD:function(t){return Yt(t)},DDDD:function(t){return Ut(Yt(t),3)},d:function(t){return t.getDay()},E:function(t){return t.getDay()||7},W:function(t){return Xt(t)},WW:function(t){return Ut(Xt(t),2)},YY:function(t){return Ut(t.getFullYear(),4).substr(2)},YYYY:function(t){return Ut(t.getFullYear(),4)},GG:function(t){return String($t(t)).substr(2)},GGGG:function(t){return $t(t)},H:function(t){return t.getHours()},HH:function(t){return Ut(t.getHours(),2)},h:function(t){var e=t.getHours();return 0===e?12:12<e?e%12:e},hh:function(t){return Ut(Bt.h(t),2)},m:function(t){return t.getMinutes()},mm:function(t){return Ut(t.getMinutes(),2)},s:function(t){return t.getSeconds()},ss:function(t){return Ut(t.getSeconds(),2)},S:function(t){return Math.floor(t.getMilliseconds()/100)},SS:function(t){return Ut(Math.floor(t.getMilliseconds()/10),2)},SSS:function(t){return Ut(t.getMilliseconds(),3)},Z:function(t){return Jt(t.getTimezoneOffset(),":")},ZZ:function(t){return Jt(t.getTimezoneOffset())},X:function(t){return Math.floor(t.getTime()/1e3)},x:function(t){return t.getTime()}};function Jt(t,e){e=e||"";var i=0<t?"-":"+",n=Math.abs(t),r=n%60;return i+Ut(Math.floor(n/60),2)+e+Ut(r,2)}function Ut(t,e){for(var i=Math.abs(t).toString();i.length<e;)i="0"+i;return i}var Kt=function(t,e,i){var n=e?String(e):"YYYY-MM-DDTHH:mm:ss.SSSZ",r=(i||{}).locale,a=Vt.format.formatters,o=Vt.format.formattingTokensRegExp;r&&r.format&&r.format.formatters&&(a=r.format.formatters,r.format.formattingTokensRegExp&&(o=r.format.formattingTokensRegExp));var s=At(t);return Lt(s)?function(t,e,i){var n,r,a,o=t.match(i),s=o.length;for(n=0;n<s;n++)r=e[o[n]]||Bt[o[n]],o[n]=r||((a=o[n]).match(/\[[\s\S]/)?a.replace(/^\[|]$/g,""):a.replace(/\\/g,""));return function(t){for(var e="",i=0;i<s;i++)o[i]instanceof Function?e+=o[i](t,Bt):e+=o[i];return e}}(n,a,o)(s):"Invalid Date"},Gt={name:"CrossCurve",mixins:[J],props:{origin:Object,textSize:{type:Object,default:function(){return{width:H.markerWidth,height:H.xMarkerHeight}}},chartSize:Object,fontSize:Number,time:Number,value:Number},data:function(){return{valueHeight:H.yMarkerHeight,textDelta:H.textDelta}},computed:{cOrigin:function(){var t=this.origin||{},e=t.x,i=void 0===e?0:e,n=t.y,r=void 0===n?0:n;return{x:Math.floor(i),y:Math.floor(r)}},lineOrigin:function(){return{x:this.cOrigin.x+.5,y:this.cOrigin.y+.5}},timeX:function(){return this.c(this.cOrigin.x,this.textSize.width)},timeTextY:function(){return Math.round(this.chartSize.height+this.fontSize+this.textDelta)},valueX:function(){return this.c(this.cOrigin.y,this.valueHeight)},valueText:function(){return{x:Math.round(this.chartSize.width+this.textDelta),y:Math.round(this.cOrigin.y+this.fontSize/2-1)}}},methods:{format:Kt,c:function(t,e){return Math.floor(t-e/2)}}};var Zt,qt,Qt,te,ee,ie=(Qt=void 0,te=!(Zt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.chartSize&&t.origin?i("g",{staticClass:"cross-curve"},[i("line",{staticClass:"cross-h",attrs:{x1:"0",y1:t.lineOrigin.y,x2:t.chartSize.width,y2:t.lineOrigin.y}}),t._v(" "),i("line",{staticClass:"cross-v",attrs:{x1:t.lineOrigin.x,y1:0,x2:t.lineOrigin.x,y2:t.chartSize.height}}),t._v(" "),i("g",{staticClass:"cross-time"},[i("rect",{staticClass:"cross-time-bg",attrs:{x:t.timeX,y:t.chartSize.height,width:t.textSize.width,height:t.textSize.height}}),t._v(" "),i("text",{staticClass:"cross-time-text",attrs:{x:t.cOrigin.x,y:t.timeTextY,"font-size":t.fontSize,"text-anchor":"middle"}},[t._v(t._s(t.format(t.time,"YYYY-MM-DD HH:mm"))+"\n    ")])]),t._v(" "),i("g",{staticClass:"cross-value"},[i("rect",{staticClass:"cross-value-bg",attrs:{x:t.chartSize.width,y:t.valueX,width:t.textSize.width,height:t.valueHeight}}),t._v(" "),i("text",{staticClass:"cross-value-text",attrs:{x:t.valueText.x,y:t.valueText.y,"font-size":t.fontSize}},[t._v(t._s(t.value)+"\n    ")])])]):t._e()},staticRenderFns:[]}),(ee=("function"==typeof(qt=Gt)?qt.options:qt)||{}).__file="CrossCurve.vue",ee.render||(ee.render=Zt.render,ee.staticRenderFns=Zt.staticRenderFns,ee._compiled=!0,te&&(ee.functional=!0)),ee._scopeId=Qt,ee),ne={name:"CrossCurve",mixins:[J],props:{y:Number,width:Number,textWidth:{type:Number,default:H.markerWidth},price:Number,isUp:Boolean,fontSize:Number},data:function(){return{valueHeight:H.yMarkerHeight,textDelta:H.textDelta}},computed:{cY:function(){return Math.floor(this.y)||0},lineY:function(){return this.cY+.5},rectY:function(){return this.c(this.cY,this.valueHeight)},priceText:function(){return{x:Math.round(this.width+this.textDelta),y:Math.round(this.cY+this.fontSize/2-1)}}},watch:{},methods:{format:Kt,c:function(t,e){return Math.floor(t-e/2)}}};var re,ae,oe,se,ce,ue=(oe=void 0,se=!(re={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{staticClass:"curr-price",class:t.isUp?"up":"down"},[i("line",{staticClass:"curr-price-line",class:t.red,attrs:{x1:"0",y1:t.lineY,x2:t.width,y2:t.lineY}}),t._v(" "),i("g",{staticClass:"curr-price-value"},[i("rect",{staticClass:"curr-price-value-bg",attrs:{x:t.width,y:t.rectY,width:t.textWidth,height:t.valueHeight}}),t._v(" "),i("text",{staticClass:"curr-price-value-text",attrs:{x:t.priceText.x,y:t.priceText.y,"font-size":t.fontSize}},[t._v(t._s(t.price)+"\n    ")])])])},staticRenderFns:[]}),(ce=("function"==typeof(ae=ne)?ae.options:ae)||{}).__file="CurrPrice.vue",ce.render||(ce.render=re.render,ce.staticRenderFns=re.staticRenderFns,ce._compiled=!0,se&&(ce.functional=!0)),ce._scopeId=oe,ce),he={name:"Loading",props:{width:Number,height:Number}};var le,de,fe,ve,me,ge=(fe=void 0,ve=!(le={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"loading",staticStyle:{"enable-background":"new 0 0 512 512"},attrs:{x:"0px",y:"0px",width:t.width,height:t.height,viewBox:"0 0 512 512","xml:space":"preserve"}},[i("circle",{staticClass:"loading-circle-1",attrs:{cx:"256",cy:"16",r:"16"}}),t._v(" "),i("circle",{staticClass:"loading-circle-2",attrs:{transform:"matrix(0.5 -0.866 0.866 0.5 146.2975 349.7025)",cx:"376",cy:"48.2",r:"16"}}),t._v(" "),i("circle",{staticClass:"loading-circle-3",attrs:{transform:"matrix(0.866 -0.5 0.5 0.866 -5.8564 250.1436)",cx:"463.8",cy:"136",r:"16"}}),t._v(" "),i("circle",{staticClass:"loading-circle-4",attrs:{cx:"496",cy:"256",r:"16"}}),t._v(" "),i("circle",{staticClass:"loading-circle-5",attrs:{transform:"matrix(0.5 -0.866 0.866 0.5 -93.7025 589.7025)",cx:"463.8",cy:"376",r:"16"}}),t._v(" "),i("circle",{staticClass:"loading-circle-6",attrs:{transform:"matrix(0.866 -0.5 0.5 0.866 -181.5486 250.1436)",cx:"376",cy:"463.8",r:"16"}}),t._v(" "),i("circle",{staticClass:"loading-circle-7",attrs:{cx:"256",cy:"496",r:"16"}}),t._v(" "),i("circle",{staticClass:"loading-circle-8",attrs:{transform:"matrix(0.5 -0.866 0.866 0.5 -333.7025 349.7025)",cx:"136",cy:"463.8",r:"16"}}),t._v(" "),i("circle",{staticClass:"loading-circle-9",attrs:{transform:"matrix(0.866 -0.5 0.5 0.866 -181.5486 74.4514)",cx:"48.2",cy:"376",r:"16"}}),t._v(" "),i("circle",{staticClass:"loading-circle-10",attrs:{cx:"16",cy:"256",r:"16"}}),t._v(" "),i("circle",{staticClass:"loading-circle-11",attrs:{transform:"matrix(0.5 -0.866 0.866 0.5 -93.7025 109.7025)",cx:"48.2",cy:"136",r:"16"}}),t._v(" "),i("circle",{staticClass:"loading-circle-12",attrs:{transform:"matrix(0.866 -0.5 0.5 0.866 -5.8564 74.4514)",cx:"136",cy:"48.2",r:"16"}})])},staticRenderFns:[]}),(me=("function"==typeof(de=he)?de.options:de)||{}).__file="Loading.vue",me.render||(me.render=le.render,me.staticRenderFns=le.staticRenderFns,me._compiled=!0,ve&&(me.functional=!0)),me._scopeId=fe,me),pe={name:"TechIndicator",mixins:[J],components:{YAxis:et},props:{data:{type:Array,default:function(){return[]}},indicatorData:Object,range:Object,heightRate:Number,y:Number,size:Object,candleWidth:Number,candleInterval:Number,fontSize:Number},data:function(){return{indicatorLines:""}},computed:{deltaX:function(){return Math.floor(this.candleWidth/2)},cIndicator:function(){if(!this.indicatorData)return null;var t=Object.keys(this.indicatorData)[0];return{type:t,data:this.indicatorData[t]}},indicatorInfo:function(){var e=this;return k.technical.find(function(t){return t.value===e.cIndicator.type})},yAxisOrigin:function(){return{x:this.size.width,y:Math.round(this.y)}},tPaths:function(){var r=this,a="";return this.data.length<1||!this.data[0].origin||!this.heightRate||this.data.forEach(function(t,e){var i=t.prices,n=t.origin,s=r.d(n,i,e);s&&"object"===(void 0===s?"undefined":m(s))&&(a=Object.keys(s).reduce(function(t,e){var i=s[e],n=i.value,r=i.chartType,a=i.classType,o=a?e+"-"+a:e;return t[o]={chartType:r,classType:a,value:(t[o]&&t[o].value||"")+n},t},a||{}))}),a}},methods:{d:function(t,e,i){var n=this,r=t.x;if(!this.cIndicator||!this.cIndicator.data||!this.cIndicator.data[i])return"";var a=this.cIndicator.data[i],o=this.deltaX+r+.5;return"object"===(void 0===a?"undefined":m(a))?Object.keys(a).filter(function(t){return!n.indicatorInfo.ignore||!n.indicatorInfo.ignore.includes(t)}).reduce(function(t,e){return t[e]=n.dot(i,o,a[e]||0,n.isBar(e)?"bar":"line"),t},{}):this.dot(i,o,a,this.isBar()?"bar":"line")},dot:function(t,e,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"line",r=Math.ceil((this.range.max-i)*this.heightRate+this.y)-.5,a=Math.ceil(this.range.max*this.heightRate+this.y)-.5;return"bar"===n?{chartType:n,value:"M"+e+","+r+" V"+a+"z\n\r",classType:N([],+i)}:{chartType:n,value:(0===t?"M":"L")+e+","+r+"\n\r"}},className:N,isBar:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return this.indicatorInfo&&this.indicatorInfo.bar&&(!t||this.indicatorInfo.bar.includes(t))}}};var xe,ye,be,Me,we,Se=(be=void 0,Me=!(xe={render:function(){var i=this,t=i.$createElement,n=i._self._c||t;return n("g",{staticClass:"tech-indicator"},[i.cIndicator?n("g",{attrs:{"clip-path":"url(#chart-content-clip)"}},i._l(i.tPaths,function(t,e){return n("path",{key:e,class:["indicator-"+t.chartType,i.cIndicator.type+"-"+e,t.classType],attrs:{d:t.value}})})):i._e(),i._v(" "),n("y-axis",{attrs:{origin:i.yAxisOrigin,height:i.size.height,heightRate:i.heightRate,range:i.range,fontSize:i.fontSize},on:{yWidth:function(t){i.$emit("yWidth",t)}}})],1)},staticRenderFns:[]}),(we=("function"==typeof(ye=pe)?ye.options:ye)||{}).__file="TechIndicator.vue",we.render||(we.render=xe.render,we.staticRenderFns=xe.staticRenderFns,we._compiled=!0,Me&&(we.functional=!0)),we._scopeId=be,we),ze={name:"icon-full-screen",props:{type:String,width:Number,height:Number}};var De,Ce,_e,Re,Oe,Ie={name:"ToolBar",mixins:[J],components:{IconFullScreen:(_e=void 0,Re=!(De={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return"exit"!==e.type?i("svg",{staticClass:"icon-full-screen",staticStyle:{"enable-background":"new 0 0 128 128"},attrs:{viewBox:"0 0 128 128",width:e.width,height:e.height},on:{click:function(t){e.$emit("update:type","exit")}}},[i("path",{attrs:{d:"M112,128H80v-8h32c4.4,0,8-3.6,8-8V80h8v32C128,120.8,120.8,128,112,128C112,128,112,128,112,128z\n   M120,16c0-4.4-3.6-8-8-8c0,0,0,0,0,0H80V0h32c8.8,0,16,7.2,16,16v32h-8C120,48,120,16,120,16z\n   M0,112V80h8v32c0,4.4,3.6,8,8,8c0,0,0,0,0,0h32v8H16C7.2,128,0,120.8,0,112C0,112,0,112,0,112z\n   M8,16v32H0V16C0,7.2,7.2,0,16,0c0,0,0,0,0,0h32v8H16C11.6,8,8,11.6,8,16C8,16,8,16,8,16z"}})]):i("svg",{staticClass:"icon-full-screen",staticStyle:{"enable-background":"new 0 0 128 128"},attrs:{viewBox:"0 0 128 128",width:e.width,height:e.height},on:{click:function(t){e.$emit("update:type","")}}},[i("path",{attrs:{d:"M96,80h32v8H96c-4.4,0-8,3.6-8,8v32h-8V96C80,87.2,87.2,80,96,80C96,80,96,80,96,80z\n  M88,32c0,4.4,3.6,8,8,8c0,0,0,0,0,0l32,0v8H96c-8.8,0-16-7.2-16-16V0l8,0C88,0,88,32,88,32z\n  M48,96v32h-8V96c0-4.4-3.6-8-8-8c0,0,0,0,0,0H0l0-8h32C40.8,80,48,87.2,48,96C48,96,48,96,48,96z\n  M40,32V0l8,0v32c0,8.8-7.2,16-16,16c0,0,0,0,0,0H0l0-8l32,0C36.4,40,40,36.4,40,32C40,32,40,32,40,32z"}})])},staticRenderFns:[]}),(Oe=("function"==typeof(Ce=ze)?Ce.options:Ce)||{}).__file="IconFullScreen.vue",Oe.render||(Oe.render=De.render,Oe.staticRenderFns=De.staticRenderFns,Oe._compiled=!0,Re&&(Oe.functional=!0)),Oe._scopeId=_e,Oe)},props:{isMobile:Boolean,periodVal:Object,isFull:Boolean},data:function(){return{period:{value:A[0],options:A},candleType:{value:I[0],options:I},indicators:{value:[],options:k},fullScreen:""}},computed:{},watch:{periodVal:{handler:function(e){this.period.value=A.find(function(t){return e&&t.value===e.value&&t.name===e.name})||A[0],e!==this.period.value.value&&this.emitPeriod(this.period.value)},immediate:!0},"candleType.value":{handler:function(t){this.$emit("candleType",t.value)},immediate:!0},"indicators.value":{handler:function(t){this.$emit("indicators",t)},immediate:!0},fullScreen:function(t){this.$emit("isFullScreen","exit"===t)},isFull:{handler:function(t){this.fullScreen=t?"exit":""},immediate:!0}},methods:{choseIndicator:function(t,e){var i=this,n=Object.keys(this.indicators.value).find(function(t){return i.indicators.value[t].type===e});n?this.indicators.value[n].value===t.value?this.indicators.value.splice(n,1):this.indicators.value.splice(n,1,f({},t,{type:e})):this.indicators.value.push(f({},t,{type:e}))},emitPeriod:function(t){this.$emit("period",t)}}};var Ae,ke,Te,We,Ye,Fe=(Te=void 0,We=!(Ae={render:function(){var n=this,t=n.$createElement,r=n._self._c||t;return r("div",{staticClass:"tool-bar"},[r("div",{staticClass:"periods",class:{mobile:n.isMobile}},[n.isMobile?[n._v("\n      "+n._s(n.$lang.$t("periods"))+"\n      "),r("div",{staticClass:"options"},n._l(n.period.options,function(e){return r("button",{key:e.value,staticClass:"option",class:{selected:n.period.value===e||n.period.value.name===e.name&&n.period.value.value===e.value},on:{click:function(t){n.emitPeriod(e)}}},[n._v(n._s(n.$lang.$t(e.name))+"\n        ")])}))]:n._l(n.period.options,function(e){return r("button",{key:e.value,staticClass:"period",class:{selected:n.period.value===e},on:{click:function(t){n.emitPeriod(e)}}},[n._v(n._s(n.$lang.$t(e.name))+"\n      ")])})],2),n._v(" "),r("div",{staticClass:"candle-types"},[n._v("\n    "+n._s(n.$lang.$t("candle-types"))+"\n    "),r("div",{staticClass:"options"},n._l(n.candleType.options,function(e){return r("button",{key:e.value,staticClass:"option",class:{selected:n.candleType.value===e},on:{click:function(t){n.candleType.value=e}}},[n._v(n._s(n.$lang.$t(e.name))+"\n      ")])}))]),n._v(" "),r("div",{staticClass:"indicators"},[n._v("\n    "+n._s(n.$lang.$t("indicators"))+"\n    "),r("div",{staticClass:"options"},[n._l(n.indicators.options,function(t,i,e){return[r("h5",{key:i,staticClass:"caption"},[n._v(n._s(n.$lang.$t("indicators."+i)))]),n._v(" "),r("div",{key:i,staticClass:"option-group"},n._l(t,function(e){return r("button",{key:e.value,staticClass:"option",class:{selected:n.indicators.value.some(function(t){return t.value===e.value})},on:{click:function(t){n.choseIndicator(e,i)}}},[n._v(n._s(n.$lang.$t(e.name))+"\n          ")])})),n._v(" "),0===e?r("div",{key:i,staticClass:"decoration"}):n._e()]})],2)]),n._v(" "),r("div",{staticClass:"icon-full"},[r("span",{staticClass:"tool-tip"},[n._v(n._s(n.$lang.$t("exit"===n.fullScreen?"full-screen-exit":"full-screen")))]),n._v(" "),r("icon-full-screen",{attrs:{type:n.fullScreen},on:{"update:type":function(t){n.fullScreen=t}}})],1)])},staticRenderFns:[]}),(Ye=("function"==typeof(ke=Ie)?ke.options:ke)||{}).__file="ToolBar.vue",Ye.render||(Ye.render=Ae.render,Ye.staticRenderFns=Ae.staticRenderFns,Ye._compiled=!0,We&&(Ye.functional=!0)),Ye._scopeId=Te,Ye),He={name:"Volume",mixins:[J],components:{YAxis:et},props:{data:{type:Array,default:function(){return[]}},range:Object,heightRate:Number,y:Number,size:Object,candleWidth:Number,candleInterval:Number,svgWidth:Number,showHLine:Boolean,fontSize:Number},data:function(){return{}},computed:{volumeWidth:function(){return this.candleWidth+this.candleInterval-1},deltaX:function(){return.5-Math.floor(this.candleInterval/2)},vPaths:function(){var a=this,o={};return this.data.length<1||!this.data[0].origin||this.data.forEach(function(t){var e=t.prices,i=t.origin,n=a.className(e),r=a.d(e,i);o[n]?o[n]+=r:o[n]=r}),o},yAxisOrigin:function(){return{x:this.size.width,y:Math.round(this.y)}},rectY:function(){return Math.round(this.y+this.size.height-1)}},methods:{className:N,d:function(t,e){var i=D(t,6)[5],n=this.range.min,r=Math.floor((i-Math.max(0,n))*this.heightRate),a=this.size.height-r-Math.max(0,-n)*this.heightRate;return"M"+(e.x+this.deltaX)+","+(Math.ceil(this.y+a)-.5)+" h"+this.volumeWidth+" v"+r+" h"+-this.volumeWidth+" z\n\r"}}};var $e,Ee,Xe,Le,Pe,Ne=(Xe=void 0,Le=!($e={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("g",{staticClass:"volumes",staticStyle:{overflow:"hidden"}},[i("g",{attrs:{"clip-path":"url(#chart-content-clip)"}},e._l(e.vPaths,function(t,e){return i("path",{key:e,staticClass:"volume",class:e,attrs:{d:t}})})),e._v(" "),i("y-axis",{attrs:{origin:e.yAxisOrigin,height:e.size.height,heightRate:e.heightRate,range:e.range,fontSize:e.fontSize,isVolume:!0},on:{yWidth:function(t){e.$emit("yWidth",t)}}}),e._v(" "),e.showHLine?i("rect",{staticClass:"h-line",attrs:{x:0,y:e.rectY,width:e.svgWidth,height:"1"}}):e._e()],1)},staticRenderFns:[]}),(Pe=("function"==typeof(Ee=He)?Ee.options:Ee)||{}).__file="Volumes.vue",Pe.render||(Pe.render=$e.render,Pe.staticRenderFns=$e.staticRenderFns,Pe._compiled=!0,Le&&(Pe.functional=!0)),Pe._scopeId=Xe,Pe);var je=function(t){return At(t).getDate()};var Ve=function(t){return At(t).getMonth()},Be={name:"XAxis",mixins:[J],props:{y:Number,width:Number,period:Number,candleWidth:Number,candleInterval:Number,data:{type:Array,default:function(){return[]}},showLength:Number,fontSize:Number},data:function(){return{acceptedIntervals:[{value:12e4,bold:18e5,name:"2min"},{value:18e4,bold:18e5,name:"3min"},{value:24e4,bold:18e5,name:"4min"},{value:3e5,bold:18e5,name:"5min"},{value:6e5,bold:18e5,name:"10min"},{value:9e5,bold:36e5,name:"15min"},{value:18e5,bold:36e5,name:"30min"},{value:36e5,bold:864e5,name:"60min"},{value:54e5,mod:36e5,bold:864e5,name:"1.5hour"},{value:108e5,mod:36e5,bold:864e5,name:"3hour"},{value:216e5,mod:144e5,bold:864e5,name:"6hour"},{value:432e5,mod:144e5,bold:864e5,name:"12hour"},{value:864e5,mod:576e5,bold:"month",name:"1d"},{value:1728e5,mod:144e6,bold:"month",name:"2d"},{value:2592e5,mod:2304e5,bold:"month",name:"3d"},{value:3456e5,mod:3168e5,bold:"month",name:"4d"},{value:432e6,mod:4032e5,bold:"month",name:"5d"},{value:5184e5,mod:4896e5,bold:"month",name:"6d"},{value:6048e5,mod:576e6,bold:"month",name:"7d"},{value:6912e5,mod:6624e5,bold:"month",name:"8d"},{value:7776e5,mod:7488e5,bold:"month",name:"9d"},{value:864e6,mod:8352e5,bold:"month",name:"10d"},{value:1296e6,bold:"month",alias:"15d"},{value:2592e6,bold:"year",alias:"1mon"},{value:5184e6,bold:"year",alias:"2mon"},{value:7776e6,bold:"year",alias:"3mon"},{value:10368e6,bold:"year",alias:"4mon"}],textDelta:H.textDelta,markerLineLength:H.markerLineLength}},computed:{cY:function(){return Math.round(this.y)},cWidth:function(){return Math.round(this.width)},delta:function(){return Math.floor(this.candleWidth/2)},candleOffsetWidth:function(){return this.candleInterval+this.candleWidth},distanceOfTwo:function(){return{max:Math.floor(2*W/this.candleOffsetWidth),min:Math.ceil(W/this.candleOffsetWidth)}},showRule:function(){var i=this;if(!this.period)return this.acceptedIntervals[this.acceptedIntervals.length-1];var n=this.period,t=this.acceptedIntervals.filter(function(t){var e=t.value/n;return i.distanceOfTwo.max>=e&&e>=i.distanceOfTwo.min});return t[t.length-1]||this.acceptedIntervals[this.acceptedIntervals.length-1]},coords:function(){var o=this,t=this.data.length;if(!this.showLength||!this.period||!t)return[];var e=this.showRule,s=e.value,i=e.mod,c=void 0===i?0:i,u=e.alias,n=this.data[t-1],r={time:n.prices[0],x:n.origin.x};return this.data.concat([].concat(v(Array(Math.max(0,+this.showLength-this.data.length)))).reduce(function(t){return r.time=+r.time+o.period,r.x=r.x+o.candleOffsetWidth,t.concat([{prices:[r.time],origin:{x:r.x}}])},[])).reduce(function(t,e){var i=e.prices,n=e.origin,r=D(i,1)[0];if(u){if("15d"===u&&15===je(+r))return t.concat([o.calcCoord(i,n)]);var a=+u.match(/^(\d)mon/)[1];if((Ve(+r)+1)%a===c)return t.concat([o.calcCoord(i,n)])}return r%s===c?t.concat([o.calcCoord(i,n)]):t},[])}},watch:{coords:function(){this.emitHeight()}},methods:{calcCoord:function(t,e){return{prices:t,origin:{x:e.x+this.delta,y:this.cY},text:this.text(+t[0]),bold:this.bold(+t[0]),textY:Math.round(this.cY+this.fontSize+this.textDelta)}},bold:function(t){var e=void 0,i=this.showRule.bold;if("number"==typeof i)e=t%i==0;else{var n=Kt(t,"YYYY-MM-DD HH:mm");e="month"===i?/\s{4}-\s{2}-01 00:00/.test(n):/\s{4}-01-01 00:00/.test(n)}return e?"bold":""},text:function(t){var e=this.showRule,i=e.name,n=void 0;return e.alias||/d/.test(i)||"00:00"===(n=Kt(t,"HH:mm"))?"01"!==(n=Kt(t,"DD"))?n:"01"===(n=Kt(t,"MM"))?this.$lang.$t("yyyy",{year:Kt(t,"YYYY")}):this.$lang.$t(F[Ve(t)+1]):n},emitHeight:function(){var i=this;0<this.coords.length&&this.$nextTick(function(){var t=i.$refs.xAxis[0]||i.$refs.xAxis;if(t){var e=L(t);i.$emit("xHeight",Math.floor(e.height+H.textDelta))}})}}};var Je,Ue,Ke,Ge,Ze,qe,Qe,ti,ei,ii,ni={name:"Index",mixins:[J,U],components:{ToolBar:Fe,Candles:ct,XAxis:(Ke=void 0,Ge=!(Je={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.period?i("g",{ref:"xAxis",staticClass:"x-axis"},[i("rect",{staticClass:"axis-line x",attrs:{x:"0",y:e.cY,width:e.cWidth,height:"1"}}),e._v(" "),e._l(e.coords,function(t){return i("g",{key:t.prices[0],staticClass:"axis-coord x",class:t.bold,attrs:{"clip-path":"url(#chart-content-clip)"}},[i("rect",{staticClass:"axis-coord-marker x",attrs:{x:t.origin.x,y:t.origin.y,width:"1",height:e.markerLineLength}}),e._v(" "),i("text",{staticClass:"axis-coord-text x",attrs:{x:t.origin.x,y:t.textY,"font-size":e.fontSize,"text-anchor":"middle"}},[e._v("\n      "+e._s(t.text)+"\n    ")])])})],2):e._e()},staticRenderFns:[]}),(Ze=("function"==typeof(Ue=Be)?Ue.options:Ue)||{}).__file="XAxis.vue",Ze.render||(Ze.render=Je.render,Ze.staticRenderFns=Je.staticRenderFns,Ze._compiled=!0,Ge&&(Ze.functional=!0)),Ze._scopeId=Ke,Ze),CrossCurve:ie,Volumes:Ne,Loading:ge,CurrPrice:ue,TechIndicator:Se},props:{fontSize:{type:Number,default:H.defaultFontSize},markerWidth:{type:Number,default:H.markerWidth},loading:Boolean,period:{type:Object,default:A[0]}},data:function(){return{volumeHeight:H.volumeChartHeight,indicatorHeight:H.indicatorChartHeight,loadingSize:H.loadingSize,textDelta:H.textDelta,axis:{x:{height:0},y:{width:0}},type:I[0].value,showVolumes:!0,isFullScreen:!1,dragOrigin:null,indicators:[],crossCurveInfo:null,touchRes:null,isMobile:E,scaleOrigin:{time:0,scale:1},isPortrait:j(),svgOffset:null}},computed:{viewBox:function(){return this.size?"0 0 "+this.size.width+" "+this.size.height:"0 0 0 0"},chartSize:function(){return this.size?{width:Math.round(this.size.width-this.axis.y.width),height:Math.round(this.size.height-this.axis.x.height)}:null},baseIndicator:function(){return this.indicators.filter(function(t){return"base"===t.type})[0]},techIndicator:function(){return this.indicators.filter(function(t){return"technical"===t.type})[0]},candlesSize:function(){return this.size?{width:this.chartSize.width,height:Math.round(this.chartSize.height-(this.showVolumes?this.volumeHeight:0)-(this.techIndicator?this.indicatorHeight:0))}:null},volumesSize:function(){return this.size?{width:this.chartSize.width,height:this.volumeHeight}:null},indicatorSize:function(){return this.size?{width:this.chartSize.width,height:this.indicatorHeight}:null},textSize:function(){return{width:this.markerWidth,height:Math.round(this.axis.x.height-this.textDelta/2)}},crossCurveRangeY:function(){return{candle:[0,this.candlesSize.height],volume:[this.candlesSize.height,Math.round(this.candlesSize.height+this.volumeHeight)],indicator:[Math.round(this.candlesSize.height+this.volumeHeight),this.chartSize.height]}},maxDeltaX:function(){return Math.round((this.cCandleWidth+this.candleInterval)*this.data.length-this.candlesSize.width)}},watch:{isFullScreen:function(){this.resize()},size:function(t){t&&this.bindTouch()}},methods:{getSize:function(){var o=this;this.$nextTick(function(){var t=L(o.$refs.wrap),e=t.width,i=void 0===e?0:e,n=t.height,r=void 0===n?0:n;o.svgOffset=P(o.$refs.kline);var a=L(o.$refs.toolbar.$el).height||0;o.size={width:+Math.floor(i),height:+Math.floor(r-a)}})},setXAxisHeight:function(t){this.axis.x.height=t},setYAxisWidth:function(t){this.axis.y.width=Math.max(this.axis.y.width,t)},resize:function(){this.isPortrait=j(),E&&this.isFullScreen&&this.isPortrait||this.getSize()},startDrag:function(t){this.dragOrigin={x:t.offsetX,y:t.offsetY,dragDeltaX:this.dragDeltaX,time:t.timeStamp}},mouseMove:function(t){this.markerMove(t),this.isMobile||this.klineMove(t)},endDrag:function(){this.dragOrigin=null},klineMove:function(t){if(this.dragOrigin){if(t.timeStamp-this.dragOrigin.time<$)return;this.dragOrigin.time=t.timeStamp;var e=void 0!==t.deltaX?t.deltaX:t.offsetX-this.dragOrigin.x;this.dragOrigin.dragDeltaX===this.maxDeltaX&&0<e?(this.$emit("getMorePreData"),this.dragOrigin=null):(this.dragDeltaX=Math.round(e+this.dragOrigin.dragDeltaX),this.dragDeltaX=Math.min(Math.max(0,this.dragDeltaX),this.maxDeltaX))}},markerMove:function(t){if(this.cData&&0<this.cData.length){var r={x:t.offsetX,y:t.offsetY};if(0<=r.x&&r.x<=this.chartSize.width&&0<=r.y&&r.y<=this.chartSize.height){var a=this.crossCurveRangeY,e=Object.keys(a).find(function(t){var e=D(a[t],2),i=e[0],n=e[1];return i<=r.y&&r.y<=n}),i=this.findNearest(this.cData,r.x),n=D(a[e],1)[0],o="candle"===e?"price":e,s=this.heightRate[o],c=this.computedRange[o];this.crossCurveInfo={origin:{x:i.x,y:Math.floor(r.y)},time:i.time,value:void 0!==s?C.cVal(c.max-(r.y-n)/s,c.precision):n}}else this.resetCrossCurveInfo()}},resetCrossCurveInfo:function(){this.crossCurveInfo=null},findNearest:function(t,e){if(t.length<1)return{x:0,time:0};var i=Math.floor((t.length-1)/2),n=this.calcX(t[i].origin);if(t.length<2)return{x:n,time:t[0].prices[0]};if(2!==t.length)return 0<n-e?this.findNearest(t.slice(0,i+1),e):n-e<0?this.findNearest(t.slice(i),e):{x:n,time:t[i].prices[0]};var r=this.calcX(t[1].origin);return 0<Math.abs(r-e)-Math.abs(n-e)?{x:n,time:t[0].prices[0]}:{x:r,time:t[1].prices[0]}},calcX:function(t){return Math.floor(t.x+this.cCandleWidth/2)},mouseScale:function(t){this.scale(0<t.deltaY?-1:1,t.timeStamp)},scale:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(!(e-this.scaleOrigin.time<$)){this.scaleOrigin={time:e,scale:i};var n=this.candleWidth+2*t;n<H.candleMinWidth?this.candleWidth=H.candleMinWidth:n>H.candleMaxWidth?this.candleWidth=H.candleMaxWidth:this.candleWidth=n}},bindTouch:function(){var s=this;this.isMobile&&this.$nextTick(function(){s.touchRes||(s.touchRes=[h(s.$refs.cursor,function(t){var e=t.center,i=e.clientX,n=e.clientY,r=s.svgOffset,a=r.clientLeft,o=r.clientTop;s.markerMove({offsetX:i-a,offsetY:n-o})}),n(s.$refs.cursor,function(t){var e=t.type,i=t.timeStamp;if("panMove"===e){s.resetCrossCurveInfo();var n=t.centerDelta.deltaX;s.klineMove({deltaX:n,timeStamp:i})}else"panStart"===e?s.dragOrigin={dragDeltaX:s.dragDeltaX,timeStamp:i}:"panEnd"===e&&(s.dragOrigin=null)}),r(s.$refs.cursor,function(t){var e=t.pinchScale,i=t.timeStamp;1!==e&&(s.resetCrossCurveInfo(),s.scale(e>s.scaleOrigin.scale?1:-1,i,e))},!0)])})}},beforeMount:function(){window.addEventListener("mousemove",this.resetCrossCurveInfo),window.addEventListener("resize",this.resize)},mounted:function(){this.getSize()},beforeDestroy:function(){window.removeEventListener("mousemove",this.resetCrossCurveInfo),window.removeEventListener("resize",this.resize),this.touchRes&&this.touchRes.forEach(function(t){return t.unsubscribe()})}};return ti=void 0,ei=!(qe={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"wrap",staticClass:"kline-wrap",class:{"full-screen":e.isFullScreen&&!(e.isMobile&&e.isPortrait),mobile:e.isMobile}},[i("tool-bar",{ref:"toolbar",attrs:{isMobile:e.isMobile,isFull:e.isFullScreen,periodVal:e.period},on:{period:function(t){e.$emit("update:period",t)},candleType:function(t){e.type=t},indicators:function(t){e.indicators=t},isFullScreen:function(t){e.isFullScreen=t}}}),e._v(" "),i("svg",{ref:"kline",staticClass:"kline",attrs:{width:e.size&&e.size.width,height:e.size&&e.size.height,viewBox:e.viewBox}},[e.chartSize?[i("defs",[i("clipPath",{attrs:{id:"chart-content-clip"}},[i("rect",{attrs:{x:"0",y:"0",width:e.chartSize.width,height:e.size.height}})])]),e._v(" "),e.candlesSize&&e.computedRange?i("candles",{attrs:{size:e.candlesSize,data:e.cData,indicator:e.inds.base,range:e.computedRange.price,heightRate:e.heightRate.price,type:e.type,showHLine:!0,candleWidth:e.cCandleWidth,candleInterval:e.candleInterval,svgWidth:e.size.width,fontSize:e.fontSize},on:{yWidth:e.setYAxisWidth}}):e._e(),e._v(" "),e.showVolumes&&e.volumesSize&&e.computedRange?i("volumes",{attrs:{data:e.cData,range:e.computedRange.volume,heightRate:e.heightRate.volume,y:e.crossCurveRangeY.volume[0],size:e.volumesSize,candleWidth:e.cCandleWidth,candleInterval:e.candleInterval,svgWidth:e.size.width,showHLine:e.techIndicator,fontSize:e.fontSize},on:{yWidth:e.setYAxisWidth}}):e._e(),e._v(" "),e.techIndicator?i("tech-indicator",{attrs:{indicatorData:e.inds.tech,data:e.cData,range:e.computedRange.indicator,heightRate:e.heightRate.indicator,y:e.crossCurveRangeY.indicator[0],size:e.indicatorSize,candleWidth:e.cCandleWidth,candleInterval:e.candleInterval,fontSize:e.fontSize},on:{yWidth:e.setYAxisWidth}}):e._e(),e._v(" "),e.period?i("x-axis",{attrs:{data:e.cData,showLength:e.sliceLength,candleWidth:e.cCandleWidth,candleInterval:e.candleInterval,y:e.chartSize.height,width:e.candlesSize.width,period:e.period.value,fontSize:e.fontSize},on:{xHeight:e.setXAxisHeight}}):e._e(),e._v(" "),e.currPrice?i("curr-price",{attrs:{y:e.currPrice.y,width:e.candlesSize.width,price:e.currPrice.value,fontSize:e.fontSize,textWidth:e.markerWidth,isUp:e.currPrice.isUp}}):e._e(),e._v(" "),e.axis.x.height&&e.crossCurveInfo?i("cross-curve",{attrs:{origin:e.crossCurveInfo.origin,time:e.crossCurveInfo.time,value:e.crossCurveInfo.value,fontSize:e.fontSize,textSize:e.textSize,chartSize:e.chartSize}}):e._e(),e._v(" "),i("rect",{ref:"cursor",staticClass:"cursor",attrs:{x:"0",y:"0",width:e.chartSize.width,height:e.chartSize.height},on:{mousedown:e.startDrag,mousemove:function(t){return t.stopPropagation(),e.mouseMove(t)},mouseup:e.endDrag,wheel:function(t){return t.stopPropagation(),t.preventDefault(),e.mouseScale(t)}}})]:e._e()],2),e._v(" "),e.loading?i("div",{staticClass:"loading-wrap"},[i("loading",{attrs:{width:e.loadingSize,height:e.loadingSize}})],1):e.data.length<1?i("div",{staticClass:"no-data"},[i("div",{staticClass:"text"},[e._v(e._s(e.$lang.$t("data.no")))])]):e.isMobile&&e.isFullScreen&&e.isPortrait?i("div",{staticClass:"see-landscape"},[i("div",{staticClass:"text"},[e._v("\n      "+e._s(e.$lang.$t("see.landscape"))),i("br"),e._v(" "),i("button",{staticClass:"back-to-portrait",on:{click:function(t){e.isFullScreen=!1}}},[e._v(e._s(e.$lang.$t("back-to-portrait")))])])]):e._e()],1)},staticRenderFns:[]}),(ii=("function"==typeof(Qe=ni)?Qe.options:Qe)||{}).__file="Index.vue",ii.render||(ii.render=qe.render,ii.staticRenderFns=qe.staticRenderFns,ii._compiled=!0,ei&&(ii.functional=!0)),ii._scopeId=ti,ii});
//# sourceMappingURL=index.js.map
