!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Kline=t()}(this,function(){"use strict";function d(){var e=Array.prototype.filter.call(document.getElementsByTagName("meta"),function(e){return"viewport"===e.getAttribute("name")});if(e.length<1)return 1;var t=(e=e[e.length-1]).getAttribute("content").match(/initial-scale\s*=\s*([^,]+)(,|$)/);return(t?+t[1]:1)||1}function a(){return Math.random().toFixed(6)}function s(e,t){var n=this;n.observer=e,n.id=t,n.unsubscribe=function(e){var t=Object.keys(n.observer.subscribes).find(function(e){return n.observer.subscribes[e].id===n.id});n.observer.subscribes.splice(t,1),"function"==typeof e&&e(),console.log("simple-observer: Subscription: Unsubscribe success!")}}var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},m=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};function f(e,t){return Math.sqrt(Math.pow(e.pageX-t.pageX,2)+Math.pow(e.pageY-t.pageY,2))}function v(e,t){return Math.atan((e.pageY-t.pageY)/(e.pageX-t.pageX))/Math.PI*180}function g(t,n){function e(e){return n?(+t[e]+ +n[e])/2:+t[e]}return{clientX:e("clientX"),clientY:e("clientY"),pageX:e("pageX"),pageY:e("pageY"),screenX:e("screenX"),screenY:e("screenY")}}var p=function(e){if("function"!=typeof e)throw new Error("simple-observer: Observer: Params generator of constructor is invalid, must be a function");var r=this;r.subscribes=[],r.subscribe=function(e){for(var t=a(),n=0,i=function(e){return r.subscribes[e].id===t};n=Object.keys(r.subscribes).find(i),t=a(),void 0!==n;);return r.subscribes.push({id:t,callback:e}),new s(r,t)},e(function(){var t=arguments;r.subscribes.map(function(e){e.callback.apply(r,t)})})};function o(t,s){var n=null;window.TouchObservers||(window.TouchObservers=[]);var o=window.TouchObservers.find(function(e){return e.el===t});if(o&&o.Observer){if(!s)return o;o.unbind()}else{var e=new p(function(e){n=e});o?(o.Observer=e,o.next=n):(o={Observer:e,next:n,el:t},window.TouchObservers.push(o))}var u=null,c=null,l=0,h=0;function i(e){u=Array.prototype.map.call(e.targetTouches,function(e){return e}),c=0<u.length?g(u[0],u[1]):null,h=1<u.length?v(u[0],u[1]):0,l=1<u.length?f(u[0],u[1]):0;var t={type:e.type,touches:u,center:c,angle:h,distance:l,timeStamp:e.timeStamp,centerDelta:null,deltaAngle:0,pinchScale:1,event:e};"function"==typeof s?s(t):s&&e.preventDefault(),o.next(t)}function r(e){var t=u.map(function(t){return Array.prototype.find.call(e.changedTouches,function(e){return e.identifier===t.identifier})}).filter(function(e){return!!e}),n=0<t.length?g(t[0],t[1]):null,i=1<t.length?v(t[0],t[1]):0,r=1<t.length?f(t[0],t[1]):0,a={type:e.type,touches:t,center:n,angle:i,distance:r,timeStamp:e.timeStamp,centerDelta:function(e,t){var n=d();if(!e||!t)return{deltaX:0,deltaY:0,deltaDistance:0,direction:"",windowScale:n};var i=e.pageX-t.pageX,r=e.pageY-t.pageY,a=Math.sqrt(Math.pow(i,2)+Math.pow(r,2)),s=Math.abs(i)<=30/n?"":0<i?"right":"left",o=Math.abs(r)<=30/n?"":0<r?"bottom":"top";return{deltaX:i,deltaY:r,deltaDistance:a,direction:s+(s&&o?"-":"")+o,windowScale:n}}(n,c),deltaAngle:i-h,pinchScale:r/l||1,event:e};"function"==typeof s?s(a):s&&e.preventDefault(),o.next(a)}function a(){t.removeEventListener("touchstart",i),t.removeEventListener("touchmove",r),t.removeEventListener("touchend",r)}return t.addEventListener("touchstart",i),t.addEventListener("touchmove",r),t.addEventListener("touchend",r),o.unbind=a,o.destroy=function(){a(),o.Observer=null},o}function e(i){return function(e,t,n){return"function"==typeof e&&(n=t||null,t=e,e=window),i(e,t,n)}}function u(e){return e[0].toUpperCase()+e.slice(1)}var c=Object.assign||function(){return Array.prototype.map.call(arguments,function(e){return"object"===(void 0===e?"undefined":t(e))?e:{}}).reduce(function(t,n){return Object.keys(n).forEach(function(e){t[e]=n[e]}),t},{})};var i=e(function(e,t,n){var i=o(e,n);return{unsubscribe:i.Observer.subscribe(function(e){1===e.touches.length&&t(c(e,{type:"pan"+u(e.type.replace("touch",""))}))}).unsubscribe,touchObserver:i}});var h=e(function(e,t,n){var i=o(e,n),r=0;return{unsubscribe:i.Observer.subscribe(function(e){if("touchend"===e.type&&0===r)return t(c(e,{type:"pinchEnd"})),void r++;2<=e.touches.length&&(t(c(e,{type:"pinch"+u(e.type.replace("touch",""))})),r=0)}).unsubscribe,touchObserver:i}}),y=$,x=$,w=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,b=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function $(e){e||(e={});var t=e.ua;return t||"undefined"==typeof navigator||(t=navigator.userAgent),t&&t.headers&&"string"==typeof t.headers["user-agent"]&&(t=t.headers["user-agent"]),"string"==typeof t&&(e.tablet?b.test(t):w.test(t))}y.isMobile=x;var M=Object.freeze([Date.now(),1,1,1,1,1,1]),S=Object.freeze([{name:"candles",value:"normal"},{name:"heikin-ashi",value:"average"}]),D=Object.freeze([{name:"time",value:6e4},{name:"1min",value:6e4},{name:"5min",value:3e5},{name:"15min",value:9e5},{name:"30min",value:18e5},{name:"1hour",value:36e5},{name:"4hour",value:144e5},{name:"1day",value:864e5},{name:"5day",value:432e6},{name:"1week",value:6048e5}]),_=Object.freeze({base:[{name:"MA",value:"MA"},{name:"EMA",value:"EMA"},{name:"BOLL",value:"BOLL"},{name:"SAR",value:"SAR"}],technical:[{name:"MACD",value:"MACD"},{name:"KDJ",value:"KDJ"},{name:"StochRSI",value:"StochRSI"},{name:"RSI",value:"RSI"},{name:"DMI",value:"DMI"},{name:"OBV",value:"OBV"},{name:"DMA",value:"DMA"},{name:"TRIX",value:"TRIX"},{name:"BRAR",value:"BRAR"},{name:"VR",value:"VR"},{name:"EMV",value:"EMV"},{name:"WR",value:"WR"},{name:"ROC",value:"ROC"},{name:"MTM",value:"MTM"},{name:"PSY",value:"PSY"}]}),z=d(),C=75/z,R=30/z,O=Object.freeze([{name:"Jan",value:1},{name:"Feb",value:2},{name:"Mar",value:3},{name:"Apr",value:4},{name:"May",value:5},{name:"Jun",value:6},{name:"Jul",value:7},{name:"Aug",value:8},{name:"Sep",value:9},{name:"Oct",value:10},{name:"Nov",value:11},{name:"Dec",value:12}]),Y=Object.freeze({down:0,halfUp:1,halfDown:2,up:3}),A=20,I=1,T=1e6,W=-7,k=21,F="[big.js] ",H=F+"Invalid ",E=H+"decimal places",N=H+"rounding mode",X=F+"Division by zero",L={},j=void 0,V=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function P(e,t,n,i){var r=e.c,a=e.e+t+1;if(a<r.length){if(1===n)i=5<=r[a];else if(2===n)i=5<r[a]||5==r[a]&&(i||a<0||r[a+1]!==j||1&r[a-1]);else if(3===n)i=i||!!r[0];else if(i=!1,0!==n)throw Error(N);if(a<1)r.length=1,r[0]=i?(e.e=-t,1):e.e=0;else{if(r.length=a--,i)for(;9<++r[a];)r[a]=0,a--||(++e.e,r.unshift(1));for(a=r.length;!r[--a];)r.pop()}}else if(n<0||3<n||n!==~~n)throw Error(N);return e}function B(e,t,n,i){var r,a,s=e.constructor,o=!e.c[0];if(n!==j){if(n!==~~n||n<(3==t)||T<n)throw Error(3==t?H+"precision":E);for(n=i-(e=new s(e)).e,e.c.length>++i&&P(e,n,s.RM),2==t&&(i=e.e+n+1);e.c.length<i;)e.c.push(0)}if(r=e.e,n=(a=e.c.join("")).length,2!=t&&(1==t||3==t&&i<=r||r<=s.NE||r>=s.PE))a=a.charAt(0)+(1<n?"."+a.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)a="0"+a;a="0."+a}else if(0<r)if(++r>n)for(r-=n;r--;)a+="0";else r<n&&(a=a.slice(0,r)+"."+a.slice(r));else 1<n&&(a=a.charAt(0)+"."+a.slice(1));return e.s<0&&(!o||4==t)?"-"+a:a}L.abs=function(){var e=new this.constructor(this);return e.s=1,e},L.cmp=function(e){var t,n=this.c,i=(e=new this.constructor(e)).c,r=this.s,a=e.s,s=this.e,o=e.e;if(!n[0]||!i[0])return n[0]?r:i[0]?-a:0;if(r!=a)return r;if(t=r<0,s!=o)return o<s^t?1:-1;for(a=(s=n.length)<(o=i.length)?s:o,r=-1;++r<a;)if(n[r]!=i[r])return n[r]>i[r]^t?1:-1;return s==o?0:o<s^t?1:-1},L.div=function(e){var t=this.constructor,n=this.c,i=(e=new t(e)).c,r=this.s==e.s?1:-1,a=t.DP;if(a!==~~a||a<0||T<a)throw Error(E);if(!i[0])throw Error(X);if(!n[0])return new t(0*r);var s,o,u,c,l,h=i.slice(),d=s=i.length,f=n.length,m=n.slice(0,s),v=m.length,g=e,p=g.c=[],y=0,x=a+(g.e=this.e-e.e)+1;for(g.s=r,r=x<0?0:x,h.unshift(0);v++<s;)m.push(0);do{for(u=0;u<10;u++){if(s!=(v=m.length))c=v<s?1:-1;else for(l=-1,c=0;++l<s;)if(i[l]!=m[l]){c=i[l]>m[l]?1:-1;break}if(!(c<0))break;for(o=v==s?i:h;v;){if(m[--v]<o[v]){for(l=v;l&&!m[--l];)m[l]=9;--m[l],m[v]+=10}m[v]-=o[v]}for(;!m[0];)m.shift()}p[y++]=c?u:++u,m[0]&&c?m[v]=n[d]||0:m=[n[d]]}while((d++<f||m[0]!==j)&&r--);return p[0]||1==y||(p.shift(),g.e--),x<y&&P(g,a,t.RM,m[0]!==j),g},L.eq=function(e){return!this.cmp(e)},L.gt=function(e){return 0<this.cmp(e)},L.gte=function(e){return-1<this.cmp(e)},L.lt=function(e){return this.cmp(e)<0},L.lte=function(e){return this.cmp(e)<1},L.minus=L.sub=function(e){var t,n,i,r,a=this,s=a.constructor,o=a.s,u=(e=new s(e)).s;if(o!=u)return e.s=-u,a.plus(e);var c=a.c.slice(),l=a.e,h=e.c,d=e.e;if(!c[0]||!h[0])return h[0]?(e.s=-u,e):new s(c[0]?a:0);if(o=l-d){for((i=(r=o<0)?(o=-o,c):(d=l,h)).reverse(),u=o;u--;)i.push(0);i.reverse()}else for(n=((r=c.length<h.length)?c:h).length,o=u=0;u<n;u++)if(c[u]!=h[u]){r=c[u]<h[u];break}if(r&&(i=c,c=h,h=i,e.s=-e.s),0<(u=(n=h.length)-(t=c.length)))for(;u--;)c[t++]=0;for(u=t;o<n;){if(c[--n]<h[n]){for(t=n;t&&!c[--t];)c[t]=9;--c[t],c[n]+=10}c[n]-=h[n]}for(;0===c[--u];)c.pop();for(;0===c[0];)c.shift(),--d;return c[0]||(e.s=1,c=[d=0]),e.c=c,e.e=d,e},L.mod=function(e){var t,n=this,i=n.constructor,r=n.s,a=(e=new i(e)).s;if(!e.c[0])throw Error(X);return n.s=e.s=1,t=1==e.cmp(n),n.s=r,e.s=a,t?new i(n):(r=i.DP,a=i.RM,i.DP=i.RM=0,n=n.div(e),i.DP=r,i.RM=a,this.minus(n.times(e)))},L.plus=L.add=function(e){var t,n=this,i=n.constructor,r=n.s,a=(e=new i(e)).s;if(r!=a)return e.s=-a,n.minus(e);var s=n.e,o=n.c,u=e.e,c=e.c;if(!o[0]||!c[0])return c[0]?e:new i(o[0]?n:0*r);if(o=o.slice(),r=s-u){for((t=0<r?(u=s,c):(r=-r,o)).reverse();r--;)t.push(0);t.reverse()}for(o.length-c.length<0&&(t=c,c=o,o=t),r=c.length,a=0;r;o[r]%=10)a=(o[--r]=o[r]+c[r]+a)/10|0;for(a&&(o.unshift(a),++u),r=o.length;0===o[--r];)o.pop();return e.c=o,e.e=u,e},L.pow=function(e){var t=this,n=new t.constructor(1),i=n,r=e<0;if(e!==~~e||e<-1e6||1e6<e)throw Error(H+"exponent");for(r&&(e=-e);1&e&&(i=i.times(t)),e>>=1;)t=t.times(t);return r?n.div(i):i},L.round=function(e,t){var n=this.constructor;if(e===j)e=0;else if(e!==~~e||e<-T||T<e)throw Error(E);return P(new n(this),e,t===j?n.RM:t)},L.sqrt=function(){var e,t,n,i=this,r=i.constructor,a=i.s,s=i.e,o=new r(.5);if(!i.c[0])return new r(i);if(a<0)throw Error(F+"No square root");for(s=(e=0===(a=Math.sqrt(i+""))||a===1/0?((t=i.c.join("")).length+s&1||(t+="0"),s=((s+1)/2|0)-(s<0||1&s),new r(((a=Math.sqrt(t))==1/0?"1e":(a=a.toExponential()).slice(0,a.indexOf("e")+1))+s)):new r(a)).e+(r.DP+=4);n=e,e=o.times(n.plus(i.div(n))),n.c.slice(0,s).join("")!==e.c.slice(0,s).join(""););return P(e,r.DP-=4,r.RM)},L.times=L.mul=function(e){var t,n=this.constructor,i=this.c,r=(e=new n(e)).c,a=i.length,s=r.length,o=this.e,u=e.e;if(e.s=this.s==e.s?1:-1,!i[0]||!r[0])return new n(0*e.s);for(e.e=o+u,a<s&&(t=i,i=r,r=t,u=a,a=s,s=u),t=new Array(u=a+s);u--;)t[u]=0;for(o=s;o--;){for(s=0,u=a+o;o<u;)s=t[u]+r[o]*i[u-o-1]+s,t[u--]=s%10,s=s/10|0;t[u]=(t[u]+s)%10}for(s?++e.e:t.shift(),o=t.length;!t[--o];)t.pop();return e.c=t,e},L.toExponential=function(e){return B(this,1,e,e)},L.toFixed=function(e){return B(this,2,e,this.e+e)},L.toPrecision=function(e){return B(this,3,e,e-1)},L.toString=function(){return B(this)},L.valueOf=L.toJSON=function(){return B(this,4)};var J=function n(){function i(e){var t=this;if(!(t instanceof i))return e===j?n():new i(e);e instanceof i?(t.s=e.s,t.e=e.e,t.c=e.c.slice()):function(e,t){var n,i,r;if(0===t&&1/t<0)t="-0";else if(!V.test(t+=""))throw Error(H+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,-1<(n=t.indexOf("."))&&(t=t.replace(".","")),0<(i=t.search(/e/i))?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),r=t.length,i=0;i<r&&"0"==t.charAt(i);)++i;if(i==r)e.c=[e.e=0];else{for(;0<r&&"0"==t.charAt(--r););for(e.e=n-i-1,e.c=[],n=0;i<=r;)e.c[n++]=+t.charAt(i++)}}(t,e),t.constructor=i}return i.prototype=L,i.DP=A,i.RM=I,i.NE=W,i.PE=k,i.version="5.2.2",i}(),U={langName:"zh",time:"分时","1min":"1min","5min":"5min","15min":"15min","30min":"30min","1hour":"1hour","4hour":"4hour","1day":"1day","5day":"5day","1week":"1week","1mon":"1mon",Jan:"1月",Feb:"2月",Mar:"3月",Apr:"4月",May:"5月",Jun:"6月",Jul:"7月",Aug:"8月",Sep:"9月",Oct:"10月",Nov:"11月",Dec:"12月",yyyy:"{year}年",candles:"K线图","heikin-ashi":"平均K线图","candle-types":"K线类型",indicators:"指标","indicators.base":"基础指标","indicators.technical":"技术指标",MA:"MA",EMA:"EMA",BOLL:"BOLL",SAR:"SAR",MACD:"MACD",KDJ:"KDJ",StochRSI:"StochRSI",RSI:"RSI",DMI:"DMI",OBV:"OBV",DMA:"DMA",TRIX:"TRIX",BRAR:"BRAR",VR:"VR",EMV:"EMV",WR:"WR",ROC:"ROC",MTM:"MTM",PSY:"PSY","full-screen":"全屏","full-screen-exit":"退出全屏"};var G=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"addLangSource",value:function(e){if(!e.langName)throw new Error("Key `langName` in lang object is missed");this.langs[e.langName]=e,console.log("Your custom language set successful")}},{key:"$t",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!this.langs[this.lang])throw new Error("(Lang.js) No language: "+this.lang);var n=this.langs[this.lang][e];return n?Object.keys(t).map(function(e){return{rule:new RegExp("{"+e+"}","g"),value:t[e]}}).reduce(function(e,t){return e.replace(t.reg,t.value)},n):(console.warn("(Lang.js) Key: "+e+" is not exist"),e)}},{key:"setLang",value:function(e){if(!this.langs[e])throw new Error("(Lang.js) No language: "+e);this.lang=e}}]),e}();G.langs=[{langName:"en",time:"time","1min":"1min","5min":"5min","15min":"15min","30min":"30min","1hour":"1hour","4hour":"4hour","1day":"1day","5day":"5day","1week":"1week","1mon":"1mon",Jan:"Jan",Feb:"Feb",Mar:"Mar",Apr:"Apr",May:"May",Jun:"Jun",Jul:"Jul",Aug:"Aug",Sep:"Sep",Oct:"Oct",Nov:"Nov",Dec:"Dec",yyyy:"{year}",candles:"Candles","heikin-ashi":"Heikin Ashi","candle-types":"Candle Types",indicators:"Indicators","indicators.base":"Base Indicators","indicators.technical":"Technical Indicators",MA:"MA",EMA:"EMA",BOLL:"BOLL",SAR:"SAR",MACD:"MACD",KDJ:"KDJ",StochRSI:"StochRSI",RSI:"RSI",DMI:"DMI",OBV:"OBV",DMA:"DMA",TRIX:"TRIX",BRAR:"BRAR",VR:"VR",EMV:"EMV",WR:"WR",ROC:"ROC",MTM:"MTM",PSY:"PSY","full-screen":"Full Screen","full-screen-exit":"Exit Full Screen"},U].reduce(function(e,t){return e[t.langName]=t,e},{}),G.lang=U.langName;var K={created:function(){this.$lang=G},data:function(){return{$lang:null}},methods:{$num:function(e){return new J(e)}}},Z={name:"Candle",mixins:[K],props:{prices:{type:Array,default:function(){return M}},origin:{type:Object,default:function(){return{x:0,y:0}}},width:Number,heightRate:Number},data:function(){return{}},computed:{d:function(){var e=this.origin,t=e.x,n=e.y,i=l(this.prices,5),r=i[1],a=i[2],s=i[3],o=i[4],u=this.$num(this.width).div(2).round(0,Y.down),c=[+this.$num(a).minus(this.$num(Math.max(r,o))).times(this.heightRate).round(0,Y.up),Math.max(1,+this.$num(r).minus(o).abs().times(this.heightRate).round(0,Y.up)),+this.$num(Math.min(r,o)).minus(s).times(this.heightRate).round(0,Y.up)];return"M"+u.plus(t)+","+n+" h1 v"+c[0]+" h"+u+"\n       v"+c[1]+" h"+-u+" v"+c[2]+" h-1 v"+-c[2]+" h"+-u+" v"+-c[1]+" h"+u+" z"},className:function(){var e=l(this.prices,5),t=e[1];return 0<e[4]-t?"up":"down"}},methods:{log:function(){var e;(e=console).log.apply(e,arguments)}}};var q,Q,ee,te,ne,ie=(ee=void 0,te=!(q={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("path",{staticClass:"candle",class:e.className,attrs:{d:e.d},on:{click:e.log}})},staticRenderFns:[]}),(ne=("function"==typeof(Q=Z)?Q.options:Q)||{}).__file="Candle.vue",ne.render||(ne.render=q.render,ne.staticRenderFns=q.staticRenderFns,ne._compiled=!0,te&&(ne.functional=!0)),ne._scopeId=ee,ne);var re=function(e){return e instanceof Date},ae=36e5,se=6e4,oe=/[T ]/,ue=/:/,ce=/^(\d{2})$/,le=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],he=/^(\d{4})/,de=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],fe=/^-(\d{2})$/,me=/^-?(\d{3})$/,ve=/^-?(\d{2})-?(\d{2})$/,ge=/^-?W(\d{2})$/,pe=/^-?W(\d{2})-?(\d{1})$/,ye=/^(\d{2}([.,]\d*)?)$/,xe=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,we=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,be=/([Z+-].*)$/,$e=/^(Z)$/,Me=/^([+-])(\d{2})$/,Se=/^([+-])(\d{2}):?(\d{2})$/;function De(e,t,n){t=t||0,n=n||0;var i=new Date(0);i.setUTCFullYear(e,0,4);var r=7*t+n+1-(i.getUTCDay()||7);return i.setUTCDate(i.getUTCDate()+r),i}var _e=function(e,t){if(re(e))return new Date(e.getTime());if("string"!=typeof e)return new Date(e);var n=(t||{}).additionalDigits;n=null==n?2:Number(n);var i=function(e){var t,n={},i=e.split(oe);if(t=ue.test(i[0])?(n.date=null,i[0]):(n.date=i[0],i[1])){var r=be.exec(t);r?(n.time=t.replace(r[1],""),n.timezone=r[1]):n.time=t}return n}(e),r=function(e,t){var n,i=le[t],r=de[t];if(n=he.exec(e)||r.exec(e)){var a=n[1];return{year:parseInt(a,10),restDateString:e.slice(a.length)}}if(n=ce.exec(e)||i.exec(e)){var s=n[1];return{year:100*parseInt(s,10),restDateString:e.slice(s.length)}}return{year:null}}(i.date,n),a=r.year,s=function(e,t){if(null===t)return null;var n,i,r,a;if(0===e.length)return(i=new Date(0)).setUTCFullYear(t),i;if(n=fe.exec(e))return i=new Date(0),r=parseInt(n[1],10)-1,i.setUTCFullYear(t,r),i;if(n=me.exec(e)){i=new Date(0);var s=parseInt(n[1],10);return i.setUTCFullYear(t,0,s),i}if(n=ve.exec(e)){i=new Date(0),r=parseInt(n[1],10)-1;var o=parseInt(n[2],10);return i.setUTCFullYear(t,r,o),i}if(n=ge.exec(e))return a=parseInt(n[1],10)-1,De(t,a);if(n=pe.exec(e)){a=parseInt(n[1],10)-1;var u=parseInt(n[2],10)-1;return De(t,a,u)}return null}(r.restDateString,a);if(s){var o,u=s.getTime(),c=0;return i.time&&(c=function(e){var t,n,i;if(t=ye.exec(e))return(n=parseFloat(t[1].replace(",",".")))%24*ae;if(t=xe.exec(e))return n=parseInt(t[1],10),i=parseFloat(t[2].replace(",",".")),n%24*ae+i*se;if(t=we.exec(e)){n=parseInt(t[1],10),i=parseInt(t[2],10);var r=parseFloat(t[3].replace(",","."));return n%24*ae+i*se+1e3*r}return null}(i.time)),o=i.timezone?(l=i.timezone,(h=$e.exec(l))?0:(h=Me.exec(l))?(d=60*parseInt(h[2],10),"+"===h[1]?-d:d):(h=Se.exec(l))?(d=60*parseInt(h[2],10)+parseInt(h[3],10),"+"===h[1]?-d:d):0):(o=new Date(u+c).getTimezoneOffset(),new Date(u+c+o*se).getTimezoneOffset()),new Date(u+c+o*se)}var l,h,d;return new Date(e)};var ze=function(e){var t=_e(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n};var Ce=function(e){var t=_e(e);return t.setHours(0,0,0,0),t};var Re=function(e,t){var n=Ce(e),i=Ce(t),r=n.getTime()-6e4*n.getTimezoneOffset(),a=i.getTime()-6e4*i.getTimezoneOffset();return Math.round((r-a)/864e5)};var Oe=function(e){var t=_e(e);return Re(t,ze(t))+1};var Ye=function(e,t){var n=t&&Number(t.weekStartsOn)||0,i=_e(e),r=i.getDay(),a=(r<n?7:0)+r-n;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i};var Ae=function(e){return Ye(e,{weekStartsOn:1})};var Ie=function(e){var t=_e(e),n=t.getFullYear(),i=new Date(0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);var r=Ae(i),a=new Date(0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);var s=Ae(a);return t.getTime()>=r.getTime()?n+1:t.getTime()>=s.getTime()?n:n-1};var Te=function(e){var t=Ie(e),n=new Date(0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Ae(n)};var We=function(e){var t=_e(e),n=Ae(t).getTime()-Te(t).getTime();return Math.round(n/6048e5)+1};var ke=function(e){if(re(e))return!isNaN(e);throw new TypeError(toString.call(e)+" is not an instance of Date")};var Fe=["M","MM","Q","D","DD","DDD","DDDD","d","E","W","WW","YY","YYYY","GG","GGGG","H","HH","h","hh","m","mm","s","ss","S","SS","SSS","Z","ZZ","X","x"];var He=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);var i=Fe.concat(t).sort().reverse();return new RegExp("(\\[[^\\[]*\\])|(\\\\)?("+i.join("|")+"|.)","g")};var Ee=function(){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=["January","February","March","April","May","June","July","August","September","October","November","December"],i=["Su","Mo","Tu","We","Th","Fr","Sa"],r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s=["AM","PM"],o=["am","pm"],u=["a.m.","p.m."],e={MMM:function(e){return t[e.getMonth()]},MMMM:function(e){return n[e.getMonth()]},dd:function(e){return i[e.getDay()]},ddd:function(e){return r[e.getDay()]},dddd:function(e){return a[e.getDay()]},A:function(e){return 1<=e.getHours()/12?s[1]:s[0]},a:function(e){return 1<=e.getHours()/12?o[1]:o[0]},aa:function(e){return 1<=e.getHours()/12?u[1]:u[0]}};return["M","D","DDD","d","Q","W"].forEach(function(n){e[n+"o"]=function(e,t){return function(e){var t=e%100;if(20<t||t<10)switch(t%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"}(t[n](e))}}),{formatters:e,formattingTokensRegExp:He(e)}},Ne={distanceInWords:function(){var r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};return{localize:function(e,t,n){var i;return n=n||{},i="string"==typeof r[e]?r[e]:1===t?r[e].one:r[e].other.replace("{{count}}",t),n.addSuffix?0<n.comparison?"in "+i:i+" ago":i}}}(),format:Ee()};var Xe={M:function(e){return e.getMonth()+1},MM:function(e){return je(e.getMonth()+1,2)},Q:function(e){return Math.ceil((e.getMonth()+1)/3)},D:function(e){return e.getDate()},DD:function(e){return je(e.getDate(),2)},DDD:function(e){return Oe(e)},DDDD:function(e){return je(Oe(e),3)},d:function(e){return e.getDay()},E:function(e){return e.getDay()||7},W:function(e){return We(e)},WW:function(e){return je(We(e),2)},YY:function(e){return je(e.getFullYear(),4).substr(2)},YYYY:function(e){return je(e.getFullYear(),4)},GG:function(e){return String(Ie(e)).substr(2)},GGGG:function(e){return Ie(e)},H:function(e){return e.getHours()},HH:function(e){return je(e.getHours(),2)},h:function(e){var t=e.getHours();return 0===t?12:12<t?t%12:t},hh:function(e){return je(Xe.h(e),2)},m:function(e){return e.getMinutes()},mm:function(e){return je(e.getMinutes(),2)},s:function(e){return e.getSeconds()},ss:function(e){return je(e.getSeconds(),2)},S:function(e){return Math.floor(e.getMilliseconds()/100)},SS:function(e){return je(Math.floor(e.getMilliseconds()/10),2)},SSS:function(e){return je(e.getMilliseconds(),3)},Z:function(e){return Le(e.getTimezoneOffset(),":")},ZZ:function(e){return Le(e.getTimezoneOffset())},X:function(e){return Math.floor(e.getTime()/1e3)},x:function(e){return e.getTime()}};function Le(e,t){t=t||"";var n=0<e?"-":"+",i=Math.abs(e),r=i%60;return n+je(Math.floor(i/60),2)+t+je(r,2)}function je(e,t){for(var n=Math.abs(e).toString();n.length<t;)n="0"+n;return n}var Ve=function(e,t,n){var i=t?String(t):"YYYY-MM-DDTHH:mm:ss.SSSZ",r=(n||{}).locale,a=Ne.format.formatters,s=Ne.format.formattingTokensRegExp;r&&r.format&&r.format.formatters&&(a=r.format.formatters,r.format.formattingTokensRegExp&&(s=r.format.formattingTokensRegExp));var o=_e(e);return ke(o)?function(e,t,n){var i,r,a,s=e.match(n),o=s.length;for(i=0;i<o;i++)r=t[s[i]]||Xe[s[i]],s[i]=r||((a=s[i]).match(/\[[\s\S]/)?a.replace(/^\[|]$/g,""):a.replace(/\\/g,""));return function(e){for(var t="",n=0;n<o;n++)s[n]instanceof Function?t+=s[n](e,Xe):t+=s[n];return t}}(i,a,s)(o):"Invalid Date"},Pe={name:"CrossCurve",mixins:[K],props:{y:Number,width:Number,textWidth:{type:Number,default:100},price:Number,isUp:Boolean,fontSize:Number},data:function(){return{}},computed:{cY:function(){return this.$num(this.y||0).round(0,Y.down)}},watch:{},methods:{format:Ve,c:function(e,t){return this.$num(e).minus(this.$num(t).div(2)).round(0,Y.down)}}};var Be,Je,Ue,Ge,Ke,Ze=(Ue=void 0,Ge=!(Be={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{staticClass:"curr-price",class:e.isUp?"up":"down"},[n("line",{staticClass:"curr-price-line",class:e.red,attrs:{x1:"0",y1:e.$num(e.cY).plus(.5),x2:e.width,y2:e.$num(e.cY).plus(.5)}}),e._v(" "),n("g",{staticClass:"curr-price-value"},[n("rect",{staticClass:"curr-price-value-bg",attrs:{x:e.width,y:e.c(e.cY,20),width:e.textWidth,height:"20"}}),e._v(" "),n("text",{staticClass:"curr-price-value-text",attrs:{x:e.$num(e.width).plus(8),y:e.$num(e.cY).plus(e.$num(e.fontSize).div(2)),"font-size":e.fontSize}},[e._v(e._s(e.price)+"\n    ")])])])},staticRenderFns:[]}),(Ke=("function"==typeof(Je=Pe)?Je.options:Je)||{}).__file="CurrPrice.vue",Ke.render||(Ke.render=Be.render,Ke.staticRenderFns=Be.staticRenderFns,Ke._compiled=!0,Ge&&(Ke.functional=!0)),Ke._scopeId=Ue,Ke);function qe(e){return e.getBoundingClientRect()}var Qe={name:"YAxis",mixins:[K],props:{origin:Object,height:Number,range:Object,fontSize:Number},data:function(){return{transform:""}},computed:{cOrigin:function(){var e=this.origin||{},t=e.x,n=void 0===t?0:t,i=e.y,r=void 0===i?0:i;return{x:+this.$num(n).round(),y:+this.$num(r).round()}},cHeight:function(){return+this.$num(this.height).round()},unitHeight:function(){if(!this.range||!this.height)return 0;var e=this.range,t=e.max,n=void 0===t?1:t,i=e.min,r=void 0===i?0:i,a=e.power,s=void 0===a?0:a;return this.$num(n).minus(r).lte(0)?0:+this.$num(this.height).div(this.$num(n).minus(r)).times(this.$num(10).pow(s))},rangeOfTwo:function(){return this.range&&this.unitHeight?{max:+this.$num(R).times(2).div(this.unitHeight).round(0,Y.down),min:+this.$num(R).div(this.unitHeight).round(0,Y.up)}:null},rule:function(){var n=this;if(!this.rangeOfTwo)return null;var e=this.rangeOfTwo,t=e.max,i=e.min,r=this.$num(t).gt(i)?[].concat(m(Array(+this.$num(t).minus(i)))).map(function(e,t){return{value:+n.$num(i).plus(t)}}):[],a=r.filter(function(e){var t=e.value;return 0==+n.$num(t).mod(2)||0==+n.$num(t).mod(5)});return a[a.length-1]||r[r.length-1]||{value:1}},coords:function(){var i=this;if(!this.origin||Object.keys(this.range).length<1||!this.rule)return[];var e=this.range,t=e.max,n=void 0===t?1:t,r=e.min,a=void 0===r?0:r,s=e.power,o=void 0===s?0:s,u=this.$num(10).pow(o);return[].concat(m(Array(+this.$num(n).minus(a).div(u).round(0,Y.up)))).map(function(e,t){return{value:+i.$num(n).minus(u.times(t)).round(-o,Y.up),cValue:+i.$num(n).div(u).minus(t).round(0,Y.up),delta:t}}).filter(function(e){var t=e.cValue;return 0==+i.$num(t).mod(i.rule.value)}).map(function(e){var t=e.value,n=e.delta;return{text:t.toString(),origin:{x:+i.cOrigin.x,y:+i.$num(n).times(i.unitHeight).plus(i.cOrigin.y).round(0,Y.down)}}})}},watch:{coords:function(){this.emitWidth()},origin:function(){this.emitWidth()}},methods:{emitWidth:function(){var n=this;0<this.coords.length&&this.origin&&this.$nextTick(function(){var e=n.$refs.yAxis[0]||n.$refs.yAxis;if(e){var t=qe(e);n.$emit("yWidth",+n.$num(t.width).plus(8).round(0,Y.down))}})}}};var et,tt,nt,it,rt,at=(nt=void 0,it=!(et={render:function(){var n=this,e=n.$createElement,i=n._self._c||e;return n.origin?i("g",{ref:"yAxis",staticClass:"y-axis"},[i("rect",{staticClass:"axis-line y",attrs:{x:n.cOrigin.x,y:n.cOrigin.y,width:"1",height:n.cHeight}}),n._v(" "),n._l(n.coords,function(e,t){return i("g",{key:t,staticClass:"axis-coord y"},[i("rect",{staticClass:"axis-coord-marker y",attrs:{x:e.origin.x,y:e.origin.y,width:"4",height:"1"}}),n._v(" "),i("text",{staticClass:"axis-coord-text y",attrs:{x:n.$num(e.origin.x).plus(8),y:n.$num(e.origin.y).plus(n.$num(n.fontSize).div(2)),"font-size":n.fontSize}},[n._v("\n      "+n._s(e.text)+"\n    ")])])})],2):n._e()},staticRenderFns:[]}),(rt=("function"==typeof(tt=Qe)?tt.options:tt)||{}).__file="YAxis.vue",rt.render||(rt.render=et.render,rt.staticRenderFns=et.staticRenderFns,rt._compiled=!0,it&&(rt.functional=!0)),rt._scopeId=nt,rt),st={name:"Candles",mixins:[K],components:{YAxis:at,Candle:ie,CurrPrice:Ze},props:{data:{type:Array,default:function(){return[]}},candleWidth:{type:Number,default:5},candleInterval:{type:Number,default:1},type:{type:String,default:S[0].value},size:Object,svgWidth:Number,showHLine:Boolean,fontSize:Number,markerWidth:Number,deltaX:{type:Number,default:0}},data:function(){return{CandleTypes:S}},computed:{contentWidth:function(){return this.size?+this.$num(this.size.width).minus(20):0},candleOffsetWidth:function(){return+this.$num(this.candleWidth).plus(this.candleInterval)},cutLength:function(){if(!this.size)return 0;var e=this.$num(this.contentWidth).plus(this.deltaX).div(this.candleOffsetWidth).round(0,Y.up);return e.lt(this.data.length-1)?+e.plus(1):Math.max(1,+e.minus(1))},sliceLength:function(){if(!this.size)return 0;var e=this.$num(this.contentWidth).div(this.candleOffsetWidth).round(0,Y.up);return e.lt(this.data.length-1)?+e.plus(1):Math.max(1,+e.minus(1))},showData:function(){if(!this.size)return[];var e=Math.max(0,this.data.length-this.cutLength);return this.data.slice(e,Math.min(this.data.length,e+this.sliceLength))},cData:function(){var n=this;return this.type===S[1].value?this.showData.map(function(e,t){return n.cPrices(e,n.showData[t-1]||e)}):this.showData},origins:function(){var n=this;return this.cData.map(function(e,t){return n.calcOrigin(e,t)})},priceRange:function(){var i=0,r=this.showData[0]?this.showData[0][3]:0,a=0;this.showData.forEach(function(e){var t=Math.max(e[1],e[2],e[4]),n=Math.min(e[1],e[3],e[4]);i<t&&(i=t),n<r&&(r=n),e.forEach(function(e){var t=e.toString().split("."),n=l(t,2)[1];n&&(a=Math.max(a,n.length))})});var e=+this.$num(i).minus(r).toExponential().toString().split("e")[1];return e=Math.max(-a,e-2),{max:i,min:r,precision:a,power:e}},rangeY:function(){var e=this.priceRange,t=e.max,n=e.min,i=e.power,r=e.precision;if(!this.size)return{max:t,min:n,power:i,precision:r};var a=this.$num(t).minus(n).div(this.size.height).times(40).toFixed(-i);return{max:+this.$num(t).plus(a),min:+this.$num(n).minus(a),power:i,precision:r}},heightRate:function(){if(!this.size)return 1;var e=this.rangeY,t=e.max,n=e.min;return+this.$num(this.size.height).div(this.$num(t).minus(n))},startX:function(){return+this.$num(this.contentWidth).minus(this.$num(this.candleOffsetWidth).times(this.sliceLength))},currPrice:function(){var e=(this.data||[]).length;if(!this.data||e<1)return null;var t=this.data[e-1],n=this.data[e-2],i=this.type===S[0].value?t:this.cPrices(t,n||t),r=l(i,5),a=r[1],s=r[4];return{value:s,y:+this.$num(this.rangeY.max).minus(s).times(this.heightRate).round(0,Y.up),isUp:0<=s-a}}},watch:{cData:{handler:function(e){var t=this;0<e.length&&this.$nextTick(function(){t.$emit("showCandles",{data:t.cData,origins:t.origins,rangeY:t.rangeY,heightRate:t.heightRate,sliceLength:t.sliceLength})})},immediate:!0}},methods:{calcOrigin:function(e,t){return{x:+this.$num(this.candleOffsetWidth).times(t).plus(this.startX),y:+this.$num(this.rangeY.max).minus(Math.max(e[1],e[2],e[4])).times(this.heightRate).round(0,Y.up)}},cPrices:function(e,t){var n,i=(n=e,Array.isArray(n)?n:Array.from(n)),r=i[0],a=i[1],s=i[2],o=i[3],u=i[4],c=i.slice(5),l=t[1],h=t[4],d=+this.$num(l).plus(h).div(2).toFixed(this.rangeY.precision),f=+this.$num(s).plus(o).plus(a).plus(u).div(4).toFixed(this.rangeY.precision);return[r,d,Math.max(s,d,f),Math.min(o,d,f),f].concat(m(c))}}};var ot,ut,ct,lt,ht,dt=(ct=void 0,lt=!(ot={render:function(){var n=this,e=n.$createElement,i=n._self._c||e;return n.size?i("g",{staticClass:"candles"},[i("g",{attrs:{"clip-path":"url(#chart-content-clip)"}},n._l(n.cData,function(e,t){return i("candle",{key:e[0],attrs:{prices:e,width:n.candleWidth,heightRate:n.heightRate,origin:n.origins[t]}})})),n._v(" "),i("y-axis",{attrs:{origin:{x:n.size.width,y:0},height:n.size.height,range:n.rangeY,fontSize:n.fontSize},on:{yWidth:function(e){n.$emit("yWidth",e)}}}),n._v(" "),n.showHLine?i("rect",{staticClass:"h-line",attrs:{x:0,y:n.size.height-1,width:n.svgWidth,height:"1"}}):n._e(),n._v(" "),n.currPrice?i("curr-price",{attrs:{y:n.currPrice.y,width:n.size.width,price:n.currPrice.value,fontSize:n.fontSize,textWidth:n.markerWidth,isUp:n.currPrice.isUp}}):n._e()],1):n._e()},staticRenderFns:[]}),(ht=("function"==typeof(ut=st)?ut.options:ut)||{}).__file="Candles.vue",ht.render||(ht.render=ot.render,ht.staticRenderFns=ot.staticRenderFns,ht._compiled=!0,lt&&(ht.functional=!0)),ht._scopeId=ct,ht),ft={name:"CrossCurve",mixins:[K],props:{origin:{type:Object,default:function(){return{x:1,y:1}}},size:{type:Object,default:function(){return{width:0,height:0}}},textSize:{type:Object,default:function(){return{width:100,height:24}}},fontSize:Number,time:Number,value:Number},data:function(){return{}},computed:{cOrigin:function(){var e=this.origin||{},t=e.x,n=void 0===t?0:t,i=e.y,r=void 0===i?0:i;return{x:this.$num(n).round(0,Y.down),y:this.$num(r).round(0,Y.down)}}},methods:{format:Ve,c:function(e,t){return this.$num(e).minus(this.$num(t).div(2)).round(0,Y.down)}}};var mt,vt,gt,pt,yt,xt=(gt=void 0,pt=!(mt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{staticClass:"cross-curve"},[n("line",{staticClass:"cross-h",attrs:{x1:"0",y1:e.$num(e.cOrigin.y).plus(.5),x2:e.size.width,y2:e.$num(e.cOrigin.y).plus(.5)}}),e._v(" "),n("line",{staticClass:"cross-v",attrs:{x1:e.$num(e.cOrigin.x).plus(.5),y1:0,x2:e.$num(e.cOrigin.x).plus(.5),y2:e.size.height}}),e._v(" "),n("g",{staticClass:"cross-time"},[n("rect",{staticClass:"cross-time-bg",attrs:{x:e.c(e.cOrigin.x,e.textSize.width),y:e.size.height,width:e.textSize.width,height:e.textSize.height}}),e._v(" "),n("text",{staticClass:"cross-time-text",attrs:{x:e.cOrigin.x,y:e.$num(e.size.height).plus(e.fontSize).plus(8),"font-size":e.fontSize,"text-anchor":"middle"}},[e._v(e._s(e.format(e.time,"YYYY-MM-DD HH:mm"))+"\n    ")])]),e._v(" "),n("g",{staticClass:"cross-value"},[n("rect",{staticClass:"cross-value-bg",attrs:{x:e.size.width,y:e.c(e.cOrigin.y,20),width:e.textSize.width,height:"20"}}),e._v(" "),n("text",{staticClass:"cross-value-text",attrs:{x:e.$num(e.size.width).plus(8),y:e.$num(e.cOrigin.y).plus(e.$num(e.fontSize).div(2)),"font-size":e.fontSize}},[e._v(e._s(e.value)+"\n    ")])])])},staticRenderFns:[]}),(yt=("function"==typeof(vt=ft)?vt.options:vt)||{}).__file="CrossCurve.vue",yt.render||(yt.render=mt.render,yt.staticRenderFns=mt.staticRenderFns,yt._compiled=!0,pt&&(yt.functional=!0)),yt._scopeId=gt,yt),wt={name:"Loading",props:{width:Number,height:Number}};var bt,$t,Mt,St,Dt,_t=(Mt=void 0,St=!(bt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"loading",staticStyle:{"enable-background":"new 0 0 512 512"},attrs:{x:"0px",y:"0px",width:e.width,height:e.height,viewBox:"0 0 512 512","xml:space":"preserve"}},[n("circle",{staticClass:"loading-circle-1",attrs:{cx:"256",cy:"16",r:"16"}}),e._v(" "),n("circle",{staticClass:"loading-circle-2",attrs:{transform:"matrix(0.5 -0.866 0.866 0.5 146.2975 349.7025)",cx:"376",cy:"48.2",r:"16"}}),e._v(" "),n("circle",{staticClass:"loading-circle-3",attrs:{transform:"matrix(0.866 -0.5 0.5 0.866 -5.8564 250.1436)",cx:"463.8",cy:"136",r:"16"}}),e._v(" "),n("circle",{staticClass:"loading-circle-4",attrs:{cx:"496",cy:"256",r:"16"}}),e._v(" "),n("circle",{staticClass:"loading-circle-5",attrs:{transform:"matrix(0.5 -0.866 0.866 0.5 -93.7025 589.7025)",cx:"463.8",cy:"376",r:"16"}}),e._v(" "),n("circle",{staticClass:"loading-circle-6",attrs:{transform:"matrix(0.866 -0.5 0.5 0.866 -181.5486 250.1436)",cx:"376",cy:"463.8",r:"16"}}),e._v(" "),n("circle",{staticClass:"loading-circle-7",attrs:{cx:"256",cy:"496",r:"16"}}),e._v(" "),n("circle",{staticClass:"loading-circle-8",attrs:{transform:"matrix(0.5 -0.866 0.866 0.5 -333.7025 349.7025)",cx:"136",cy:"463.8",r:"16"}}),e._v(" "),n("circle",{staticClass:"loading-circle-9",attrs:{transform:"matrix(0.866 -0.5 0.5 0.866 -181.5486 74.4514)",cx:"48.2",cy:"376",r:"16"}}),e._v(" "),n("circle",{staticClass:"loading-circle-10",attrs:{cx:"16",cy:"256",r:"16"}}),e._v(" "),n("circle",{staticClass:"loading-circle-11",attrs:{transform:"matrix(0.5 -0.866 0.866 0.5 -93.7025 109.7025)",cx:"48.2",cy:"136",r:"16"}}),e._v(" "),n("circle",{staticClass:"loading-circle-12",attrs:{transform:"matrix(0.866 -0.5 0.5 0.866 -5.8564 74.4514)",cx:"136",cy:"48.2",r:"16"}})])},staticRenderFns:[]}),(Dt=("function"==typeof($t=wt)?$t.options:$t)||{}).__file="Loading.vue",Dt.render||(Dt.render=bt.render,Dt.staticRenderFns=bt.staticRenderFns,Dt._compiled=!0,St&&(Dt.functional=!0)),Dt._scopeId=Mt,Dt),zt={name:"icon-full-screen",props:{type:String,width:Number,height:Number},data:function(){return{}},methods:{}};var Ct,Rt,Ot,Yt,At,It=(Ot=void 0,Yt=!(Ct={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return"exit"!==t.type?n("svg",{staticClass:"icon-full-screen",staticStyle:{"enable-background":"new 0 0 128 128"},attrs:{viewBox:"0 0 128 128",width:t.width,height:t.height},on:{click:function(e){t.$emit("update:type","exit")}}},[n("path",{attrs:{d:"M112,128H80v-8h32c4.4,0,8-3.6,8-8V80h8v32C128,120.8,120.8,128,112,128C112,128,112,128,112,128z\n   M120,16c0-4.4-3.6-8-8-8c0,0,0,0,0,0H80V0h32c8.8,0,16,7.2,16,16v32h-8C120,48,120,16,120,16z\n   M0,112V80h8v32c0,4.4,3.6,8,8,8c0,0,0,0,0,0h32v8H16C7.2,128,0,120.8,0,112C0,112,0,112,0,112z\n   M8,16v32H0V16C0,7.2,7.2,0,16,0c0,0,0,0,0,0h32v8H16C11.6,8,8,11.6,8,16C8,16,8,16,8,16z"}})]):n("svg",{staticClass:"icon-full-screen",staticStyle:{"enable-background":"new 0 0 128 128"},attrs:{viewBox:"0 0 128 128",width:t.width,height:t.height},on:{click:function(e){t.$emit("update:type","")}}},[n("path",{attrs:{d:"M96,80h32v8H96c-4.4,0-8,3.6-8,8v32h-8V96C80,87.2,87.2,80,96,80C96,80,96,80,96,80z\n  M88,32c0,4.4,3.6,8,8,8c0,0,0,0,0,0l32,0v8H96c-8.8,0-16-7.2-16-16V0l8,0C88,0,88,32,88,32z\n  M48,96v32h-8V96c0-4.4-3.6-8-8-8c0,0,0,0,0,0H0l0-8h32C40.8,80,48,87.2,48,96C48,96,48,96,48,96z\n  M40,32V0l8,0v32c0,8.8-7.2,16-16,16c0,0,0,0,0,0H0l0-8l32,0C36.4,40,40,36.4,40,32C40,32,40,32,40,32z"}})])},staticRenderFns:[]}),(At=("function"==typeof(Rt=zt)?Rt.options:Rt)||{}).__file="IconFullScreen.vue",At.render||(At.render=Ct.render,At.staticRenderFns=Ct.staticRenderFns,At._compiled=!0,Yt&&(At.functional=!0)),At._scopeId=Ot,At);var Tt,Wt,kt,Ft,Ht,Et=(Ft=!(Tt={render:function(){var i=this,e=i.$createElement,r=i._self._c||e;return r("div",{staticClass:"tool-bar"},[i._l(i.period.options,function(t){return r("button",{key:t.value,staticClass:"period",class:{selected:i.period.value===t},on:{click:function(e){i.period.value=t}}},[i._v(i._s(i.$lang.$t(t.name))+"\n  ")])}),i._v(" "),r("div",{staticClass:"candle-types"},[i._v("\n    "+i._s(i.$lang.$t("candle-types"))+"\n    "),r("div",{staticClass:"options"},i._l(i.candleType.options,function(t){return r("button",{key:t.value,staticClass:"option",class:{selected:i.candleType.value===t},on:{click:function(e){i.candleType.value=t}}},[i._v(i._s(i.$lang.$t(t.name))+"\n      ")])}))]),i._v(" "),r("div",{staticClass:"indicators"},[i._v("\n    "+i._s(i.$lang.$t("indicators"))+"\n    "),r("div",{staticClass:"options"},[i._l(i.indicators.options,function(e,n,t){return[r("h5",{key:n,staticClass:"caption"},[i._v(i._s(i.$lang.$t("indicators."+n)))]),i._v(" "),r("div",{key:n,staticClass:"option-group"},i._l(e,function(t){return r("button",{key:t.value,staticClass:"option",class:{selected:i.indicators.value.includes(t)},on:{click:function(e){i.choseIndicator(t,n)}}},[i._v(i._s(i.$lang.$t(t.name))+"\n          ")])})),i._v(" "),0===t?r("div",{key:n,staticClass:"decoration"}):i._e()]})],2)]),i._v(" "),r("div",{staticClass:"icon-full"},[r("span",{staticClass:"tool-tip"},[i._v(i._s(i.$lang.$t("exit"===i.fullScreen?"full-screen-exit":"full-screen")))]),i._v(" "),r("icon-full-screen",{attrs:{type:i.fullScreen},on:{"update:type":function(e){i.fullScreen=e}}})],1)],2)},staticRenderFns:[]}),(Ht=("function"==typeof(Wt={name:"ToolBar",mixins:[K],components:{IconFullScreen:It},data:function(){return{period:{value:D[0],options:D},candleType:{value:S[0],options:S},indicators:{value:[],options:_},fullScreen:""}},computed:{},watch:{"period.value":{handler:function(e){this.$emit("period",e.value)},immediate:!(kt=void 0)},"candleType.value":{handler:function(e){this.$emit("candleType",e.value)},immediate:!0},"indicators.value":{handler:function(e){this.$emit("indicators",e)},immediate:!0},fullScreen:function(e){this.$emit("isFullScreen","exit"===e)}},methods:{choseIndicator:function(t,e){var n=this,i=Object.keys(this.indicators.value).find(function(e){return n.indicators.value[e].value===t.value});i?this.indicators.value.splice(i,1):this.indicators.value.push(r({},t,{type:e}))}}})?Wt.options:Wt)||{}).__file="ToolBar.vue",Ht.render||(Ht.render=Tt.render,Ht.staticRenderFns=Tt.staticRenderFns,Ht._compiled=!0,Ft&&(Ht.functional=!0)),Ht._scopeId=kt,Ht),Nt={name:"Volume",mixins:[K],components:{YAxis:at},props:{data:{type:Array,default:function(){return[]}},origins:{type:Array,default:function(){return[]}},y:Number,size:Object,candleWidth:{type:Number,default:5},candleInterval:{type:Number,default:1},svgWidth:Number,showHLine:Boolean,fontSize:Number},data:function(){return{}},computed:{contentHeight:function(){return(this.size.height||100)-5},volumeWidth:function(){return+this.$num(this.candleWidth).plus(this.candleInterval)-1},deltaX:function(){return.5-this.$num(this.candleInterval).div(2).round(0,Y.down)},rangeVolume:function(){return this.data.reduce(function(e,t){var n=e.max,i=e.min,r=e.precision,a=l(t,6)[5];n<a&&(n=a),a<i&&(i=a);var s=a.toString().split("."),o=l(s,2)[1];return o&&(r=Math.max(r,o.length)),{max:n,min:i,precision:r}},{max:0,min:1/0,precision:0})},rangeY:function(){var e=this.rangeVolume,t=e.max,n=e.min,i=e.precision;if(!this.size||n===1/0)return{max:1,min:0,power:0};var r=+this.$num(t).minus(n).toExponential().toString().split("e")[1];r=Math.max(-i,r-2);var a=this.size.height,s=+this.$num(t).minus(n).div(a);return{max:+this.$num(t).plus(this.$num(s).times(30)).round(r,Y.up),min:Math.max(0,+this.$num(n).minus(this.$num(s).times(5)).round(r,Y.down)),power:r,precision:i}},heightRate:function(){if(!this.size)return 0;var e=this.rangeY,t=e.max,n=e.min;return+this.$num(this.contentHeight).div(this.$num(t).minus(n))},volumes:function(){var r=this;return this.size&&this.data.length===this.origins.length?this.data.map(function(e,t){var n=+r.$num(e[5]).minus(Math.max(0,r.rangeY.min)).times(r.heightRate).round(0,Y.down),i=+r.$num(r.contentHeight).minus(n);return{prices:e,origin:{x:+r.$num(r.origins[t].x).round(0,Y.down).plus(r.deltaX),y:+r.$num(r.y).plus(i).round(0,Y.down)-.5},height:n}}):[]}},watch:{volumes:{handler:function(e){e&&0<e.length&&this.$emit("showVolumes",{heightRate:this.heightRate,rangeY:this.rangeY})},immediate:!0}},methods:{className:function(e){var t=l(e,5),n=t[1];return 0<t[4]-n?"up":"down"}}};var Xt,Lt,jt,Vt,Pt,Bt=(jt=void 0,Vt=!(Xt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{staticClass:"volumes",staticStyle:{overflow:"hidden"}},[n("g",{attrs:{"clip-path":"url(#chart-content-clip)"}},t._l(t.volumes,function(e){return n("rect",{key:e.prices[0],staticClass:"volume",class:t.className(e.prices),attrs:{x:e.origin.x,y:e.origin.y,width:t.volumeWidth,height:e.height}})})),t._v(" "),n("y-axis",{attrs:{origin:{x:t.size.width,y:t.$num(t.y).round()},height:t.size.height,range:t.rangeY,fontSize:t.fontSize},on:{yWidth:function(e){t.$emit("yWidth",e)}}}),t._v(" "),t.showHLine?n("rect",{staticClass:"h-line",attrs:{x:0,y:t.$num(t.y).plus(t.size.height-1).round(),width:t.svgWidth,height:"1"}}):t._e()],1)},staticRenderFns:[]}),(Pt=("function"==typeof(Lt=Nt)?Lt.options:Lt)||{}).__file="Volumes.vue",Pt.render||(Pt.render=Xt.render,Pt.staticRenderFns=Xt.staticRenderFns,Pt._compiled=!0,Vt&&(Pt.functional=!0)),Pt._scopeId=jt,Pt);var Jt=function(e){return _e(e).getDate()};var Ut=function(e){return _e(e).getMonth()},Gt={name:"XAxis",mixins:[K],props:{y:Number,width:Number,time:Number,candleWidth:Number,candleInterval:Number,data:{type:Object,default:function(){return{}}},origins:{type:Object,default:function(){return{}}},sliceLength:Number,fontSize:Number},data:function(){return{acceptedIntervals:[{value:12e4,bold:18e5,name:"2min"},{value:18e4,bold:18e5,name:"3min"},{value:24e4,bold:18e5,name:"4min"},{value:3e5,bold:18e5,name:"5min"},{value:6e5,bold:18e5,name:"10min"},{value:9e5,bold:36e5,name:"15min"},{value:18e5,bold:36e5,name:"30min"},{value:36e5,bold:864e5,name:"60min"},{value:54e5,mod:36e5,bold:864e5,name:"1.5hour"},{value:108e5,mod:36e5,bold:864e5,name:"3hour"},{value:216e5,mod:144e5,bold:864e5,name:"6hour"},{value:432e5,mod:144e5,bold:864e5,name:"12hour"},{value:864e5,mod:576e5,bold:"month",name:"1d"},{value:1728e5,mod:144e6,bold:"month",name:"2d"},{value:2592e5,mod:2304e5,bold:"month",name:"3d"},{value:3456e5,mod:3168e5,bold:"month",name:"4d"},{value:432e6,mod:4032e5,bold:"month",name:"5d"},{value:5184e5,mod:4896e5,bold:"month",name:"6d"},{value:6048e5,mod:576e6,bold:"month",name:"7d"},{value:6912e5,mod:6624e5,bold:"month",name:"8d"},{value:7776e5,mod:7488e5,bold:"month",name:"9d"},{value:864e6,mod:8352e5,bold:"month",name:"10d"},{value:1296e6,bold:"month",alias:"15d"},{value:2592e6,bold:"year",alias:"1mon"},{value:5184e6,bold:"year",alias:"2mon"},{value:7776e6,bold:"year",alias:"3mon"},{value:10368e6,bold:"year",alias:"4mon"}]}},computed:{cY:function(){return+this.$num(this.y).round()},cWidth:function(){return+this.$num(this.width).round()},cTime:function(){var t=this;return D.find(function(e){return e.name===t.time})},delta:function(){return+this.$num(this.candleWidth).div(2).round(0,Y.down)},candleOffsetWidth:function(){return+this.$num(this.candleInterval).plus(this.candleWidth)},range:function(){return{max:this.$num(C).times(2).div(this.candleOffsetWidth).round(0,Y.down),min:this.$num(C).div(this.candleOffsetWidth).round(0,Y.up)}},showRule:function(){var i=this,r=this.cTime.value,e=this.acceptedIntervals.filter(function(e){var t=e.value,n=i.$num(t).div(r);return n.lte(i.range.max)&&n.gte(i.range.min)});return e[e.length-1]||this.acceptedIntervals[this.acceptedIntervals.length-1]},coords:function(){var r=this;if(!this.sliceLength)return[];var e=this.showRule,i=e.value,t=e.mod,a=void 0===t?0:t,s=e.alias,o=this.data,u=this.origins,c={time:0,x:0};return[].concat(m(Array(+this.sliceLength))).reduce(function(e,t,n){if(o[n]){var i=l(o[n],1);return c.time=i[0],c.x=u[n].x,e.concat([{prices:o[n],origin:u[n]}])}return c.time=+r.$num(c.time).plus(r.cTime.value),c.x=+r.$num(c.x).plus(r.candleOffsetWidth),e.concat([{prices:[c.time],origin:{x:c.x}}])},[]).filter(function(e){var t=e.prices;if(s){if("15d"===s)return 15===Jt(+t[0]);var n=+s.match(/^(\d)mon/)[1];return+r.$num(Ut(+t[0])).plus(1).mod(n)===a}return+r.$num(t[0]).mod(i)===a}).map(function(e){var t=e.prices,n=e.origin;return{prices:t,origin:{x:+r.$num(n.x).plus(r.delta),y:+r.cY},text:r.text(+t[0]),bold:r.bold(+t[0])}})}},watch:{coords:function(){this.emitHeight()}},methods:{bold:function(e){var t=void 0,n=this.showRule.bold;if("number"==typeof n)t=e%n==0;else{var i=Ve(e,"YYYY-MM-DD HH:mm");t="month"===n?/\s{4}-\s{2}-01 00:00/.test(i):/\s{4}-01-01 00:00/.test(i)}return t?"bold":""},text:function(e){var t=this.showRule,n=t.name,i=void 0;return t.alias||/d/.test(n)||"00:00"===(i=Ve(e,"HH:mm"))?"01"!==(i=Ve(e,"DD"))?i:"01"===(i=Ve(e,"MM"))?this.$lang.$t("yyyy",{year:Ve(e,"YYYY")}):this.$lang.$t(O[Ut(e)+1]):i},emitHeight:function(){var n=this;0<this.coords.length&&this.$nextTick(function(){n.$nextTick(function(){var e=n.$refs.xAxis[0]||n.$refs.xAxis;if(e){var t=qe(e);n.$emit("xHeight",+n.$num(t.height).plus(8).round(0,Y.down))}})})}},mounted:function(){}};var Kt,Zt,qt,Qt,en,tn,nn,rn,an,sn,on={name:"Index",mixins:[K],components:{ToolBar:Et,Candles:dt,XAxis:(qt=void 0,Qt=!(Kt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{ref:"xAxis",staticClass:"x-axis"},[n("rect",{staticClass:"axis-line x",attrs:{x:"0",y:t.cY,width:t.cWidth,height:"1"}}),t._v(" "),t._l(t.coords,function(e){return n("g",{key:e.prices[0],staticClass:"axis-coord x",class:e.bold,attrs:{"clip-path":"url(#chart-content-clip)"}},[n("rect",{staticClass:"axis-coord-marker x",attrs:{x:e.origin.x,y:e.origin.y,width:"1",height:"4"}}),t._v(" "),n("text",{staticClass:"axis-coord-text x",attrs:{x:e.origin.x,y:t.$num(e.origin.y).plus(t.fontSize).plus(8),"font-size":t.fontSize,"text-anchor":"middle"}},[t._v("\n      "+t._s(e.text)+"\n    ")])])})],2)},staticRenderFns:[]}),(en=("function"==typeof(Zt=Gt)?Zt.options:Zt)||{}).__file="XAxis.vue",en.render||(en.render=Kt.render,en.staticRenderFns=Kt.staticRenderFns,en._compiled=!0,Qt&&(en.functional=!0)),en._scopeId=qt,en),CrossCurve:xt,Volumes:Bt,Loading:_t},props:{data:{type:Array,default:function(){return[]}},fontSize:{type:Number,default:10/z},markerWidth:{type:Number,default:100/z},loading:Boolean},data:function(){return{candleWidth:6/z,axis:{x:{height:0},y:{width:0}},volumeHeight:100/z,indicatorHeight:100/z,size:null,type:S[0].value,showData:{data:[],origins:[]},sliceLength:0,time:"time",showVolumes:!0,isFullScreen:!1,period:0,dragOrigin:null,dragDelta:0,heightRate:{},indicators:[],crossCurveInfo:null,deltaX:0,touchRes:null,isMobile:y()}},computed:{viewBox:function(){return this.size?"0 0 "+this.size.width+" "+this.size.height:"0 0 0 0"},chartWidth:function(){return this.size?+this.$num(this.size.width).minus(this.axis.y.width):0},chartHeight:function(){return this.size?+this.$num(this.size.height).minus(this.axis.x.height):0},showTechIndicator:function(){return!!this.indicators.filter(function(e){return"technical"===e.type}).length},candlesSize:function(){return this.size?{width:this.chartWidth,height:+this.$num(this.chartHeight).minus(this.showVolumes?this.volumeHeight:0).minus(this.showTechIndicator?this.indicatorHeight:0)}:null},cCandleWidth:function(){return+this.$num(this.$num(this.candleWidth).div(2).toFixed(0)).times(2).plus(1)},candleInterval:function(){return Math.round(+this.$num(this.candleWidth).div(7))},crossCurveRangeY:function(){return{candle:[0,this.candlesSize.height],volume:[this.candlesSize.height,this.candlesSize.height+this.volumeHeight],indicator:[this.candlesSize.height+this.volumeHeight,this.chartHeight]}},maxDeltaX:function(){return+this.$num(this.candleWidth).plus(this.candleInterval).times(this.data.length).minus(this.candlesSize.width)}},watch:{isFullScreen:function(){this.resize()},period:function(e){this.$emit("periodChange",e)},size:function(e){e&&this.bindTouch()}},methods:{getSize:function(){var s=this;this.$nextTick(function(){var e=qe(s.$refs.wrap),t=e.width,n=void 0===t?0:t,i=e.height,r=void 0===i?0:i,a=qe(s.$refs.toolbar.$el).height||0;s.size={width:+s.$num(n).round(0,Y.down),height:+s.$num(r).minus(a).round(0,Y.down)}})},setShowData:function(e){var t=e.data,n=e.origins,i=e.rangeY,r=e.heightRate,a=e.sliceLength;this.showData={data:t,origins:n},this.sliceLength=a,this.setHeightRate({heightRate:r,rangeY:i},"candle")},setXAxisHeight:function(e){this.axis.x.height=e},setYAxisWidth:function(e){this.axis.y.width=Math.max(this.axis.y.width,e)},resize:function(){this.getSize()},startDrag:function(e){this.dragOrigin={x:e.offsetX,y:e.offsetY,deltaX:this.deltaX}},drag:function(e){this.markerMove(e),this.isMobile||this.klineMove(e)},endDrag:function(){this.dragOrigin=null},klineMove:function(e){if(this.dragOrigin){var t=e.deltaX||+this.$num(e.offsetX).minus(this.dragOrigin.x);this.dragOrigin.deltaX===this.maxDeltaX&&0<t?(this.$emit("getMorePreData"),this.dragOrigin=null):(this.deltaX=+this.$num(t).plus(this.dragOrigin.deltaX).toFixed(0),this.deltaX=Math.min(Math.max(0,this.deltaX),this.maxDeltaX))}},markerMove:function(e){if(this.showData&&this.showData.data&&0<this.showData.data.length){var r={x:e.offsetX,y:e.offsetY};if(0<=r.x&&r.x<=this.chartWidth&&0<=r.y&&r.y<=this.chartHeight){var a=this.crossCurveRangeY,t=Object.keys(a).find(function(e){var t=l(a[e],2),n=t[0],i=t[1];return n<=r.y&&r.y<=i}),n=this.findNearest(this.showData.data,this.showData.origins,r.x),i=l(a[t],1)[0],s=this.heightRate[t]||{},o=s.value,u=s.rangeY;this.crossCurveInfo={origin:{x:n.x,y:Math.floor(r.y)},time:n.time,value:void 0!==o?this.$num(u.max).minus(this.$num(r.y).minus(i).div(o)).toFixed(u.precision):i}}else this.resetCrossCurveInfo()}},resetCrossCurveInfo:function(){this.crossCurveInfo=null},setHeightRate:function(e,t){var n=e.heightRate,i=e.rangeY;this.$set(this.heightRate,t,{value:n,rangeY:i})},findNearest:function(e,t,n){if(t.length<1)return{x:0,time:0};var i=Math.floor((t.length-1)/2),r=this.calcX(t[i]);if(t.length<2)return{x:r,time:e[0][0]};if(2!==t.length)return 0<r-n?this.findNearest(e.slice(0,i+1),t.slice(0,i+1),n):r-n<0?this.findNearest(e.slice(i),t.slice(i),n):{x:r,time:e[i][0]};var a=this.calcX(t[1]);return 0<Math.abs(a-n)-Math.abs(r-n)?{x:r,time:e[0][0]}:{x:a,time:e[1][0]}},calcX:function(e){return+this.$num(e.x).plus(this.$num(this.candleWidth).div(2).toFixed(0))},mouseScale:function(e){this.scale(0<e.deltaY?-1:1)},scale:function(e){var t=this.candleWidth+2*e;this.candleWidth=Math.max(2,t)},bindTouch:function(){var n=this;this.isMobile&&this.$nextTick(function(){n.touchRes||(n.touchRes=[i(n.$refs.cursor,function(e){if("panMove"===e.type){var t=e.centerDelta.deltaX;n.klineMove({deltaX:t})}else"panStart"===e.type?n.dragOrigin={deltaX:n.deltaX}:"panEnd"===e.type&&(n.dragOrigin=null)},function(e){e.event.preventDefault()}),h(n.$refs.cursor,function(e){var t=e.pinchScale;1!==t&&n.scale(1<t?1:-1)},function(e){e.event.preventDefault()})])})}},beforeMount:function(){window.addEventListener("mousemove",this.resetCrossCurveInfo)},mounted:function(){this.getSize()},beforeDestroy:function(){window.removeEventListener("mousemove",this.resetCrossCurveInfo),this.touchRes&&this.touchRes.forEach(function(e){return e.unsubscribe()})}};return rn=void 0,an=!(tn={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"wrap",staticClass:"kline-wrap",class:{"full-screen":t.isFullScreen}},[n("tool-bar",{ref:"toolbar",on:{period:function(e){t.period=e},candleType:function(e){t.type=e},indicators:function(e){t.indicators=e},isFullScreen:function(e){t.isFullScreen=e}}}),t._v(" "),n("svg",{ref:"kline",staticClass:"kline",attrs:{width:t.size&&t.size.width,height:t.size&&t.size.height,viewBox:t.viewBox}},[t.size?[n("defs",[n("clipPath",{attrs:{id:"chart-content-clip"}},[n("rect",{attrs:{x:"0",y:"0",width:t.$num(t.size.width).minus(t.axis.y.width),height:t.$num(t.size.height)}})])]),t._v(" "),n("candles",{attrs:{data:t.data,candleWidth:t.cCandleWidth,size:t.candlesSize,candleInterval:t.candleInterval,type:t.type,svgWidth:t.size.width,showHLine:!0,fontSize:t.fontSize,deltaX:t.deltaX},on:{showCandles:t.setShowData,yWidth:t.setYAxisWidth}}),t._v(" "),t.showVolumes?n("volumes",{attrs:{data:t.showData.data,origins:t.showData.origins,y:t.candlesSize.height,size:{width:t.candlesSize.width,height:t.volumeHeight},candleWidth:t.cCandleWidth,candleInterval:t.candleInterval,svgWidth:t.size.width,showHLine:!1,fontSize:t.fontSize},on:{showVolumes:function(e){t.setHeightRate(e,"volume")},yWidth:t.setYAxisWidth}}):t._e(),t._v(" "),n("x-axis",{attrs:{data:t.showData.data,origins:t.showData.origins,sliceLength:t.sliceLength,candleWidth:t.cCandleWidth,candleInterval:t.candleInterval,y:+t.$num(t.size.height).minus(t.axis.x.height),width:t.candlesSize.width,time:t.time,fontSize:t.fontSize},on:{xHeight:t.setXAxisHeight}}),t._v(" "),t.axis.x.height&&t.crossCurveInfo?n("cross-curve",{attrs:{origin:t.crossCurveInfo.origin,time:t.crossCurveInfo.time,value:t.crossCurveInfo.value,fontSize:t.fontSize,textSize:{width:t.markerWidth,height:+t.$num(t.axis.x.height).minus(4)},size:{width:t.chartWidth,height:t.chartHeight}}}):t._e(),t._v(" "),n("rect",{ref:"cursor",staticClass:"cursor",attrs:{x:"0",y:"0",width:t.$num(t.size.width).minus(t.axis.y.width),height:t.$num(t.size.height).minus(t.axis.x.height)},on:{mousedown:t.startDrag,mousemove:function(e){return e.stopPropagation(),t.drag(e)},mouseup:t.endDrag,wheel:t.mouseScale}})]:t._e()],2),t._v(" "),t.loading?n("div",{staticClass:"loading-wrap"},[n("loading",{attrs:{width:64,height:64}})],1):t._e()],1)},staticRenderFns:[]}),(sn=("function"==typeof(nn=on)?nn.options:nn)||{}).__file="Index.vue",sn.render||(sn.render=tn.render,sn.staticRenderFns=tn.staticRenderFns,sn._compiled=!0,an&&(sn.functional=!0)),sn._scopeId=rn,sn});
